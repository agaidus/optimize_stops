
## Introduction

### Traveling Salesman Problem

The traveling salesman problem is a classic optimization problem that seeks to find the most efficient route to connect a given set of points. I recently discovered a set of services built by the open-source mapping company, Mapzen that make this complex problem easy to approximate for a relatively small numbers of stops. Given a set of coordinates, the Mapzen [optimize route](https://mapzen.com/documentation/mobility/optimized/api-reference/) service uses road network data to produce a time-distance matrix between these points, and then uses an optimization algorithm to determine a route that minimizes total travel time. This can be done for one of three modes of transportation - pedestrian, bicycle, and automobile. They have a great [example](https://mapzen.com/blog/optimized-route/) with a cool map where they determine the optimal route to visit burrito 'dispensaries' in San Francisco.

This optimization tool can also be used in conjunction with Mapzen's [Search](https://mapzen.com/documentation/search/) Service, which uses open source data to geocode addresses, landmarks, and businesses. Using these two services together is really handy, because it means that one can pass a list of addresses or business names rather than lat / long coordinates.


### Building Off the Optimize Route Service
The Mapzen optimize route service takes a set of points and finds the optimal route that a person should take to visit all of these points. However, what if we have multiple "salesmen?” How should the stops be split up between people and in what order should each person visit their stops?

The idea for this was spurred by a project I'm involved with at work, in which we are sending out multiple research assistants to conduct surveys at a dozen or so different sites in Oakland. In this case, it doesn't matter if one person conducts more surveys than the others  or who goes to which site - the goal is just to minimize the total time to get them all done.

I decided to test these services in an application that hits closer to home (literally): the optimization of Sunday morning errands between my girlfriend, Celeste, and I. Say we're both starting and ending at our apartment in the Inner Richmond, SF and have 6 different places that we need to stop at. How should Celeste and I split up these errands so that we're finished as quickly as possible?

In the post below, I write a set of functions in Python that call the Mapzen Search and Mapzen Optimize Route API services, making it really easy to determine the most efficient route between a given set of locations. I also extend this function to determine the most efficient way to split the stops among multiple salesmen, and which route each person should take.

Additionally, I use the Python package ```folium``` to create leaflet.js slippy maps to display the results of this optimization problem. Folium has a number of built-in tilesets from OpenStreetMap, MapQuest, MapBox, and makes it really easy to build web maps using Python. I find this package to be really useful for data visualization – since I tend to generate data in Python anyway it’s nice to be able to do it all within one work environment.

### A Few Caveats
The purpose of this blog post is NOT to develop an efficient algorithm to approximate a solution to the vehicle routing problem at any large scale. It is instead to show-case an easy way to access and visualize Mapzen routing services, which I find to be very useful and fun to work with. This post only scratches the surface of the capabilities and range of these routing tools. My use of this service to optimize routes among multiple salesmen addresses a specific aspect of this service that they do not provide, but my approach is more of a 'quick and dirty' demonstration than anything else.

The number of unique ways that stops can be partitioned grows very quickly as the number of stops and salesmen increases, so my approach of testing these unique combinations using Mapzen’s optimize route tool will only work for relatively small numbers before exceeding API service limits. For my purposes right now, this is just fine. A better approach would perhaps be to address this problem more “up-stream”, using the Mapzen generated [Time-Distance Matrix](https://mapzen.com/documentation/mobility/matrix/api-reference/) rather than the results from a tool that uses that matrix behind the scenes anyway. However, my approach provides a relatively simple way to get an answer without having to develop my own traveling salesman optimization algorithm.

Anyway, let’s get started!



```python
import requests
import pandas as pd
import itertools
import shapely
from shapely.geometry import Point
import geopandas as gpd
import json
import numpy as np
import folium
from numpy.random import RandomState, uniform
import time
import sys
import os

%matplotlib inline
search_key=os.getenv('MAPZEN_SEARCH_KEY')
matrix_key=os.getenv('MAPZEN_MATRIX_KEY')
```

## Geocoding Locations with Mapzen's Search Tool
I first write a function that wraps Mapzen's Search tool in order to geocode (obtain the lat / long coordinates for) an address, landmark, or business. The function returns a dictionary containing the raw result output from Mapzen (including information such as data source, geocoding confidence, neighborhood data, etc), as well as the crucial piece of information for me: a formatted set of coordinates. By default, I return only 1 result (the best match), but if I were to use this tool in a different context, I would perhaps be interested in returning a set of results. Below I use this function to geocode two famous San Francisco landmarks - the Transamerica Pyramid and Sutro Tower.


```python
def geocode_address_venue(text, key = search_key,params = None): #allow for additional Mapzen search parameters
    search_parameters = {'api_key': key,'text': text,'size': 1,'layers': 'address,venue'}
    if params:
        search_parameters.update(params)
    url = 'http://search.mapzen.com/v1/search'
    r = requests.get(url, params = search_parameters)
    data = r.json()
    return {'raw': data,'coords': tuple(data['features'][0]['geometry']['coordinates'])}
```


```python
transamerica = geocode_address_venue('Transamerica Pyramid, San Francisco, CA')['coords']
sutro = geocode_address_venue('Sutro Tower, San Francisco, CA')['coords']
print transamerica
print sutro
```

    (-122.40303, 37.79465)
    (-122.45285, 37.755246)
    

## Displaying Points on Leaflet Maps
Now let's put these points on a map. I wrote a plotting function that uses folium to plot a set of points and polylines with labels on leaflet.js maps. By default, I use the Stamen Watercolor tiles because I think they look really cool, but if something like OpenStreetMap is more useful, that can also be specified. The full set of available tile layers can be found [here](https://github.com/python-visualization/folium). The function also takes an optional set of colors and point labels, a zoom-level, and a center location. My function calculates default values if not specified.

The function is written in a way that it accepts either a list of point coordinates, or a list of lists of point coordinates. If the latter is specified, each sublist is treated as a group of coordinates and will be symbolized in the same color. The function was ultimately written this way to distinguish the routes of each salesman in the optimization problem coming later. Additionally, I allow for the specification of polyline coordinates, which can be used to plot the optimized route between the points.

Below I map my two previously geocoded San Francisco landmarks along with the "as the crow flies" polyline that connects them. Note that on the 'live' map if you click on the points you will see that they are labeled appropriately.


```python
def plot_stops(point_coords, zoom_level = 15,tiles = 'Stamen Watercolor', point_colors = None, 
               labels = None, center_location = None, line_coords = None, line_colors = None):
   
    #if not a list of lists, make it one, which then allows the function to handle either
    point_coords = [[x] for x in point_coords] if all([type(x) is not list for x in point_coords]) else point_coords
    if labels:
        labels = [[x] for x in labels] if all([type(x) is not list for x in labels]) else labels
    if line_coords:
        line_coords = [line_coords] if all([type(t) is tuple for t in line_coords]) else line_coords
    
    if line_colors:
        line_colors = [line_colors] if type(line_colors) is not list else line_colors

    #get all points as the flattened list to calculate the center
    all_points = [item for sublist in point_coords for item in sublist]
    #calculate start location as the mean x and mean y of all input points
    if center_location:
        center_location = [center_location[1],center_location[0]]
    else:
        center_location = np.array(all_points).mean(0).tolist()[::-1]
    
    #create a leaflet map, specifying center location, zoom level, and tiles
    map_1 = folium.Map(location = center_location,zoom_start = zoom_level,tiles = tiles)
    
    #specify a set of default colors
    color_options = ['black', 'blue', 'red', 'green', 'purple', 'orange', 'pink', 'white']
    
    #if no point colors specified use the default
    point_colors = point_colors if point_colors else color_options[:len(point_coords)]
    
    #if plotting lines as well, get line colors, otherwise use default
    if line_coords:
        line_colors = line_colors if line_colors else color_options[1:][:len(line_coords)]

    #loop through each point or grouping of points
    for c, point_coords in enumerate(point_coords):
        point_color = point_colors[c] #get color from color list

        if labels: sublabel_list = labels[c] #get labels from label list
        for i, stop_coord in enumerate(point_coords): 
            label = sublabel_list[i] if labels else None
            #Add point to map at specified coordinate 
            folium.Marker([stop_coord[1], stop_coord[0]], popup = label, #need to reverse long/lat to lat/long
                           icon = folium.Icon(color = point_color,icon='mapmarker')).add_to(map_1)
    
    #if plotting lines, loop through each set of lines and plot
    if line_coords:
        for i, pline in enumerate(line_coords):
            line_color = line_colors[i]
            folium.PolyLine([(y,x) for (x,y) in pline], color = line_color).add_to(map_1) #need to reverse long/lat to lat/long
    return map_1
```


```python
sf_landmarks = plot_stops([transamerica, sutro], labels = ['Transamerica Pyramid','Sutro Tower'], 
            zoom_level = 13, tiles = 'Stamen Toner', point_colors = ['red','blue'],
            line_coords = [transamerica, sutro], line_colors = 'purple')
sf_landmarks
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2JiZjliNDc0NGYxMzQxNmViZDYwNjc0NjczNDJiNmU0IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9iYmY5YjQ3NDRmMTM0MTZlYmQ2MDY3NDY3MzQyYjZlNCIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9iYmY5YjQ3NDRmMTM0MTZlYmQ2MDY3NDY3MzQyYjZlNCA9IEwubWFwKCdtYXBfYmJmOWI0NzQ0ZjEzNDE2ZWJkNjA2NzQ2NzM0MmI2ZTQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3NDk0OCwtMTIyLjQyNzk0XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IDEzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4Qm91bmRzOiBib3VuZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcnM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyX2YwZTdkY2M1ZmY1NzQ3YTc5ODU2MDQ5MzM0ZjA3ZDNiID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9zdGFtZW4tdGlsZXMte3N9LmEuc3NsLmZhc3RseS5uZXQvdG9uZXIve3p9L3t4fS97eX0ucG5nJywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBtYXhab29tOiAxOCwKICAgICAgICAgICAgICAgICAgICBtaW5ab29tOiAxLAogICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiAnTWFwIHRpbGVzIGJ5IDxhIGhyZWY9Imh0dHA6Ly9zdGFtZW4uY29tIj5TdGFtZW4gRGVzaWduPC9hPiwgdW5kZXIgPGEgaHJlZj0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvMy4wIj5DQyBCWSAzLjA8L2E+LiBEYXRhIGJ5IDxhIGhyZWY9Imh0dHA6Ly9vcGVuc3RyZWV0bWFwLm9yZyI+T3BlblN0cmVldE1hcDwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0Ij5PRGJMPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9iYmY5YjQ3NDRmMTM0MTZlYmQ2MDY3NDY3MzQyYjZlNCk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNDczZjMwZDAwMjhjNDdjMjhmYzZlNDNmZmU1MGU4MTQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43OTQ2NSwtMTIyLjQwMzAzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJmOWI0NzQ0ZjEzNDE2ZWJkNjA2NzQ2NzM0MmI2ZTQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNzY1ZTdkN2UwNjg0NGU2NGEyMzMzMTcwYTVkZjU2OTcgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl80NzNmMzBkMDAyOGM0N2MyOGZjNmU0M2ZmZTUwZTgxNC5zZXRJY29uKGljb25fNzY1ZTdkN2UwNjg0NGU2NGEyMzMzMTcwYTVkZjU2OTcpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMmQxMGRiNzBmNjg0OGNiOTAxODU3Njg4MDE0ZDJiZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ZTM5NmFkMjRhODA0MWZmYTIxYjAyNTBkYzhkYTIzZSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOWUzOTZhZDI0YTgwNDFmZmEyMWIwMjUwZGM4ZGEyM2UiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFRyYW5zYW1lcmljYSBQeXJhbWlkPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QyZDEwZGI3MGY2ODQ4Y2I5MDE4NTc2ODgwMTRkMmJmLnNldENvbnRlbnQoaHRtbF85ZTM5NmFkMjRhODA0MWZmYTIxYjAyNTBkYzhkYTIzZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzQ3M2YzMGQwMDI4YzQ3YzI4ZmM2ZTQzZmZlNTBlODE0LmJpbmRQb3B1cChwb3B1cF9kMmQxMGRiNzBmNjg0OGNiOTAxODU3Njg4MDE0ZDJiZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2Q4MjM1OTE0MzM5ZDQ3NWU5MDQ2NjMyYzZhZGFlOWQ4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzU1MjQ2LC0xMjIuNDUyODVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmY5YjQ3NDRmMTM0MTZlYmQ2MDY3NDY3MzQyYjZlNCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl85MGRlMDJmYjY3ZmQ0NjE1OGZmYjk0YmIyYTMxNWVmYiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9kODIzNTkxNDMzOWQ0NzVlOTA0NjYzMmM2YWRhZTlkOC5zZXRJY29uKGljb25fOTBkZTAyZmI2N2ZkNDYxNThmZmI5NGJiMmEzMTVlZmIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82NGE1ZjQzMzA4ZWI0MDNkOGQ4NTM2YTI5Zjk1ZWFlNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lODAyMmE5ZGViODM0NDlhYmY3NGQ4YjQ4Y2JhM2Y4ZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZTgwMjJhOWRlYjgzNDQ5YWJmNzRkOGI0OGNiYTNmOGYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFN1dHJvIFRvd2VyPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY0YTVmNDMzMDhlYjQwM2Q4ZDg1MzZhMjlmOTVlYWU0LnNldENvbnRlbnQoaHRtbF9lODAyMmE5ZGViODM0NDlhYmY3NGQ4YjQ4Y2JhM2Y4Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2Q4MjM1OTE0MzM5ZDQ3NWU5MDQ2NjMyYzZhZGFlOWQ4LmJpbmRQb3B1cChwb3B1cF82NGE1ZjQzMzA4ZWI0MDNkOGQ4NTM2YTI5Zjk1ZWFlNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzJkZGM0YzgxN2VlZjQzODg5MzE5NzljMTgzZTAxNGQzID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc5NDY1LCAtMTIyLjQwMzAzXSwgWzM3Ljc1NTI0NiwgLTEyMi40NTI4NV1dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdwdXJwbGUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwX2JiZjliNDc0NGYxMzQxNmViZDYwNjc0NjczNDJiNmU0LmFkZExheWVyKHBvbHlfbGluZV8yZGRjNGM4MTdlZWY0Mzg4OTMxOTc5YzE4M2UwMTRkMyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvc2NyaXB0PgogICAgICAgIA==" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>



I also demonstrate how a list of lists of points can be passed to my plotting function, resulting in each set of points being symbolized in a different color. I write a function that generates random points within a polygon, and use that to generate 6 lists of 5 points located in San Francisco (boundaries read in from a geosjon). I plot them below. The points are labeled by their group number (1-6) and their point number within their group (1-5).


```python
def gen_random_points(poly, n, random_seed = None):
    xmin, ymin, xmax, ymax = poly.bounds
    Points = []
    i = 0
    while len(Points) <= n:
        if random_seed:
            x, y = RandomState(random_seed + i).uniform(xmin, xmax), RandomState(random_seed + i + 1).uniform(ymin, ymax)
        else:
            x, y = uniform(xmin, xmax),uniform(ymin, ymax)
        if Point(x, y).within(poly):
            Points.append((x, y))
        i += 1
    return Points
```


```python
SF = gpd.read_file('SF.geojson').iloc[0]['geometry']
rand_points = [gen_random_points(SF, n = 5) for t in range(6)]
labels = [[str((t, i)) for i, x in enumerate(l, 1)] for t, l in enumerate(rand_points, 1)]

sf_rand_points = plot_stops(rand_points, zoom_level = 12, tiles = 'OpenStreetMap', labels = labels)
sf_rand_points
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSA9IEwubWFwKCdtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc1NjI1Njg2OTEsLTEyMi40NTI3NzE0OTZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfYzQ3OGQ4OTgyOTNkNDM1NmE4ZjRlMDUyOTExNzkzMzIgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ0RhdGEgYnkgPGEgaHJlZj0iaHR0cDovL29wZW5zdHJlZXRtYXAub3JnIj5PcGVuU3RyZWV0TWFwPC9hPiwgdW5kZXIgPGEgaHJlZj0iaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9EYkw8L2E+LicsCiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0UmV0aW5hOiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8xN2FiZDc1YTYwZmY0NTIyYjhhZjMyZDhiNDA4MmMyOSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjcxMDA5MzM5MjksLTEyMi40NjM1MDc4M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzVlYWM4NTA5YjYyYTRjYjE4MDFhNGRhNDVhYWFmZDIyID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibGFjaycsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xN2FiZDc1YTYwZmY0NTIyYjhhZjMyZDhiNDA4MmMyOS5zZXRJY29uKGljb25fNWVhYzg1MDliNjJhNGNiMTgwMWE0ZGE0NWFhYWZkMjIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jOTdmMzcwOGNjM2Q0YmNmOTI5MzZkMTVhODMyZWU2OSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85NWNjZmNlMDJkMzg0MmM3OTQ1NjFmMWE4MGQzNGM2NiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOTVjY2ZjZTAyZDM4NDJjNzk0NTYxZjFhODBkMzRjNjYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICgxLCAxKTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jOTdmMzcwOGNjM2Q0YmNmOTI5MzZkMTVhODMyZWU2OS5zZXRDb250ZW50KGh0bWxfOTVjY2ZjZTAyZDM4NDJjNzk0NTYxZjFhODBkMzRjNjYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8xN2FiZDc1YTYwZmY0NTIyYjhhZjMyZDhiNDA4MmMyOS5iaW5kUG9wdXAocG9wdXBfYzk3ZjM3MDhjYzNkNGJjZjkyOTM2ZDE1YTgzMmVlNjkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hNmUzMmVkNjM1NDE0MmRjYmJiZDkzMjM4YjRjMWRiOCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc2NjQ3MzM2OTYsLTEyMi40OTM0ODM3MzFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9lMTM0ZDllOGY0ZGI0NTgwYjcxN2NkMjhkODUwZmJiYyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmxhY2snLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYTZlMzJlZDYzNTQxNDJkY2JiYmQ5MzIzOGI0YzFkYjguc2V0SWNvbihpY29uX2UxMzRkOWU4ZjRkYjQ1ODBiNzE3Y2QyOGQ4NTBmYmJjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODAyNjk4YTkxN2ZhNDRiOWFiMWUwNWNiZWQzNjZjMzQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDM0ZTk4MzdjYjU5NDFhNGI1OTU1NTE4NWE0ZjVkMDUgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzQzNGU5ODM3Y2I1OTQxYTRiNTk1NTUxODVhNGY1ZDA1IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoMSwgMik8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODAyNjk4YTkxN2ZhNDRiOWFiMWUwNWNiZWQzNjZjMzQuc2V0Q29udGVudChodG1sXzQzNGU5ODM3Y2I1OTQxYTRiNTk1NTUxODVhNGY1ZDA1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYTZlMzJlZDYzNTQxNDJkY2JiYmQ5MzIzOGI0YzFkYjguYmluZFBvcHVwKHBvcHVwXzgwMjY5OGE5MTdmYTQ0YjlhYjFlMDVjYmVkMzY2YzM0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMGY3ODNlNGQzNDUyNGNiOWExNzdkYzM3ZjYyZGNhYzkgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43MjgwNzk0NjQxLC0xMjIuNDU2MDQyNTE3XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZmU2Yjc4ODAwZGViNDQ2MWE1OTI1ZjZkMGE1MWNiMjEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzBmNzgzZTRkMzQ1MjRjYjlhMTc3ZGMzN2Y2MmRjYWM5LnNldEljb24oaWNvbl9mZTZiNzg4MDBkZWI0NDYxYTU5MjVmNmQwYTUxY2IyMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzYwYzRiMTk4MjYxZTQxZWFiYmEyYTBmMDAzM2VkMzhiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA5YzUwNTRhMjVmYzQ5YmRiMWU1YzczZTg1NGQ0N2QxID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wOWM1MDU0YTI1ZmM0OWJkYjFlNWM3M2U4NTRkNDdkMSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDEsIDMpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzYwYzRiMTk4MjYxZTQxZWFiYmEyYTBmMDAzM2VkMzhiLnNldENvbnRlbnQoaHRtbF8wOWM1MDU0YTI1ZmM0OWJkYjFlNWM3M2U4NTRkNDdkMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzBmNzgzZTRkMzQ1MjRjYjlhMTc3ZGMzN2Y2MmRjYWM5LmJpbmRQb3B1cChwb3B1cF82MGM0YjE5ODI2MWU0MWVhYmJhMmEwZjAwMzNlZDM4Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2YwYWE4ZDgxMzk0ZDRkYmM5NzBhN2ExOGRmOTM5NDBkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzY1NzIwMTI3NywtMTIyLjQ3NTM3Nzc3MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzA5OGYwMjMwMDk3YjQxYzU4MjU5ZmI5MGZjM2NjZGE1ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibGFjaycsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9mMGFhOGQ4MTM5NGQ0ZGJjOTcwYTdhMThkZjkzOTQwZC5zZXRJY29uKGljb25fMDk4ZjAyMzAwOTdiNDFjNTgyNTlmYjkwZmMzY2NkYTUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kOTI4MWI0NjRmZmY0Mzc3OWFiZjg0ZDI4ZTAwZmM5ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iMDRiZjYyZDhjOWU0MjI5OTk5MDM1N2ExMzhhZDEwMSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYjA0YmY2MmQ4YzllNDIyOTk5OTAzNTdhMTM4YWQxMDEiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICgxLCA0KTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kOTI4MWI0NjRmZmY0Mzc3OWFiZjg0ZDI4ZTAwZmM5ZS5zZXRDb250ZW50KGh0bWxfYjA0YmY2MmQ4YzllNDIyOTk5OTAzNTdhMTM4YWQxMDEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mMGFhOGQ4MTM5NGQ0ZGJjOTcwYTdhMThkZjkzOTQwZC5iaW5kUG9wdXAocG9wdXBfZDkyODFiNDY0ZmZmNDM3NzlhYmY4NGQyOGUwMGZjOWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl83NTk4YWNiOTY3OWE0M2FmYWQ5ZDhkYmFjMDRkOGVmNCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NDcwMzExNTYsLTEyMi40OTg0NzkxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9hMzU3MmJiMDJhNmE0ZDUzYTUyOTVkYjhlNjkzZmM3NyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmxhY2snLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNzU5OGFjYjk2NzlhNDNhZmFkOWQ4ZGJhYzA0ZDhlZjQuc2V0SWNvbihpY29uX2EzNTcyYmIwMmE2YTRkNTNhNTI5NWRiOGU2OTNmYzc3KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmE5ZTdhNGU0MmFjNGM5YWI5M2FhZWRlZWE0ZDIxNGQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZmRiM2JhYjU5MmFhNDQyMWFjNjA0MWEwZWI1OTFiZjkgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2ZkYjNiYWI1OTJhYTQ0MjFhYzYwNDFhMGViNTkxYmY5IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoMSwgNSk8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmE5ZTdhNGU0MmFjNGM5YWI5M2FhZWRlZWE0ZDIxNGQuc2V0Q29udGVudChodG1sX2ZkYjNiYWI1OTJhYTQ0MjFhYzYwNDFhMGViNTkxYmY5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNzU5OGFjYjk2NzlhNDNhZmFkOWQ4ZGJhYzA0ZDhlZjQuYmluZFBvcHVwKHBvcHVwXzJhOWU3YTRlNDJhYzRjOWFiOTNhYWVkZWVhNGQyMTRkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNDI0MTkxZjc3NzlhNDNjN2IxNTgxZDZlMTk5YzBlZWQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43Mjk4OTMzODU5LC0xMjIuNDgwMzUwNjU5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fY2RkYWNlZjI3NjQ4NDRjNGFkM2I0ZjZhNTNiYmQ1ODUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzQyNDE5MWY3Nzc5YTQzYzdiMTU4MWQ2ZTE5OWMwZWVkLnNldEljb24oaWNvbl9jZGRhY2VmMjc2NDg0NGM0YWQzYjRmNmE1M2JiZDU4NSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2QyOWU0MDVhOTM3MzQ1YTE4MzkxNzZhMjc1ODMyYzkwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2VkNGEzNWNjZGVlNzRkNDA5NDkwOTVlNmZmY2ZjZjgwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9lZDRhMzVjY2RlZTc0ZDQwOTQ5MDk1ZTZmZmNmY2Y4MCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDEsIDYpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QyOWU0MDVhOTM3MzQ1YTE4MzkxNzZhMjc1ODMyYzkwLnNldENvbnRlbnQoaHRtbF9lZDRhMzVjY2RlZTc0ZDQwOTQ5MDk1ZTZmZmNmY2Y4MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzQyNDE5MWY3Nzc5YTQzYzdiMTU4MWQ2ZTE5OWMwZWVkLmJpbmRQb3B1cChwb3B1cF9kMjllNDA1YTkzNzM0NWExODM5MTc2YTI3NTgzMmM5MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzM1ZWU1NGI5MzViZTQwN2RiNzA4MjY3YTUzNDAyOThkID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzM5NjI4NDc0MywtMTIyLjQ1MjgyMDQ4NF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJmNjNlOGE0OWU5MjQxYjdiYzQwYWU1NmEyMTI3YmEyID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzM1ZWU1NGI5MzViZTQwN2RiNzA4MjY3YTUzNDAyOThkLnNldEljb24oaWNvbl8yZjYzZThhNDllOTI0MWI3YmM0MGFlNTZhMjEyN2JhMik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdlMzJjMWI4YTM2ZDRmMTQ4OGY5ODE2MTZmZjY0ZmVjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc5ODY5YjFiNDZlNzQ3ZDJiNThhNWQ2OTRmZmZiY2MzID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF83OTg2OWIxYjQ2ZTc0N2QyYjU4YTVkNjk0ZmZmYmNjMyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDIsIDEpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdlMzJjMWI4YTM2ZDRmMTQ4OGY5ODE2MTZmZjY0ZmVjLnNldENvbnRlbnQoaHRtbF83OTg2OWIxYjQ2ZTc0N2QyYjU4YTVkNjk0ZmZmYmNjMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzM1ZWU1NGI5MzViZTQwN2RiNzA4MjY3YTUzNDAyOThkLmJpbmRQb3B1cChwb3B1cF83ZTMyYzFiOGEzNmQ0ZjE0ODhmOTgxNjE2ZmY2NGZlYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2IzMWJlMWZlZGRhMjRkOGRiZTQ3N2QyMjk4MjdjYzI4ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzA5NDQwOTE4OCwtMTIyLjQ0NzUzMTA1OV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2RiMDU2MWY3Zjk2YjQ1Njc4YjQ4NTIzYWM0YWFjZmY3ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2IzMWJlMWZlZGRhMjRkOGRiZTQ3N2QyMjk4MjdjYzI4LnNldEljb24oaWNvbl9kYjA1NjFmN2Y5NmI0NTY3OGI0ODUyM2FjNGFhY2ZmNyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBiNWNmYTYzMGI3MzQ2YjZiYmY0OGQwMjY5ODFkNDIzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NkY2E2YjNkMWYyZDQ2NDc4ZTE3NjVmZDI1YWVlZTlmID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9jZGNhNmIzZDFmMmQ0NjQ3OGUxNzY1ZmQyNWFlZWU5ZiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDIsIDIpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBiNWNmYTYzMGI3MzQ2YjZiYmY0OGQwMjY5ODFkNDIzLnNldENvbnRlbnQoaHRtbF9jZGNhNmIzZDFmMmQ0NjQ3OGUxNzY1ZmQyNWFlZWU5Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2IzMWJlMWZlZGRhMjRkOGRiZTQ3N2QyMjk4MjdjYzI4LmJpbmRQb3B1cChwb3B1cF8wYjVjZmE2MzBiNzM0NmI2YmJmNDhkMDI2OTgxZDQyMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzE5ZDgyMzVhOGYxYzQyZmI4ZmRjOWRmYTQ5YzYzMGQzID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODAwOTgwMTY5OSwtMTIyLjQzMzI1NTIzOV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJmYWQ0MzM5Nzg1NTQ0YTU5YzFjM2ZhYWNmOTFkNDRkID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzE5ZDgyMzVhOGYxYzQyZmI4ZmRjOWRmYTQ5YzYzMGQzLnNldEljb24oaWNvbl8yZmFkNDMzOTc4NTU0NGE1OWMxYzNmYWFjZjkxZDQ0ZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBhMTcwMjAyNDFjMjRjNmM4NDI1ZjA0MDg1MWIxN2JjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzljZDlhMTYzMzFkNTRmOGFhZTE0Y2VlNWJmNTk1NzRmID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF85Y2Q5YTE2MzMxZDU0ZjhhYWUxNGNlZTViZjU5NTc0ZiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDIsIDMpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBhMTcwMjAyNDFjMjRjNmM4NDI1ZjA0MDg1MWIxN2JjLnNldENvbnRlbnQoaHRtbF85Y2Q5YTE2MzMxZDU0ZjhhYWUxNGNlZTViZjU5NTc0Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzE5ZDgyMzVhOGYxYzQyZmI4ZmRjOWRmYTQ5YzYzMGQzLmJpbmRQb3B1cChwb3B1cF8wYTE3MDIwMjQxYzI0YzZjODQyNWYwNDA4NTFiMTdiYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2Y0NGVlNDFjNWFlMTQwZThiMzc1NGFhODk3MzUxYjEyID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg1MzI2NTkwOCwtMTIyLjM5OTQ2MDU1NF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzdjNWQ3MTRkOWU0OTQwYzM4MTNmMjBlOTRiMjIzMjFhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Y0NGVlNDFjNWFlMTQwZThiMzc1NGFhODk3MzUxYjEyLnNldEljb24oaWNvbl83YzVkNzE0ZDllNDk0MGMzODEzZjIwZTk0YjIyMzIxYSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FmOTRlZjgzZDA1ODQ2ZWNiNzM3MTczZDhkOTM0MDEzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I1ZGRkNzNmZGViZDQ2OTFhMzc3ZDg2NjhlYjc3NDk2ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9iNWRkZDczZmRlYmQ0NjkxYTM3N2Q4NjY4ZWI3NzQ5NiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDIsIDQpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2FmOTRlZjgzZDA1ODQ2ZWNiNzM3MTczZDhkOTM0MDEzLnNldENvbnRlbnQoaHRtbF9iNWRkZDczZmRlYmQ0NjkxYTM3N2Q4NjY4ZWI3NzQ5Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2Y0NGVlNDFjNWFlMTQwZThiMzc1NGFhODk3MzUxYjEyLmJpbmRQb3B1cChwb3B1cF9hZjk0ZWY4M2QwNTg0NmVjYjczNzE3M2Q4ZDkzNDAxMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2VjM2I3ODk3NGNiYzRkMzg5YWNiOTFkZWJkMmVmYWViID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzk5NTg3MzMwMiwtMTIyLjQ3NjI1OTk4Nl0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzBmMjljOWQ1YmY1MTQyNGZiMTg4YTI0ZDdjYTkzZTIwID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2VjM2I3ODk3NGNiYzRkMzg5YWNiOTFkZWJkMmVmYWViLnNldEljb24oaWNvbl8wZjI5YzlkNWJmNTE0MjRmYjE4OGEyNGQ3Y2E5M2UyMCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2QzNDhjMjk2YThjMjRlZTQ4YjQ0ZjlhMDMxNDA2MTQ3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzg1OGI3NTZlNmNlYjQ1MzM5YzYxOTJiYjlmYjEwZmY3ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF84NThiNzU2ZTZjZWI0NTMzOWM2MTkyYmI5ZmIxMGZmNyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDIsIDUpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QzNDhjMjk2YThjMjRlZTQ4YjQ0ZjlhMDMxNDA2MTQ3LnNldENvbnRlbnQoaHRtbF84NThiNzU2ZTZjZWI0NTMzOWM2MTkyYmI5ZmIxMGZmNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2VjM2I3ODk3NGNiYzRkMzg5YWNiOTFkZWJkMmVmYWViLmJpbmRQb3B1cChwb3B1cF9kMzQ4YzI5NmE4YzI0ZWU0OGI0NGY5YTAzMTQwNjE0Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzU0MjU2OTRjMWVlNjQ3MzY4MmI2ZTQxYzc1NDgyZjk5ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzY3NTIzMzk0NCwtMTIyLjQ5Nzc0MzI1OV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzJkY2QzZDJhODhkMDQyMmU5YTc3ODJhYTJmMDQ0ZTM2ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzU0MjU2OTRjMWVlNjQ3MzY4MmI2ZTQxYzc1NDgyZjk5LnNldEljb24oaWNvbl8yZGNkM2QyYTg4ZDA0MjJlOWE3NzgyYWEyZjA0NGUzNik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY4ODkyYzIzOTkyZDQ3YzI5MjJmYTgwYTU2YzQ1MWFjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdmOGFiMzE4Y2UyODQ5YWQ4YjM1MzBlYTBlYzY5YTg0ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF83ZjhhYjMxOGNlMjg0OWFkOGIzNTMwZWEwZWM2OWE4NCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDIsIDYpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY4ODkyYzIzOTkyZDQ3YzI5MjJmYTgwYTU2YzQ1MWFjLnNldENvbnRlbnQoaHRtbF83ZjhhYjMxOGNlMjg0OWFkOGIzNTMwZWEwZWM2OWE4NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzU0MjU2OTRjMWVlNjQ3MzY4MmI2ZTQxYzc1NDgyZjk5LmJpbmRQb3B1cChwb3B1cF82ODg5MmMyMzk5MmQ0N2MyOTIyZmE4MGE1NmM0NTFhYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2FmOTNlYjNkM2I5ZDQ0ODQ4MjUzMjA5ZTQ1NGQ1ZDIxID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzI1NTMwNTQzMiwtMTIyLjUwMDYwMzEzM10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzc1YjI0NWY1YTU4YTRhY2FiMjRhYjYxYzI3NWEzYTVhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYWY5M2ViM2QzYjlkNDQ4NDgyNTMyMDllNDU0ZDVkMjEuc2V0SWNvbihpY29uXzc1YjI0NWY1YTU4YTRhY2FiMjRhYjYxYzI3NWEzYTVhKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjkxNWM3YTU1MjYwNDFhYWE5N2VkNjhhYmFlNWFkMDEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzlmN2IzOTA5NDAyNGM1YmEyYzJhOTZkYjZhODBkOGQgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzM5ZjdiMzkwOTQwMjRjNWJhMmMyYTk2ZGI2YTgwZDhkIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoMywgMSk8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjkxNWM3YTU1MjYwNDFhYWE5N2VkNjhhYmFlNWFkMDEuc2V0Q29udGVudChodG1sXzM5ZjdiMzkwOTQwMjRjNWJhMmMyYTk2ZGI2YTgwZDhkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYWY5M2ViM2QzYjlkNDQ4NDgyNTMyMDllNDU0ZDVkMjEuYmluZFBvcHVwKHBvcHVwX2I5MTVjN2E1NTI2MDQxYWFhOTdlZDY4YWJhZTVhZDAxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNGU2ZjcwOWNkNTFiNGIzY2E5ZTZjMzljM2ZjNTQ3NDggPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NjQzMjYzNzc4LC0xMjIuMzkzMjIzMzQ5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZWY5MzIyMzBiMDAxNDdlZDljZjVmODhhNDE4MjI0OGIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl80ZTZmNzA5Y2Q1MWI0YjNjYTllNmMzOWMzZmM1NDc0OC5zZXRJY29uKGljb25fZWY5MzIyMzBiMDAxNDdlZDljZjVmODhhNDE4MjI0OGIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zMTc0YWQ4MzVhZmY0NTM0OTk3NDUxODkyZGI5MzZiNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lYTU3MjA2YzI2YjA0OWI3YTJhN2E0NGEwZGI1Y2UzZCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZWE1NzIwNmMyNmIwNDliN2EyYTdhNDRhMGRiNWNlM2QiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICgzLCAyKTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zMTc0YWQ4MzVhZmY0NTM0OTk3NDUxODkyZGI5MzZiNC5zZXRDb250ZW50KGh0bWxfZWE1NzIwNmMyNmIwNDliN2EyYTdhNDRhMGRiNWNlM2QpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl80ZTZmNzA5Y2Q1MWI0YjNjYTllNmMzOWMzZmM1NDc0OC5iaW5kUG9wdXAocG9wdXBfMzE3NGFkODM1YWZmNDUzNDk5NzQ1MTg5MmRiOTM2YjQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9mNzY2YTQ4MTM2ZWU0YTc2ODRiODFjMjc2ODMyMjNhMCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc1ODMxOTQxOTgsLTEyMi40MjE3NDMyMTJdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9hM2MzMzYxZDE5ZjE0NTViOWI3MzEyNmVhZmZkMmQ4MyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Y3NjZhNDgxMzZlZTRhNzY4NGI4MWMyNzY4MzIyM2EwLnNldEljb24oaWNvbl9hM2MzMzYxZDE5ZjE0NTViOWI3MzEyNmVhZmZkMmQ4Myk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2UzOTY3NmI4YTQxMDQ1NWQ4ZmE2MGRiMTVkNmQ1ZGRlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEyZWY1YTg0MGY1OTQzMGZiMDVmZTExODJjZjZhMDMwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xMmVmNWE4NDBmNTk0MzBmYjA1ZmUxMTgyY2Y2YTAzMCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDMsIDMpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2UzOTY3NmI4YTQxMDQ1NWQ4ZmE2MGRiMTVkNmQ1ZGRlLnNldENvbnRlbnQoaHRtbF8xMmVmNWE4NDBmNTk0MzBmYjA1ZmUxMTgyY2Y2YTAzMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2Y3NjZhNDgxMzZlZTRhNzY4NGI4MWMyNzY4MzIyM2EwLmJpbmRQb3B1cChwb3B1cF9lMzk2NzZiOGE0MTA0NTVkOGZhNjBkYjE1ZDZkNWRkZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2RhN2FlZTEzZWQyNDQ0ODA4OGMxODM3ODEyMjcwNWIzID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODA2NzAwMTY5MSwtMTIyLjQzMDAwNTcxOV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzFiMDYwZTQ5ZjI4YTQ2N2E4MGE3ZDY5ZDhjZGFmNTE5ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZGE3YWVlMTNlZDI0NDQ4MDg4YzE4Mzc4MTIyNzA1YjMuc2V0SWNvbihpY29uXzFiMDYwZTQ5ZjI4YTQ2N2E4MGE3ZDY5ZDhjZGFmNTE5KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDliZjNlN2YwNDVjNGI1NDk3NzY4NDM1Njc5Yzc0NWQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGQ2MmYzY2U1NDMxNGUyZjhhZjliMTAzMDI3ZDE5ZWYgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2RkNjJmM2NlNTQzMTRlMmY4YWY5YjEwMzAyN2QxOWVmIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoMywgNCk8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDliZjNlN2YwNDVjNGI1NDk3NzY4NDM1Njc5Yzc0NWQuc2V0Q29udGVudChodG1sX2RkNjJmM2NlNTQzMTRlMmY4YWY5YjEwMzAyN2QxOWVmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZGE3YWVlMTNlZDI0NDQ4MDg4YzE4Mzc4MTIyNzA1YjMuYmluZFBvcHVwKHBvcHVwXzQ5YmYzZTdmMDQ1YzRiNTQ5Nzc2ODQzNTY3OWM3NDVkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNWIyOTc4YmI4Y2FjNGFhYzk0YWU4YmZkN2E4MjllZjQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43Njg4MDE4NjQ0LC0xMjIuNTExMTQxNDMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNTU3OWM4YzVlNjNlNDg1ZmIxMmU1YzBkYTdkNGZlYmUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl81YjI5NzhiYjhjYWM0YWFjOTRhZThiZmQ3YTgyOWVmNC5zZXRJY29uKGljb25fNTU3OWM4YzVlNjNlNDg1ZmIxMmU1YzBkYTdkNGZlYmUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83YmJhNjkxY2EwZDk0ZTI2OTQ1ZTNlYTJiMjMwMzRmNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jZjZmZGRkMWUwY2I0YmM1ODE5MjYxMjc4MjY2YjA3ZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfY2Y2ZmRkZDFlMGNiNGJjNTgxOTI2MTI3ODI2NmIwN2YiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICgzLCA1KTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83YmJhNjkxY2EwZDk0ZTI2OTQ1ZTNlYTJiMjMwMzRmNi5zZXRDb250ZW50KGh0bWxfY2Y2ZmRkZDFlMGNiNGJjNTgxOTI2MTI3ODI2NmIwN2YpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl81YjI5NzhiYjhjYWM0YWFjOTRhZThiZmQ3YTgyOWVmNC5iaW5kUG9wdXAocG9wdXBfN2JiYTY5MWNhMGQ5NGUyNjk0NWUzZWEyYjIzMDM0ZjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8zMjFkZmRlZWU0MWY0MTViYmNlODJmODk1YmY5NDE3ZiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjczNzUzMzQ3NTQsLTEyMi41MDQ1NDE1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzg3NzQwNDZmMDc4ZDRhNDA4YmVmNjA2MGZmZmQ3OGUxID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMzIxZGZkZWVlNDFmNDE1YmJjZTgyZjg5NWJmOTQxN2Yuc2V0SWNvbihpY29uXzg3NzQwNDZmMDc4ZDRhNDA4YmVmNjA2MGZmZmQ3OGUxKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTFmNjdmNWM1MDgxNGRmNGJkNDFjN2ZmZDVmMGJkM2QgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWMyZmFmNjMyZDM4NGU4NzgzZmYyOGU4MTk0Y2FhMzQgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2VjMmZhZjYzMmQzODRlODc4M2ZmMjhlODE5NGNhYTM0IiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoMywgNik8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTFmNjdmNWM1MDgxNGRmNGJkNDFjN2ZmZDVmMGJkM2Quc2V0Q29udGVudChodG1sX2VjMmZhZjYzMmQzODRlODc4M2ZmMjhlODE5NGNhYTM0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMzIxZGZkZWVlNDFmNDE1YmJjZTgyZjg5NWJmOTQxN2YuYmluZFBvcHVwKHBvcHVwX2ExZjY3ZjVjNTA4MTRkZjRiZDQxYzdmZmQ1ZjBiZDNkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYmE4ZGViMWFhYzBhNDQ4YjhkNmYzYzU4NDM1MTRkOWIgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NDkwNTc4NDA2LC0xMjIuNDAwOTM1MDUzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNjQ5YTZmNDA3NTk0NDViMWI0ZjkyNzVlYTU3ZWM4MDggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2dyZWVuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2JhOGRlYjFhYWMwYTQ0OGI4ZDZmM2M1ODQzNTE0ZDliLnNldEljb24oaWNvbl82NDlhNmY0MDc1OTQ0NWIxYjRmOTI3NWVhNTdlYzgwOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzMyY2JkZWMyMjBmMzRkYmU4N2Q1ZDNhNDNlMGU5N2YyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzI5Zjk5NzY0OTc5ZDQ0NTg4ZDk3NzViYjQ1YjFhOWRlID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8yOWY5OTc2NDk3OWQ0NDU4OGQ5Nzc1YmI0NWIxYTlkZSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDQsIDEpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMyY2JkZWMyMjBmMzRkYmU4N2Q1ZDNhNDNlMGU5N2YyLnNldENvbnRlbnQoaHRtbF8yOWY5OTc2NDk3OWQ0NDU4OGQ5Nzc1YmI0NWIxYTlkZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2JhOGRlYjFhYWMwYTQ0OGI4ZDZmM2M1ODQzNTE0ZDliLmJpbmRQb3B1cChwb3B1cF8zMmNiZGVjMjIwZjM0ZGJlODdkNWQzYTQzZTBlOTdmMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2Q0OTYyMmZjMDYzZjQyZWJhMmM2ZWFhZjI1ODE4NDZmID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzI3MDE2ODgzNCwtMTIyLjM2NDQ3NTAyM10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzIxNzg5OTJkMTAyODRiY2ViY2I3Zjk0OWQ2NmUzNjNlID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdncmVlbicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9kNDk2MjJmYzA2M2Y0MmViYTJjNmVhYWYyNTgxODQ2Zi5zZXRJY29uKGljb25fMjE3ODk5MmQxMDI4NGJjZWJjYjdmOTQ5ZDY2ZTM2M2UpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84Njc4ZWI4ZTM5MTc0YjVhYjdhNGY0ZGQ0ZGQzNzM2MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wNzkzNDMyMzI0MmU0NDNmYmI3YjMxYzk3NTA2NDk4YyA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMDc5MzQzMjMyNDJlNDQzZmJiN2IzMWM5NzUwNjQ5OGMiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICg0LCAyKTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84Njc4ZWI4ZTM5MTc0YjVhYjdhNGY0ZGQ0ZGQzNzM2My5zZXRDb250ZW50KGh0bWxfMDc5MzQzMjMyNDJlNDQzZmJiN2IzMWM5NzUwNjQ5OGMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9kNDk2MjJmYzA2M2Y0MmViYTJjNmVhYWYyNTgxODQ2Zi5iaW5kUG9wdXAocG9wdXBfODY3OGViOGUzOTE3NGI1YWI3YTRmNGRkNGRkMzczNjMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8yMTcwNTJlZDA3MjI0NDkxODIzOWJlN2JlODE1N2ZmZSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjcxMzgyMTk1NzIsLTEyMi40OTk1NDI1MTRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl81ODFjY2MzZTgyNjA0MjQ2OTc0MWMzOTZiZmRmMDEzYSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnZ3JlZW4nLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfMjE3MDUyZWQwNzIyNDQ5MTgyMzliZTdiZTgxNTdmZmUuc2V0SWNvbihpY29uXzU4MWNjYzNlODI2MDQyNDY5NzQxYzM5NmJmZGYwMTNhKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzNjMGYzMWIyNWYyNDlhMjlkM2M3MWQ2OTMzMDc2NGMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2Y2MTUyMzZiNGNkNGEwNThlMzU3NmE3MGY1OTEyN2IgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzNmNjE1MjM2YjRjZDRhMDU4ZTM1NzZhNzBmNTkxMjdiIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoNCwgMyk8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzNjMGYzMWIyNWYyNDlhMjlkM2M3MWQ2OTMzMDc2NGMuc2V0Q29udGVudChodG1sXzNmNjE1MjM2YjRjZDRhMDU4ZTM1NzZhNzBmNTkxMjdiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMjE3MDUyZWQwNzIyNDQ5MTgyMzliZTdiZTgxNTdmZmUuYmluZFBvcHVwKHBvcHVwX2MzYzBmMzFiMjVmMjQ5YTI5ZDNjNzFkNjkzMzA3NjRjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNmFlNjliNzkzNDMxNDM5ZmI1ZDNlMTVhYjM4ZjU1NjQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NDg1NzY3Njg4LC0xMjIuNDU2NjU1MDY4XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOTZlMzE2YzgxYTk3NGQwOTgzYzY4NGJiNjdmM2IzNzQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2dyZWVuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzZhZTY5Yjc5MzQzMTQzOWZiNWQzZTE1YWIzOGY1NTY0LnNldEljb24oaWNvbl85NmUzMTZjODFhOTc0ZDA5ODNjNjg0YmI2N2YzYjM3NCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzk4MDk1MTkwZDljMzRlMDA5N2EwMjUyODZjMDcyOTBlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U3OWNjOTlhY2M4YzRjZWZhNzJhMjc0OTdkMmM1YjRiID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9lNzljYzk5YWNjOGM0Y2VmYTcyYTI3NDk3ZDJjNWI0YiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDQsIDQpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzk4MDk1MTkwZDljMzRlMDA5N2EwMjUyODZjMDcyOTBlLnNldENvbnRlbnQoaHRtbF9lNzljYzk5YWNjOGM0Y2VmYTcyYTI3NDk3ZDJjNWI0Yik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzZhZTY5Yjc5MzQzMTQzOWZiNWQzZTE1YWIzOGY1NTY0LmJpbmRQb3B1cChwb3B1cF85ODA5NTE5MGQ5YzM0ZTAwOTdhMDI1Mjg2YzA3MjkwZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzMxNjdhYWQyOTZhMjQ0ODBiZjY2NjVjOTdlMGU3NmVjID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzM5NzQyODg4OCwtMTIyLjQ4MDI4Mjg4XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZDI2N2FiN2Y2NzQyNDdlYjhiMDBhYTRhMDYxNGY0MWIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2dyZWVuJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzMxNjdhYWQyOTZhMjQ0ODBiZjY2NjVjOTdlMGU3NmVjLnNldEljb24oaWNvbl9kMjY3YWI3ZjY3NDI0N2ViOGIwMGFhNGEwNjE0ZjQxYik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M1MDBjMjY2NzdkMDRlZmJiNWNmYzllOThjM2ExYzI2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JlNjQ0YTgwNmJiNjQzYTc4ZTU0NTZhNTY0YjZlNTE0ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9iZTY0NGE4MDZiYjY0M2E3OGU1NDU2YTU2NGI2ZTUxNCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDQsIDUpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2M1MDBjMjY2NzdkMDRlZmJiNWNmYzllOThjM2ExYzI2LnNldENvbnRlbnQoaHRtbF9iZTY0NGE4MDZiYjY0M2E3OGU1NDU2YTU2NGI2ZTUxNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzMxNjdhYWQyOTZhMjQ0ODBiZjY2NjVjOTdlMGU3NmVjLmJpbmRQb3B1cChwb3B1cF9jNTAwYzI2Njc3ZDA0ZWZiYjVjZmM5ZTk4YzNhMWMyNik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzI1NmViNGYxYjc5MTQxYTNhYzRlNjA2ODM4ZjA1YTY3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzE0MTE0MjQ3NiwtMTIyLjM5ODQzNDI1N10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzdiZDA5YzljZjllNjQxZTZiMjExOWFhMDFjYTQyOTE4ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdncmVlbicsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8yNTZlYjRmMWI3OTE0MWEzYWM0ZTYwNjgzOGYwNWE2Ny5zZXRJY29uKGljb25fN2JkMDljOWNmOWU2NDFlNmIyMTE5YWEwMWNhNDI5MTgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xODU2NDdhNDhmNTQ0MWYyOWYwNDk4ZjM0NWVhMDMzZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kNzg3NzJiZTdkMTk0NDVhYTM5YTJiZGNiYzY3OGJhNSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZDc4NzcyYmU3ZDE5NDQ1YWEzOWEyYmRjYmM2NzhiYTUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICg0LCA2KTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xODU2NDdhNDhmNTQ0MWYyOWYwNDk4ZjM0NWVhMDMzZi5zZXRDb250ZW50KGh0bWxfZDc4NzcyYmU3ZDE5NDQ1YWEzOWEyYmRjYmM2NzhiYTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8yNTZlYjRmMWI3OTE0MWEzYWM0ZTYwNjgzOGYwNWE2Ny5iaW5kUG9wdXAocG9wdXBfMTg1NjQ3YTQ4ZjU0NDFmMjlmMDQ5OGYzNDVlYTAzM2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl80NzU0Y2I0YzI0Zjk0NjA5YTg5ZTE1Y2FmMTQxODUwYSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc5OTkzNzY3MDUsLTEyMi40NDE5OTA2OTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9iYmI3NTY2MTZhNjg0MWMyYmE4NTc3Zjg3Y2VhZTE5MiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncHVycGxlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzQ3NTRjYjRjMjRmOTQ2MDlhODllMTVjYWYxNDE4NTBhLnNldEljb24oaWNvbl9iYmI3NTY2MTZhNjg0MWMyYmE4NTc3Zjg3Y2VhZTE5Mik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzlkMzAyOTU4Yjg5MDQ0ZmU4MTJkM2I3ZWMwZWYzYWZkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QyZDNmZDkwNzYzNTQ1Y2FiYzBmYTkwOGM1NGVmYjVhID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9kMmQzZmQ5MDc2MzU0NWNhYmMwZmE5MDhjNTRlZmI1YSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDUsIDEpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzlkMzAyOTU4Yjg5MDQ0ZmU4MTJkM2I3ZWMwZWYzYWZkLnNldENvbnRlbnQoaHRtbF9kMmQzZmQ5MDc2MzU0NWNhYmMwZmE5MDhjNTRlZmI1YSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzQ3NTRjYjRjMjRmOTQ2MDlhODllMTVjYWYxNDE4NTBhLmJpbmRQb3B1cChwb3B1cF85ZDMwMjk1OGI4OTA0NGZlODEyZDNiN2VjMGVmM2FmZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2IzNjFkOGEwYmZhZDQyYjg5OTY5ZWQ0NzIzYTcxZDA1ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzI0NjcxNjQ0MywtMTIyLjQyODU2MDU4XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOGYxMGVlMjhhNGM4NDAxYmIyNjM2ODc2MjIwOTdmZDAgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3B1cnBsZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9iMzYxZDhhMGJmYWQ0MmI4OTk2OWVkNDcyM2E3MWQwNS5zZXRJY29uKGljb25fOGYxMGVlMjhhNGM4NDAxYmIyNjM2ODc2MjIwOTdmZDApOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZjY4ZTFiY2JmOTU0YWNmODVkZmUzY2Y1MWRmNmJlOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81ZDQ4MmFmNGI5OWQ0YmY2Yjc3MDU1ODIxNjlmNWI1NiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNWQ0ODJhZjRiOTlkNGJmNmI3NzA1NTgyMTY5ZjViNTYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICg1LCAyKTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82ZjY4ZTFiY2JmOTU0YWNmODVkZmUzY2Y1MWRmNmJlOS5zZXRDb250ZW50KGh0bWxfNWQ0ODJhZjRiOTlkNGJmNmI3NzA1NTgyMTY5ZjViNTYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iMzYxZDhhMGJmYWQ0MmI4OTk2OWVkNDcyM2E3MWQwNS5iaW5kUG9wdXAocG9wdXBfNmY2OGUxYmNiZjk1NGFjZjg1ZGZlM2NmNTFkZjZiZTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9lMjUwYjY3NGJlZmU0ZTUzODhhOGYwYTFmYjQ4MTczOCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MDM3OTI2MDIsLTEyMi40OTM2OTY5MzRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9lZmMwNDIzZjJiNDk0YTNmYmZmOWNiN2Y0NTFhYTNmZiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncHVycGxlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2UyNTBiNjc0YmVmZTRlNTM4OGE4ZjBhMWZiNDgxNzM4LnNldEljb24oaWNvbl9lZmMwNDIzZjJiNDk0YTNmYmZmOWNiN2Y0NTFhYTNmZik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2JhMGQxMmI0NTI0YjQ3MjM5NjkwNzI0ZmQzNWExZGUwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEyOTk5NzE5YzBmZjQwNjliZDc1NGIxZGQwYWM5ZTIwID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xMjk5OTcxOWMwZmY0MDY5YmQ3NTRiMWRkMGFjOWUyMCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDUsIDMpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2JhMGQxMmI0NTI0YjQ3MjM5NjkwNzI0ZmQzNWExZGUwLnNldENvbnRlbnQoaHRtbF8xMjk5OTcxOWMwZmY0MDY5YmQ3NTRiMWRkMGFjOWUyMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2UyNTBiNjc0YmVmZTRlNTM4OGE4ZjBhMWZiNDgxNzM4LmJpbmRQb3B1cChwb3B1cF9iYTBkMTJiNDUyNGI0NzIzOTY5MDcyNGZkMzVhMWRlMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2Q1YWZiY2ExMjk4ZjRlMjA5ZjZlYjhiNTllMzJlNjU2ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzY1MTIxODY2MSwtMTIyLjQ2MDk3NTI2N10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzIzNmY5NjVlODVlOTQyMzRiNGEyMDhiY2JlYzljMTZlID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdwdXJwbGUnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZDVhZmJjYTEyOThmNGUyMDlmNmViOGI1OWUzMmU2NTYuc2V0SWNvbihpY29uXzIzNmY5NjVlODVlOTQyMzRiNGEyMDhiY2JlYzljMTZlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZWEyNjZhZDNlMjk2NGY4Njk5OTQ1ZjJmN2JkYmFkYTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzVkZGM2Nzg4ZDM0NDAwYWE1MzY1NGIyZjE2NzEzYWIgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2M1ZGRjNjc4OGQzNDQwMGFhNTM2NTRiMmYxNjcxM2FiIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoNSwgNCk8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZWEyNjZhZDNlMjk2NGY4Njk5OTQ1ZjJmN2JkYmFkYTcuc2V0Q29udGVudChodG1sX2M1ZGRjNjc4OGQzNDQwMGFhNTM2NTRiMmYxNjcxM2FiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZDVhZmJjYTEyOThmNGUyMDlmNmViOGI1OWUzMmU2NTYuYmluZFBvcHVwKHBvcHVwX2VhMjY2YWQzZTI5NjRmODY5OTk0NWYyZjdiZGJhZGE3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYjk3YTczNGNkNzc4NGJiZjk0MGRlYzE2NjgxYjIyMGUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NDgwNzQ5NzUxLC0xMjIuNTA2NTgyMTE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fY2NjYjUyMTQyNTFiNDlhNDk5N2FlY2Q2YTA0YzhjNDMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3B1cnBsZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9iOTdhNzM0Y2Q3Nzg0YmJmOTQwZGVjMTY2ODFiMjIwZS5zZXRJY29uKGljb25fY2NjYjUyMTQyNTFiNDlhNDk5N2FlY2Q2YTA0YzhjNDMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYmZhNDlhZGJiMTg0NzIwYTUyMjY4Nzg2M2IzODE0MCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wMDBhYzU3YWI0OWE0NDVlODhjNjQ1MTM0MWUwY2E0ZCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMDAwYWM1N2FiNDlhNDQ1ZTg4YzY0NTEzNDFlMGNhNGQiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICg1LCA1KTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mYmZhNDlhZGJiMTg0NzIwYTUyMjY4Nzg2M2IzODE0MC5zZXRDb250ZW50KGh0bWxfMDAwYWM1N2FiNDlhNDQ1ZTg4YzY0NTEzNDFlMGNhNGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9iOTdhNzM0Y2Q3Nzg0YmJmOTQwZGVjMTY2ODFiMjIwZS5iaW5kUG9wdXAocG9wdXBfZmJmYTQ5YWRiYjE4NDcyMGE1MjI2ODc4NjNiMzgxNDApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9hOTQyNTEwNGUxY2M0ZmJjOWQ5NzY1Y2YxMjUyNjFiMSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjcxNzI4MTA2MTMsLTEyMi40NTU5ODcyNjRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9lZWYzYzg2Yjg0ZTM0NzU3OWE1YTlhYTgxZGE0ZWJmNiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncHVycGxlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2E5NDI1MTA0ZTFjYzRmYmM5ZDk3NjVjZjEyNTI2MWIxLnNldEljb24oaWNvbl9lZWYzYzg2Yjg0ZTM0NzU3OWE1YTlhYTgxZGE0ZWJmNik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2JiYWI5ZjA0YzU2ZDQxZjE4ZjJhNzVmNTQzYWY1ZjA3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2IzNWEwY2U5M2E4NzRlYTFiNWMwNjRhMWEwOTVjY2E5ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9iMzVhMGNlOTNhODc0ZWExYjVjMDY0YTFhMDk1Y2NhOSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDUsIDYpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2JiYWI5ZjA0YzU2ZDQxZjE4ZjJhNzVmNTQzYWY1ZjA3LnNldENvbnRlbnQoaHRtbF9iMzVhMGNlOTNhODc0ZWExYjVjMDY0YTFhMDk1Y2NhOSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2E5NDI1MTA0ZTFjYzRmYmM5ZDk3NjVjZjEyNTI2MWIxLmJpbmRQb3B1cChwb3B1cF9iYmFiOWYwNGM1NmQ0MWYxOGYyYTc1ZjU0M2FmNWYwNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzU4NDIzY2MzODkzOTQwNjlhMGEwYmJhYjQ4OTZlZWY3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuODA3MjQyNTQzMiwtMTIyLjQyMDE1MjczMl0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2IzMGFmNjQ0YTZlNDRkMjA4NjI0MDkwMTMyMDI1NmNhID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdvcmFuZ2UnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNTg0MjNjYzM4OTM5NDA2OWEwYTBiYmFiNDg5NmVlZjcuc2V0SWNvbihpY29uX2IzMGFmNjQ0YTZlNDRkMjA4NjI0MDkwMTMyMDI1NmNhKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDE2YzE3MjMzODViNDc3OWFkZDE3YTAyODM3MmVjYTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTM2NDgwZTk5OGIwNDBiZmI3OWY5YzFlZWFiMTgwODAgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzkzNjQ4MGU5OThiMDQwYmZiNzlmOWMxZWVhYjE4MDgwIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoNiwgMSk8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDE2YzE3MjMzODViNDc3OWFkZDE3YTAyODM3MmVjYTcuc2V0Q29udGVudChodG1sXzkzNjQ4MGU5OThiMDQwYmZiNzlmOWMxZWVhYjE4MDgwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNTg0MjNjYzM4OTM5NDA2OWEwYTBiYmFiNDg5NmVlZjcuYmluZFBvcHVwKHBvcHVwX2QxNmMxNzIzMzg1YjQ3NzlhZGQxN2EwMjgzNzJlY2E3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfYTVhNjRmODdkYTA2NGQ3YjkzOTM2YjI1NjViM2U0ZmYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43MTcxNTM1NCwtMTIyLjQ5NTQ2NjEzNF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2JiY2Y1MGUzNTdlMDQxOWM4NWRjNzAwMzU3NjQwODhlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzlhNWY1OTVmMWUxNzQ1YWU4OWI3Mzg5YmMxZmYwOWRjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdvcmFuZ2UnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYTVhNjRmODdkYTA2NGQ3YjkzOTM2YjI1NjViM2U0ZmYuc2V0SWNvbihpY29uXzlhNWY1OTVmMWUxNzQ1YWU4OWI3Mzg5YmMxZmYwOWRjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODNiNjdlYTY4NGFhNDRiMzg5NDFkNDFkNGQwMmI1NWMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWQyM2VmZjc0YzY1NGIxZjk2NmM5NjZmMmZjMjg1Y2MgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzlkMjNlZmY3NGM2NTRiMWY5NjZjOTY2ZjJmYzI4NWNjIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAoNiwgMik8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODNiNjdlYTY4NGFhNDRiMzg5NDFkNDFkNGQwMmI1NWMuc2V0Q29udGVudChodG1sXzlkMjNlZmY3NGM2NTRiMWY5NjZjOTY2ZjJmYzI4NWNjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYTVhNjRmODdkYTA2NGQ3YjkzOTM2YjI1NjViM2U0ZmYuYmluZFBvcHVwKHBvcHVwXzgzYjY3ZWE2ODRhYTQ0YjM4OTQxZDQxZDRkMDJiNTVjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMGU3ZjNiZmY2MjQ2NGYwY2JjNzZiOTUyOTU4NWU2NTEgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43MjYzOTk3MDk4LC0xMjIuNDE1ODk3ODAyXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMmNjYWUzYzUzZmI2NDA0Njg1NjcyMGNmM2NjNjNiNGIgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ29yYW5nZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8wZTdmM2JmZjYyNDY0ZjBjYmM3NmI5NTI5NTg1ZTY1MS5zZXRJY29uKGljb25fMmNjYWUzYzUzZmI2NDA0Njg1NjcyMGNmM2NjNjNiNGIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85ODgxZWRjZjk3NTg0NjI2ODQ5MTY1NDNiZGJhNTI3NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84YzNhM2JmZDllMjI0MGRkYWQ3MzIyZDkwYTU5NWMxOSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOGMzYTNiZmQ5ZTIyNDBkZGFkNzMyMmQ5MGE1OTVjMTkiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICg2LCAzKTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85ODgxZWRjZjk3NTg0NjI2ODQ5MTY1NDNiZGJhNTI3Ni5zZXRDb250ZW50KGh0bWxfOGMzYTNiZmQ5ZTIyNDBkZGFkNzMyMmQ5MGE1OTVjMTkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8wZTdmM2JmZjYyNDY0ZjBjYmM3NmI5NTI5NTg1ZTY1MS5iaW5kUG9wdXAocG9wdXBfOTg4MWVkY2Y5NzU4NDYyNjg0OTE2NTQzYmRiYTUyNzYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9iNDU2ZTlkOTcwZTk0MThhODFkM2NkYzFlNTBjODFkYyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3LjgxODY5NDM1NTYsLTEyMi4zNjk5MTQxOTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8xOGJjMTBmYjJkMmU0NjA3OTAxN2NhOTBjYmJlYzYyYyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnb3JhbmdlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2I0NTZlOWQ5NzBlOTQxOGE4MWQzY2RjMWU1MGM4MWRjLnNldEljb24oaWNvbl8xOGJjMTBmYjJkMmU0NjA3OTAxN2NhOTBjYmJlYzYyYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VjYTBkZWZhMjk2MDRmMDc4NWNiNTM0YWE5ZjhkYWU3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzNiNWFmYmQ3MzRjMTQ2MTRhODUyNmJiOWFjZjY3ZDRlID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8zYjVhZmJkNzM0YzE0NjE0YTg1MjZiYjlhY2Y2N2Q0ZSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDYsIDQpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2VjYTBkZWZhMjk2MDRmMDc4NWNiNTM0YWE5ZjhkYWU3LnNldENvbnRlbnQoaHRtbF8zYjVhZmJkNzM0YzE0NjE0YTg1MjZiYjlhY2Y2N2Q0ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2I0NTZlOWQ5NzBlOTQxOGE4MWQzY2RjMWU1MGM4MWRjLmJpbmRQb3B1cChwb3B1cF9lY2EwZGVmYTI5NjA0ZjA3ODVjYjUzNGFhOWY4ZGFlNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzQ0YWZkOTVjZGU0NTRmYjQ5OWY1YzdmM2VkNzk2N2Y3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgwMDM1MTk4LC0xMjIuNDcyNDY0ODQ3XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYmJjZjUwZTM1N2UwNDE5Yzg1ZGM3MDAzNTc2NDA4OGUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMzM5N2RmNzI0NDIzNDllZGJjYjUwZTAwM2MyN2I1ZGQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ29yYW5nZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl80NGFmZDk1Y2RlNDU0ZmI0OTlmNWM3ZjNlZDc5NjdmNy5zZXRJY29uKGljb25fMzM5N2RmNzI0NDIzNDllZGJjYjUwZTAwM2MyN2I1ZGQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lOTI1MzcxNzMyNDg0N2FjYTNhMjU4Njk1YjQ0MmNmMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yM2UzODIxZWQzZmI0MzBlYjYwMmM1YjhhYzQ5YmYyYiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfMjNlMzgyMWVkM2ZiNDMwZWI2MDJjNWI4YWM0OWJmMmIiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgICg2LCA1KTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lOTI1MzcxNzMyNDg0N2FjYTNhMjU4Njk1YjQ0MmNmMy5zZXRDb250ZW50KGh0bWxfMjNlMzgyMWVkM2ZiNDMwZWI2MDJjNWI4YWM0OWJmMmIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl80NGFmZDk1Y2RlNDU0ZmI0OTlmNWM3ZjNlZDc5NjdmNy5iaW5kUG9wdXAocG9wdXBfZTkyNTM3MTczMjQ4NDdhY2EzYTI1ODY5NWI0NDJjZjMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl82NjUxM2U4YTY3ZGE0MDU5OWFjMjIzNWQzZjk0OTRhMyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc5OTI2MzI5MTgsLTEyMi40MDIxODk4NzddLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9iYmNmNTBlMzU3ZTA0MTljODVkYzcwMDM1NzY0MDg4ZSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl84NjNkNjE2YTYyNGI0NGM1OWU4YTQ1YjMyNjI4MjY4MyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnb3JhbmdlJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzY2NTEzZThhNjdkYTQwNTk5YWMyMjM1ZDNmOTQ5NGEzLnNldEljb24oaWNvbl84NjNkNjE2YTYyNGI0NGM1OWU4YTQ1YjMyNjI4MjY4Myk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM4M2RhM2JiYTA4MTQ1YmFhMTYxOWQwNDdlYTZmYmQ3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RhMTg5MTg5ZWU3YzQxYjA5MjE3MDkxNjJiZTY5M2UyID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9kYTE4OTE4OWVlN2M0MWIwOTIxNzA5MTYyYmU2OTNlMiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgKDYsIDYpPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM4M2RhM2JiYTA4MTQ1YmFhMTYxOWQwNDdlYTZmYmQ3LnNldENvbnRlbnQoaHRtbF9kYTE4OTE4OWVlN2M0MWIwOTIxNzA5MTYyYmU2OTNlMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzY2NTEzZThhNjdkYTQwNTk5YWMyMjM1ZDNmOTQ5NGEzLmJpbmRQb3B1cChwb3B1cF8zODNkYTNiYmEwODE0NWJhYTE2MTlkMDQ3ZWE2ZmJkNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L3NjcmlwdD4KICAgICAgICA=" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>



## Determining Stop Order using Mapzen's Optimize Route Service 
Now that I have tools to geocode and visualize points, I’m ready to write a function that calls the Mapzen Optimize route service to calculate the optimal route that one person should use to visit a set of stops, starting and ending at a “home” location. Later on, I will build off of this function to optimize stops for multiple people, but this is an initial building-block. The  key pieces of information that this function returns are trip length, trip distance, optimize stop order, an ordered set of stop coordinates, and the polyline that connects these stops.

Note that Mapzen uses the [Google Maps encoded polyline format](https://developers.google.com/maps/documentation/utilities/polylinealgorithm) to store a series of latitude, longitude coordinates as a single string (this is done to reduce the size of the route response). Mapzen provides [code](https://mapzen.com/documentation/mobility/decoding/) that can be used to decode the string, which I use in order to get a set of lat / long coordinates that I can plot.

The decoding function is listed below, applied to a sample coded string, and then mapped.


```python
#Decoding function used to extract lat/long coordinates from google maps encoded polylines
#https://mapzen.com/documentation/mobility/decoding/

#six degrees of precision in valhalla
inv = 1.0 / 1e6;
#decode an encoded string
def decode(encoded):
    decoded = []
    previous = [0,0]
    i = 0
    #for each byte
    while i < len(encoded):
        #for each coord (lat, lon)
        ll = [0, 0]
        for j in [0, 1]:
            shift = 0
            byte = 0x20
            #keep decoding bytes until you have this coord
            while byte >=  0x20:
                byte = ord(encoded[i]) - 63
                i +=  1
                ll[j] |=  (byte & 0x1f) << shift
                shift +=  5
            #get the final value adding the previous offset and remember it for the next
            ll[j] = previous[j] + (~(ll[j] >> 1) if ll[j] & 1 else (ll[j] >> 1))
            previous[j] = ll[j]
            #scale by the precision and chop off long coords also flip the positions so
            #its the far more standard lon,lat instead of lat,lon
        decoded.append([float('%.6f' % (ll[1] * inv)), float('%.6f' % (ll[0] * inv))])
    #hand back the list of coordinates
    return decoded
```


```python
coded_polyline=decode('ciz`gAzxrqhF}wArEkZ|@`BvaA^|TbAhl@\\|T|@xk@`BvaAbBfbAsFLaRzA')
coded_polyline
```




    [[-122.464158, 37.779106],
     [-122.464264, 37.780529],
     [-122.464295, 37.780967],
     [-122.465363, 37.780918],
     [-122.465714, 37.780902],
     [-122.466439, 37.780868],
     [-122.46679, 37.780853],
     [-122.467507, 37.780822],
     [-122.468575, 37.780773],
     [-122.469651, 37.780723],
     [-122.469658, 37.780845],
     [-122.469704, 37.78115]]




```python
map2 = folium.Map(location = (coded_polyline[5][1],coded_polyline[5][0]),zoom_start =17)
folium.PolyLine([(y,x) for (x,y) in coded_polyline],color='red').add_to(map2)
map2
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzE5ODhjY2Q4YjYyODQ1Y2ZiZTczMWY4YjNkYTYxZjBjIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF8xOTg4Y2NkOGI2Mjg0NWNmYmU3MzFmOGIzZGE2MWYwYyIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF8xOTg4Y2NkOGI2Mjg0NWNmYmU3MzFmOGIzZGE2MWYwYyA9IEwubWFwKCdtYXBfMTk4OGNjZDhiNjI4NDVjZmJlNzMxZjhiM2RhNjFmMGMnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc4MDg2OCwtMTIyLjQ2NjQzOV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEJvdW5kczogYm91bmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgdGlsZV9sYXllcl84NTk3ZGRhZTRhMjM0OGJlYWQwYTIzYWM5N2QxZWU4NiA9IEwudGlsZUxheWVyKAogICAgICAgICAgICAgICAgJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBtYXhab29tOiAxOCwKICAgICAgICAgICAgICAgICAgICBtaW5ab29tOiAxLAogICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiAnRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCI+T0RiTDwvYT4uJywKICAgICAgICAgICAgICAgICAgICBkZXRlY3RSZXRpbmE6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMTk4OGNjZDhiNjI4NDVjZmJlNzMxZjhiM2RhNjFmMGMpOwoKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzhkMjJkM2ZhYWRmMDQwNTI4YmZjZmY2YTg2YTJhZWUwID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzgwNTI5LCAtMTIyLjQ2NDI2NF0sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDkxOCwgLTEyMi40NjUzNjNdLCBbMzcuNzgwOTAyLCAtMTIyLjQ2NTcxNF0sIFszNy43ODA4NjgsIC0xMjIuNDY2NDM5XSwgWzM3Ljc4MDg1MywgLTEyMi40NjY3OV0sIFszNy43ODA4MjIsIC0xMjIuNDY3NTA3XSwgWzM3Ljc4MDc3MywgLTEyMi40Njg1NzVdLCBbMzcuNzgwNzIzLCAtMTIyLjQ2OTY1MV0sIFszNy43ODA4NDUsIC0xMjIuNDY5NjU4XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF1dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwXzE5ODhjY2Q4YjYyODQ1Y2ZiZTczMWY4YjNkYTYxZjBjLmFkZExheWVyKHBvbHlfbGluZV84ZDIyZDNmYWFkZjA0MDUyOGJmY2ZmNmE4NmEyYWVlMCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvc2NyaXB0PgogICAgICAgIA==" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>



My function also wraps the geocoding function I wrote above, so that the user can specify any combination of addresses, venues, and coordinates. It defaults to pedestrian mode of transportation, but the user can also specify driving or biking optimization. I also allow the user to specify a set of stop labels, which will be returned as the ordered list of stops. Otherwise, the function defaults to the raw input that was passed to the function


```python
def optimize_stops(home, stops, costing = 'pedestrian', api_key = matrix_key, home_label = 'Home',
                  stop_labels = None):
    
    #geocode home and stops if not a coordinate
    home = home if type(home) is tuple else geocode_address_venue(home)
    stops = [geocode_address_venue(stop)['coords'] if type(stop) is not tuple else stop for stop in stops]
    
    #full set of points are list of points that start and end with the home location
    points = [home] + stops + [home]
    
    #round_points to 5 decimal points
    points=[(round(x,5),round(y,5)) for (x,y) in points]
    
    #define point labels
    names = [home_label] + (stop_labels if stop_labels else stops) + [home_label]
    
    #set up parameters to pass to mapzen function
    js = {'locations':[{'lon': point[0], 'lat': point[1]} for point in points], 'costing': costing}
    params = {'json': json.dumps(js), 'api_key': api_key}
    url = 'https://matrix.mapzen.com/optimized_route'
    r = requests.get(url, params = params)
    raw = r.json()
    
    #get the coordinates of the stops in their new optimized order
    locs = raw['trip']['locations']
    new_point_order = [(locs[loc]['lon'], locs[loc]['lat']) for loc in range(len(locs))]
    
    #round to 5 decimal points
    new_point_order=[(round(x,5),round(y,5)) for (x,y) in new_point_order]

    point_order = [points.index(x) for x in new_point_order]
    name_order = [names[i] for i in point_order]
    
    #Extract the path shape for each of the legs, decode them, and then combine into one polyline
    raw_path = [raw['trip']['legs'][x]['shape'] for x in range(len(raw['trip']['legs']))]
    decode_paths = [tuple(item) for sublist in [decode(z) for z in raw_path] for item in sublist]
    
    #return a dictionary that contains raw mapzen output, trip time, trip distance, new ordered points, 
    #new ordered point names, and a decoded path
    return {'raw': raw, 
    'time': raw['trip']['summary']['time']/60,
    'length': raw['trip']['summary']['length'], 
    'points': new_point_order,
    'original_points':points,
    'order': name_order,
    'line': decode_paths}
    return point_order
```

Before extending this function to multiple salesman, I’ll demonstrate the output of this initial function. Below I define my optimization parameters:
1. A list of 6 stops in my neighborhood that Celeste and I will need to visit as part of our Sunday morning errands (note that I use a combination of business names, addresses, and coordinates)
2. A set of names that correspond to these stops that will make the labeling clearer
3. A home location that will be the start and end point.

As much as I wish it were the case, our Sunday errands generally do not involve ice cream, pizza, bagels, and art museums. Nonetheless, for this example I've used some of our favorite neighborhood destinations despite the fact that they are somewhat unrealistic “errand” destinations.



```python
stops = ['Toy Boat Dessert Cafe, San Francisco, CA',
       'Pizzetta 211, San Francisco, CA', 
       'Arguello Super Market, San Francisco, CA',
       '4700 Geary Blvd, San Francisco, CA',
       (-122.465613, 37.770016),
       '3519 California St, San Francisco, CA 94118']

stop_labels = ['Toy Boat',
             'Pizzetta',
             'Arguello Market',
             'Lamps Plus',
             'de Young Museum',
             "Noah's Bagels"]

home = (-122.464186, 37.779111)
```

I then apply this function to my set of stops and return the optimized stop order, the route time, and the route distance. I first optimize the route as a pedestrian and then as a bicyclist. As you can see, the stop order is slightly different for these two modes of transit, likely keeping the bike route on roads and paths that are better for biking.


```python
walk_opt = optimize_stops(home, stops, stop_labels = stop_labels)
print walk_opt['order']
print str(walk_opt['time']) + ' minutes'
print str(walk_opt['length']) + ' km'
```

    ['Home', 'Lamps Plus', 'Pizzetta', 'Toy Boat', "Noah's Bagels", 'Arguello Market', 'de Young Museum', 'Home']
    116 minutes
    9.625 km
    


```python
walk_1_map=plot_stops(walk_opt['points'][:-1], zoom_level = 14, tiles = 'Stamen Watercolor', \
                labels = walk_opt['order'][:-1], line_coords = walk_opt['line'], point_colors=['black']+len(stops)*['red'])
walk_1_map
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzU4ZjIxNjQ2ZGFlMTQwODlhYjI4ZDY1Y2NmODVhN2E4IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF81OGYyMTY0NmRhZTE0MDg5YWIyOGQ2NWNjZjg1YTdhOCIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF81OGYyMTY0NmRhZTE0MDg5YWIyOGQ2NWNjZjg1YTdhOCA9IEwubWFwKCdtYXBfNThmMjE2NDZkYWUxNDA4OWFiMjhkNjVjY2Y4NWE3YTgnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfOTg4Njg0ZTMzOTI3NGY2YmI0YjVlMmIwODJlMmFjYTUgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF81OGYyMTY0NmRhZTE0MDg5YWIyOGQ2NWNjZjg1YTdhOCk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfOTI4YzM2OTI3ODNjNGIxYTljMzc3ZjExYWRjNTE4MjcgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNThmMjE2NDZkYWUxNDA4OWFiMjhkNjVjY2Y4NWE3YTgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMmYyZmM2YThiZTU5NDk3OTk4NDI2N2QyOGI5M2YxODggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzkyOGMzNjkyNzgzYzRiMWE5YzM3N2YxMWFkYzUxODI3LnNldEljb24oaWNvbl8yZjJmYzZhOGJlNTk0OTc5OTg0MjY3ZDI4YjkzZjE4OCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg5MGUwMjNkZDViNDQ5YzI4YmViMTRhZWE4ODQ0MGQ5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIyZmZkNjgzZDEzNDQxYTU4NGY3MmFlYTc5NjZhMGNiID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8yMmZmZDY4M2QxMzQ0MWE1ODRmNzJhZWE3OTY2YTBjYiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84OTBlMDIzZGQ1YjQ0OWMyOGJlYjE0YWVhODg0NDBkOS5zZXRDb250ZW50KGh0bWxfMjJmZmQ2ODNkMTM0NDFhNTg0ZjcyYWVhNzk2NmEwY2IpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl85MjhjMzY5Mjc4M2M0YjFhOWMzNzdmMTFhZGM1MTgyNy5iaW5kUG9wdXAocG9wdXBfODkwZTAyM2RkNWI0NDljMjhiZWIxNGFlYTg4NDQwZDkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9jOTEwMWMwZGQ1ODI0N2Q3YmIxMGQ0ODRlNTcyYWU2YiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81OGYyMTY0NmRhZTE0MDg5YWIyOGQ2NWNjZjg1YTdhOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8wMTE3MjMyNWJlYjY0MDAxYjAyNTY4Y2JhZDYzODNmNCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2M5MTAxYzBkZDU4MjQ3ZDdiYjEwZDQ4NGU1NzJhZTZiLnNldEljb24oaWNvbl8wMTE3MjMyNWJlYjY0MDAxYjAyNTY4Y2JhZDYzODNmNCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzUzNzA5YzY3ZmI2OTRlMmNhZDY5MjU3MTU2YjliYjY4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA5ODlkNTAyOTMzYzQyNGJhYzkyOTcyNDM4Y2QzMDc2ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wOTg5ZDUwMjkzM2M0MjRiYWM5Mjk3MjQzOGNkMzA3NiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTGFtcHMgUGx1czwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81MzcwOWM2N2ZiNjk0ZTJjYWQ2OTI1NzE1NmI5YmI2OC5zZXRDb250ZW50KGh0bWxfMDk4OWQ1MDI5MzNjNDI0YmFjOTI5NzI0MzhjZDMwNzYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9jOTEwMWMwZGQ1ODI0N2Q3YmIxMGQ0ODRlNTcyYWU2Yi5iaW5kUG9wdXAocG9wdXBfNTM3MDljNjdmYjY5NGUyY2FkNjkyNTcxNTZiOWJiNjgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85MmIxYzZkYTc5ZTY0OTBlOWRiNDBjZjQzNDhlYmE3ZCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MzcxLC0xMjIuNDgzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNThmMjE2NDZkYWUxNDA4OWFiMjhkNjVjY2Y4NWE3YTgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZTkxODk1YjQyZmUxNGNhODhkMDIwNDU0NzBkYzYxOWEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85MmIxYzZkYTc5ZTY0OTBlOWRiNDBjZjQzNDhlYmE3ZC5zZXRJY29uKGljb25fZTkxODk1YjQyZmUxNGNhODhkMDIwNDU0NzBkYzYxOWEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hZWUyMTJmZjlkZTM0NzYwYjM4MGJiNTk1ZTFlMzZhMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MmQwZmNhYmYwOTc0ZDY1YTUxYWRkYmI3OTUwYTdmZCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNDJkMGZjYWJmMDk3NGQ2NWE1MWFkZGJiNzk1MGE3ZmQiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFBpenpldHRhPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2FlZTIxMmZmOWRlMzQ3NjBiMzgwYmI1OTVlMWUzNmEyLnNldENvbnRlbnQoaHRtbF80MmQwZmNhYmYwOTc0ZDY1YTUxYWRkYmI3OTUwYTdmZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzkyYjFjNmRhNzllNjQ5MGU5ZGI0MGNmNDM0OGViYTdkLmJpbmRQb3B1cChwb3B1cF9hZWUyMTJmZjlkZTM0NzYwYjM4MGJiNTk1ZTFlMzZhMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2ZkYjViNmIyNTgyNzQ4YWE5NTk0YWJjODcwMTI2MTZlID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgyNzgsLTEyMi40NjM1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzU4ZjIxNjQ2ZGFlMTQwODlhYjI4ZDY1Y2NmODVhN2E4KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzU1ZWU2MTc2OWE0NDQ0ODI5N2NlMDNhODc4YjA5ZWU0ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZmRiNWI2YjI1ODI3NDhhYTk1OTRhYmM4NzAxMjYxNmUuc2V0SWNvbihpY29uXzU1ZWU2MTc2OWE0NDQ0ODI5N2NlMDNhODc4YjA5ZWU0KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2YzYmVlNTYwOTliNDgwNzlkMWI5ZmVlNGVjMGYxYTYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDI2MDAyZDBiYmQ2NGY2ZGI1ZjU5OTdhZTVkMmFhN2IgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2QyNjAwMmQwYmJkNjRmNmRiNWY1OTk3YWU1ZDJhYTdiIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZjNiZWU1NjA5OWI0ODA3OWQxYjlmZWU0ZWMwZjFhNi5zZXRDb250ZW50KGh0bWxfZDI2MDAyZDBiYmQ2NGY2ZGI1ZjU5OTdhZTVkMmFhN2IpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mZGI1YjZiMjU4Mjc0OGFhOTU5NGFiYzg3MDEyNjE2ZS5iaW5kUG9wdXAocG9wdXBfN2YzYmVlNTYwOTliNDgwNzlkMWI5ZmVlNGVjMGYxYTYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl84NDRjNjhiMzhhY2M0MjU2YWIyOTg0ZjhmMmY3OTkzMiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81OGYyMTY0NmRhZTE0MDg5YWIyOGQ2NWNjZjg1YTdhOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9lZDM3MDgyMTg1MGE0N2Q1YWJkNDQxMmFmMWMzMDVkNCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzg0NGM2OGIzOGFjYzQyNTZhYjI5ODRmOGYyZjc5OTMyLnNldEljb24oaWNvbl9lZDM3MDgyMTg1MGE0N2Q1YWJkNDQxMmFmMWMzMDVkNCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQwODU2NGJhNmQyOTRlYjRiYTQ1ZTcwM2U5YzNlMzA1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzg0NTkwNTUxYjA0YjQ0YWQ5ZGNjODcxNTNiNzFhYjkyID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF84NDU5MDU1MWIwNGI0NGFkOWRjYzg3MTUzYjcxYWI5MiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTm9haCYjMzk7cyBCYWdlbHM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDA4NTY0YmE2ZDI5NGViNGJhNDVlNzAzZTljM2UzMDUuc2V0Q29udGVudChodG1sXzg0NTkwNTUxYjA0YjQ0YWQ5ZGNjODcxNTNiNzFhYjkyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfODQ0YzY4YjM4YWNjNDI1NmFiMjk4NGY4ZjJmNzk5MzIuYmluZFBvcHVwKHBvcHVwXzQwODU2NGJhNmQyOTRlYjRiYTQ1ZTcwM2U5YzNlMzA1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMjcxMjI4NDgyNGYwNGQ5NTliYjdiZTcxZDFhOTI5MWMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNThmMjE2NDZkYWUxNDA4OWFiMjhkNjVjY2Y4NWE3YTgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fODM2MTQ0YmI0OWRhNDhhNWE4ZmI5YWM0MjdjZWYyNDggPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8yNzEyMjg0ODI0ZjA0ZDk1OWJiN2JlNzFkMWE5MjkxYy5zZXRJY29uKGljb25fODM2MTQ0YmI0OWRhNDhhNWE4ZmI5YWM0MjdjZWYyNDgpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yNjhiYWZlMzllYjA0ZDkxODRlMGY0ZWJhZTViNWE0MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84ZWM1NTVjM2FhYTU0Y2IxYjgzNzYxODk5MWRlMzg5OSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOGVjNTU1YzNhYWE1NGNiMWI4Mzc2MTg5OTFkZTM4OTkiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEFyZ3VlbGxvIE1hcmtldDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yNjhiYWZlMzllYjA0ZDkxODRlMGY0ZWJhZTViNWE0MS5zZXRDb250ZW50KGh0bWxfOGVjNTU1YzNhYWE1NGNiMWI4Mzc2MTg5OTFkZTM4OTkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8yNzEyMjg0ODI0ZjA0ZDk1OWJiN2JlNzFkMWE5MjkxYy5iaW5kUG9wdXAocG9wdXBfMjY4YmFmZTM5ZWIwNGQ5MTg0ZTBmNGViYWU1YjVhNDEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8zYzEzMGY5MTVjNTQ0Mzg4YWQwMDc4OGQwNTE4NzdiZSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDAyLC0xMjIuNDY1NjFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81OGYyMTY0NmRhZTE0MDg5YWIyOGQ2NWNjZjg1YTdhOCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl82N2MwMWUzOGVkNGY0MzVlOWU3NGYwZjVkNDBiOTQ3NiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzNjMTMwZjkxNWM1NDQzODhhZDAwNzg4ZDA1MTg3N2JlLnNldEljb24oaWNvbl82N2MwMWUzOGVkNGY0MzVlOWU3NGYwZjVkNDBiOTQ3Nik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FhYzRlMjJiN2JmZTQxMDZhYTQyYmM5NTY2N2NmMjNmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM1MWViNWQyZjZmNTQwYzdhYWUwMGFkZjgwMDU0OTNkID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8zNTFlYjVkMmY2ZjU0MGM3YWFlMDBhZGY4MDA1NDkzZCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgZGUgWW91bmcgTXVzZXVtPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2FhYzRlMjJiN2JmZTQxMDZhYTQyYmM5NTY2N2NmMjNmLnNldENvbnRlbnQoaHRtbF8zNTFlYjVkMmY2ZjU0MGM3YWFlMDBhZGY4MDA1NDkzZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzNjMTMwZjkxNWM1NDQzODhhZDAwNzg4ZDA1MTg3N2JlLmJpbmRQb3B1cChwb3B1cF9hYWM0ZTIyYjdiZmU0MTA2YWE0MmJjOTU2NjdjZjIzZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzAzMjYyNWU0NTdlNDQwNWVhZjE1MDFjMDUwNDY0YzZhID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzgwNTI5LCAtMTIyLjQ2NDI2NF0sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDkxOCwgLTEyMi40NjUzNjNdLCBbMzcuNzgwOTAyLCAtMTIyLjQ2NTcxNF0sIFszNy43ODA4NjgsIC0xMjIuNDY2NDM5XSwgWzM3Ljc4MDg1MywgLTEyMi40NjY3OV0sIFszNy43ODA4MjIsIC0xMjIuNDY3NTA3XSwgWzM3Ljc4MDc3MywgLTEyMi40Njg1NzVdLCBbMzcuNzgwNzIzLCAtMTIyLjQ2OTY1MV0sIFszNy43ODA4NDUsIC0xMjIuNDY5NjU4XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgyMzgyLCAtMTIyLjQ2OTc2NV0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4MjY2MSwgLTEyMi40NzA4NjRdLCBbMzcuNzgyNjExLCAtMTIyLjQ3MTkzMl0sIFszNy43ODI2MDQsIC0xMjIuNDcyMV0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjU4NSwgLTEyMi40NzI1NDJdLCBbMzcuNzgyNTY2LCAtMTIyLjQ3MzAwOF0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjQ1OSwgLTEyMi40NzUyNTFdLCBbMzcuNzgyNDA5LCAtMTIyLjQ3NjMxOV0sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjMxNCwgLTEyMi40Nzg0NjNdLCBbMzcuNzgyMjY0LCAtMTIyLjQ3OTUzMV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjE2OSwgLTEyMi40ODE2NzVdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgyMTY5LCAtMTIyLjQ4MTY3NV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjI2NCwgLTEyMi40Nzk1MzFdLCBbMzcuNzgyMzE0LCAtMTIyLjQ3ODQ2M10sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjQwOSwgLTEyMi40NzYzMTldLCBbMzcuNzgyNDU5LCAtMTIyLjQ3NTI1MV0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjU2NiwgLTEyMi40NzMwMDhdLCBbMzcuNzgyNTg1LCAtMTIyLjQ3MjU0Ml0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjYwNCwgLTEyMi40NzIxXSwgWzM3Ljc4MjYxMSwgLTEyMi40NzE5MzJdLCBbMzcuNzgyNjYxLCAtMTIyLjQ3MDg2NF0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4Mjc1NiwgLTEyMi40Njg3Ml0sIFszNy43ODI4MDYsIC0xMjIuNDY3NjUyXSwgWzM3Ljc4Mjg1NSwgLTEyMi40NjY1ODRdLCBbMzcuNzgyOTAxLCAtMTIyLjQ2NTUwOF0sIFszNy43ODI5NTEsIC0xMjIuNDY0NDRdLCBbMzcuNzgzLCAtMTIyLjQ2MzM3Ml0sIFszNy43ODI3OTEsIC0xMjIuNDYzNDAyXSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgzLCAtMTIyLjQ2MzM3Ml0sIFszNy43ODQ4NjYsIC0xMjIuNDYzNTAxXSwgWzM3Ljc4NTEzNywgLTEyMi40NjM1MjRdLCBbMzcuNzg1Mjc0LCAtMTIyLjQ2MjQ1Nl0sIFszNy43ODU0MDgsIC0xMjIuNDYxMzk2XSwgWzM3Ljc4NTU0NSwgLTEyMi40NjAzMjhdLCBbMzcuNzg1Njg2LCAtMTIyLjQ1OTIxNF0sIFszNy43ODU4MzEsIC0xMjIuNDU4MDY5XSwgWzM3Ljc4NTk3MiwgLTEyMi40NTY5NzhdLCBbMzcuNzg2MDAzLCAtMTIyLjQ1NjcxMV0sIFszNy43ODYxMDksIC0xMjIuNDU1ODg3XSwgWzM3Ljc4NjIxMiwgLTEyMi40NTUwNjNdLCBbMzcuNzg2MjUxLCAtMTIyLjQ1NDc4OV0sIFszNy43ODYzMTIsIC0xMjIuNDU0M10sIFszNy43ODYzODgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NjQxOCwgLTEyMi40NTM0MjNdLCBbMzcuNzg2NDMsIC0xMjIuNDUzMzI0XSwgWzM3Ljc4NjYyNCwgLTEyMi40NTE3NzVdLCBbMzcuNzg2NDc2LCAtMTIyLjQ1MTc0NV0sIFszNy43ODYyMzksIC0xMjIuNDUxNjk5XSwgWzM3Ljc4NjIzOSwgLTEyMi40NTE2OTldLCBbMzcuNzg1OTM0LCAtMTIyLjQ1MTYzXSwgWzM3Ljc4NTkzNCwgLTEyMi40NTE2MzhdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTc3LCAtMTIyLjQ1MjkyXSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzE3LCAtMTIyLjQ1MzM3N10sIFszNy43ODU3MTMsIC0xMjIuNDUzNDMxXSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NTk0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODU1NTYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NDY1LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUzNTgsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MTA2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODQ5NzYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0NzMyLCAtMTIyLjQ1MzczNl0sIFszNy43ODQ2MTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0Mzc4LCAtMTIyLjQ1MzY5OF0sIFszNy43ODQyNjcsIC0xMjIuNDUzNjgyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MDU3LCAtMTIyLjQ1MzY1Ml0sIFszNy43ODM5NTQsIC0xMjIuNDUzNjM3XSwgWzM3Ljc4MTc4NywgLTEyMi40NTMyMDJdLCBbMzcuNzgxNjY5LCAtMTIyLjQ1MzE3OV0sIFszNy43ODAzNjQsIC0xMjIuNDUyOTJdLCBbMzcuNzgwMjQyLCAtMTIyLjQ1Mzg5Nl0sIFszNy43ODAxMiwgLTEyMi40NTQ4MzRdLCBbMzcuNzgwMDk3LCAtMTIyLjQ1NTAxOF0sIFszNy43ODAwMzYsIC0xMjIuNDU1NDkxXSwgWzM3Ljc4MDAyOSwgLTEyMi40NTU1NTldLCBbMzcuNzgwMDE3LCAtMTIyLjQ1NTYyXSwgWzM3Ljc4MDAwNiwgLTEyMi40NTU2ODFdLCBbMzcuNzc5OTkxLCAtMTIyLjQ1NTczNV0sIFszNy43Nzk5NDUsIC0xMjIuNDU1ODU3XSwgWzM3Ljc3OTg5OSwgLTEyMi40NTU5ODddLCBbMzcuNzc5ODA4LCAtMTIyLjQ1NjIzOF0sIFszNy43Nzk3MDgsIC0xMjIuNDU2NTEzXSwgWzM3Ljc3OTY3LCAtMTIyLjQ1NjYxMl0sIFszNy43Nzk2NDQsIC0xMjIuNDU2Njg4XSwgWzM3Ljc3OTYyMSwgLTEyMi40NTY3NTddLCBbMzcuNzc5NjA1LCAtMTIyLjQ1NjgzM10sIFszNy43Nzk1OTQsIC0xMjIuNDU2OTAyXSwgWzM3Ljc3OTU3OSwgLTEyMi40NTcwMDFdLCBbMzcuNzc5NDY4LCAtMTIyLjQ1Njk3OF0sIFszNy43Nzk0MDcsIC0xMjIuNDU2OTcxXSwgWzM3Ljc3OTM4LCAtMTIyLjQ1Njk3MV0sIFszNy43NzkzNSwgLTEyMi40NTY5NzFdLCBbMzcuNzc5MzE5LCAtMTIyLjQ1Njk3OF0sIFszNy43NzkyOTMsIC0xMjIuNDU2OTk0XSwgWzM3Ljc3OTI1MSwgLTEyMi40NTcwMTZdLCBbMzcuNzc5MjE2LCAtMTIyLjQ1NzA1NV0sIFszNy43NzkxNzQsIC0xMjIuNDU3MV0sIFszNy43NzkxMzIsIC0xMjIuNDU3MTQ2XSwgWzM3Ljc3OTA5OCwgLTEyMi40NTcxOTJdLCBbMzcuNzc5MDcxLCAtMTIyLjQ1NzIzXSwgWzM3Ljc3OTA1NiwgLTEyMi40NTcyNjFdLCBbMzcuNzc5MDMzLCAtMTIyLjQ1NzMyMl0sIFszNy43NzkwMTQsIC0xMjIuNDU3Mzc1XSwgWzM3Ljc3ODk0NSwgLTEyMi40NTc5MzJdLCBbMzcuNzc4OTM4LCAtMTIyLjQ1Nzk3XSwgWzM3Ljc3ODkzLCAtMTIyLjQ1ODAwOF0sIFszNy43Nzg5MTUsIC0xMjIuNDU4MDU0XSwgWzM3Ljc3ODg5MiwgLTEyMi40NTgwOTJdLCBbMzcuNzc4ODczLCAtMTIyLjQ1ODEwN10sIFszNy43Nzg4NSwgLTEyMi40NTgxMjNdLCBbMzcuNzc4ODI3LCAtMTIyLjQ1ODEzXSwgWzM3Ljc3ODc5NywgLTEyMi40NTgxMjNdLCBbMzcuNzc4NzI4LCAtMTIyLjQ1ODEzXSwgWzM3Ljc3ODA5MSwgLTEyMi40NTgwMDFdLCBbMzcuNzc4MDExLCAtMTIyLjQ1ODY1N10sIFszNy43Nzc3MzYsIC0xMjIuNDU4NjQyXSwgWzM3Ljc3NzU5NSwgLTEyMi40NTg2MzRdLCBbMzcuNzc3Mjg2LCAtMTIyLjQ1ODYxMV0sIFszNy43NzcxMjYsIC0xMjIuNDU4NTk2XSwgWzM3Ljc3Njg0NCwgLTEyMi40NTg1NzNdLCBbMzcuNzc2MTg3LCAtMTIyLjQ1ODUyN10sIFszNy43NzYxMTksIC0xMjIuNDU4NTI3XSwgWzM3Ljc3NTYxNSwgLTEyMi40NTg0ODldLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzU1NjksIC0xMjIuNDU4NTA0XSwgWzM3Ljc3NTI0NSwgLTEyMi40NTg0NThdLCBbMzcuNzc0OTgyLCAtMTIyLjQ1ODQ0M10sIFszNy43NzQ3MDMsIC0xMjIuNDU4NDJdLCBbMzcuNzc0NDEsIC0xMjIuNDU4NDA1XSwgWzM3Ljc3NDI5OSwgLTEyMi40NTgzOV0sIFszNy43NzQyOTksIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NDI5OSwgLTEyMi40NTg1MTJdLCBbMzcuNzc0MTM5LCAtMTIyLjQ1ODQ5N10sIFszNy43NzQwMDIsIC0xMjIuNDU4NTI3XSwgWzM3Ljc3Mzg0NSwgLTEyMi40NTg2MjZdLCBbMzcuNzczNTcxLCAtMTIyLjQ1ODg5M10sIFszNy43NzMyNzMsIC0xMjIuNDU5MTUzXSwgWzM3Ljc3MzIwOCwgLTEyMi40NTkxNDVdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMwMzYsIC0xMjIuNDYwMzk2XSwgWzM3Ljc3MzAxNCwgLTEyMi40NjA1MTFdLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzI5NTMsIC0xMjIuNDYwNzE3XSwgWzM3Ljc3MjkxOCwgLTEyMi40NjA3OTNdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI4MTksIC0xMjIuNDYwOTQ2XSwgWzM3Ljc3Mjc2NiwgLTEyMi40NjA5OTldLCBbMzcuNzcyNzIsIC0xMjIuNDYxMDM3XSwgWzM3Ljc3MjY1OSwgLTEyMi40NjEwODNdLCBbMzcuNzcyNzA4LCAtMTIyLjQ2MTE0NF0sIFszNy43NzI2NTUsIC0xMjIuNDYxMTc1XSwgWzM3Ljc3MjU3OSwgLTEyMi40NjEyMTNdLCBbMzcuNzcyNTQ4LCAtMTIyLjQ2MTIyOF0sIFszNy43NzI0MDcsIC0xMjIuNDYxMzM1XSwgWzM3Ljc3MjI3NCwgLTEyMi40NjE1MV0sIFszNy43NzIxNzgsIC0xMjIuNDYxNzE2XSwgWzM3Ljc3MjA4MywgLTEyMi40NjE5M10sIFszNy43NzE5NjUsIC0xMjIuNDYyMDldLCBbMzcuNzcxOTAzLCAtMTIyLjQ2MjE0M10sIFszNy43NzE5MTUsIC0xMjIuNDYyMTgyXSwgWzM3Ljc3MTkzNCwgLTEyMi40NjIyNjZdLCBbMzcuNzcxODM1LCAtMTIyLjQ2MjMwNF0sIFszNy43NzE3NTksIC0xMjIuNDYyMzQyXSwgWzM3Ljc3MTY4NiwgLTEyMi40NjIzNTddLCBbMzcuNzcxNzM5LCAtMTIyLjQ2MjUxXSwgWzM3Ljc3MTY1MiwgLTEyMi40NjI1NzFdLCBbMzcuNzcxNDgsIC0xMjIuNDYyNjU1XSwgWzM3Ljc3MTQ1NywgLTEyMi40NjI3XSwgWzM3Ljc3MTQ0MiwgLTEyMi40NjI4NTNdLCBbMzcuNzcxNDI3LCAtMTIyLjQ2MzA3NF0sIFszNy43NzEyODYsIC0xMjIuNDYzMTJdLCBbMzcuNzcxMjA5LCAtMTIyLjQ2MzI1XSwgWzM3Ljc3MTE3NSwgLTEyMi40NjM1MDldLCBbMzcuNzcxMTcxLCAtMTIyLjQ2MzczOF0sIFszNy43NzExNTYsIC0xMjIuNDYzOTU5XSwgWzM3Ljc3MTExNCwgLTEyMi40NjQxMjddLCBbMzcuNzcxMDE4LCAtMTIyLjQ2NDMxOF0sIFszNy43NzA5MzEsIC0xMjIuNDY0NTc3XSwgWzM3Ljc3MDYyNiwgLTEyMi40NjUwNV0sIFszNy43NzA0MjMsIC0xMjIuNDY1MTA0XSwgWzM3Ljc3MDMxMywgLTEyMi40NjUwOTZdLCBbMzcuNzcwMjM2LCAtMTIyLjQ2NDk1MV0sIFszNy43NzAwOTIsIC0xMjIuNDY0Nzc2XSwgWzM3Ljc2OTk1LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk4MDIsIC0xMjIuNDY0NDg2XSwgWzM3Ljc2OTcyNSwgLTEyMi40NjQ0N10sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NzYsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTc5OCwgLTEyMi40NjQ2NjldLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk4NjMsIC0xMjIuNDY0ODgyXSwgWzM3Ljc2OTk1OCwgLTEyMi40NjUwMTJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk4NjMsIC0xMjIuNDY0ODgyXSwgWzM3Ljc2OTgzMiwgLTEyMi40NjQ3OThdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Njk1LCAtMTIyLjQ2NDU3XSwgWzM3Ljc2OTcyNSwgLTEyMi40NjQ0N10sIFszNy43Njk4MDIsIC0xMjIuNDY0NDg2XSwgWzM3Ljc2OTk1LCAtMTIyLjQ2NDYwOF0sIFszNy43NzAwOTIsIC0xMjIuNDY0Nzc2XSwgWzM3Ljc3MDIzNiwgLTEyMi40NjQ5NTFdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzA0MjMsIC0xMjIuNDY1MTA0XSwgWzM3Ljc3MDYyNiwgLTEyMi40NjUwNV0sIFszNy43NzA3OTcsIC0xMjIuNDY1MTM0XSwgWzM3Ljc3MDk0NiwgLTEyMi40NjUxOTVdLCBbMzcuNzcxMDYsIC0xMjIuNDY1MTg4XSwgWzM3Ljc3MTIyNCwgLTEyMi40NjUxODhdLCBbMzcuNzcxMzY2LCAtMTIyLjQ2NTE5NV0sIFszNy43NzE1NzUsIC0xMjIuNDY1MjY0XSwgWzM3Ljc3MTc2NiwgLTEyMi40NjUyNzldLCBbMzcuNzcxOTY1LCAtMTIyLjQ2NTMxXSwgWzM3Ljc3MjExMywgLTEyMi40NjUwNjZdLCBbMzcuNzcyMTU5LCAtMTIyLjQ2NDk3NF0sIFszNy43NzIxODIsIC0xMjIuNDY0ODI5XSwgWzM3Ljc3MjI3LCAtMTIyLjQ2NDcxNV0sIFszNy43NzIzMzEsIC0xMjIuNDY0Njk5XSwgWzM3Ljc3MjM4NCwgLTEyMi40NjQ2ODRdLCBbMzcuNzcyNDYsIC0xMjIuNDY0NjU0XSwgWzM3Ljc3MjQzLCAtMTIyLjQ2NDUyNF0sIFszNy43NzIzOTksIC0xMjIuNDY0NDAyXSwgWzM3Ljc3MjM2NSwgLTEyMi40NjQyNzJdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjksIC0xMjIuNDY0MDQzXSwgWzM3Ljc3MjQzLCAtMTIyLjQ2NDAxM10sIFszNy43NzI1MjksIC0xMjIuNDY0MDI4XSwgWzM3Ljc3MjYwOSwgLTEyMi40NjM5OTddLCBbMzcuNzcyODcyLCAtMTIyLjQ2Mzg5OF0sIFszNy43NzI5MywgLTEyMi40NjM4Nl0sIFszNy43NzI5OTEsIC0xMjIuNDYzODE0XSwgWzM3Ljc3MzEwNSwgLTEyMi40NjM3NDZdLCBbMzcuNzczMTg5LCAtMTIyLjQ2MzczOF0sIFszNy43NzMyODEsIC0xMjIuNDYzNzM4XSwgWzM3Ljc3MzQwNiwgLTEyMi40NjM3NjldLCBbMzcuNzczNDE0LCAtMTIyLjQ2MzcyM10sIFszNy43NzM0NDgsIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzQ5LCAtMTIyLjQ2MzY2OV0sIFszNy43NzM1MzYsIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzY1MSwgLTEyMi40NjM2NjJdLCBbMzcuNzczNjM1LCAtMTIyLjQ2Mzc2OV0sIFszNy43NzQyLCAtMTIyLjQ2MzgwN10sIFszNy43NzUzNzEsIC0xMjIuNDYzODkxXSwgWzM3Ljc3NTQ1OSwgLTEyMi40NjM4OThdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwXzU4ZjIxNjQ2ZGFlMTQwODlhYjI4ZDY1Y2NmODVhN2E4LmFkZExheWVyKHBvbHlfbGluZV8wMzI2MjVlNDU3ZTQ0MDVlYWYxNTAxYzA1MDQ2NGM2YSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvc2NyaXB0PgogICAgICAgIA==" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>




```python
bike_opt = optimize_stops(home, stops, stop_labels = stop_labels,costing = 'bicycle')
print bike_opt['order']
print str(bike_opt['time']) + ' minutes'
print str(bike_opt['length']) + ' km'
```

    ['Home', 'Pizzetta', 'Lamps Plus', 'Toy Boat', "Noah's Bagels", 'Arguello Market', 'de Young Museum', 'Home']
    29 minutes
    11.097 km
    


```python
bike_1_map=plot_stops(bike_opt['points'][:-1], zoom_level = 14, tiles = 'Stamen Watercolor', \
                labels = bike_opt['order'][:-1], line_coords = bike_opt['line'], point_colors=['black']+len(stops)*['red'])
bike_1_map
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzU5MDFiZjk2ODE1ZDQ2YzY4NTZkNmM0MThiODg5YjBkIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF81OTAxYmY5NjgxNWQ0NmM2ODU2ZDZjNDE4Yjg4OWIwZCIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF81OTAxYmY5NjgxNWQ0NmM2ODU2ZDZjNDE4Yjg4OWIwZCA9IEwubWFwKCdtYXBfNTkwMWJmOTY4MTVkNDZjNjg1NmQ2YzQxOGI4ODliMGQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfNzlhNjJmYmZhNDNlNDE0MDg3MzA0NTM1OTBiY2Y2N2MgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF81OTAxYmY5NjgxNWQ0NmM2ODU2ZDZjNDE4Yjg4OWIwZCk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNTAwNTFiY2UyMThkNDI4YmFjZmYxODA4MmE0YmY4MTUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNTkwMWJmOTY4MTVkNDZjNjg1NmQ2YzQxOGI4ODliMGQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNThmYTY3MGUzMmQzNGJjNjg5YTVkYzgzMmQ2OTExMmMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzUwMDUxYmNlMjE4ZDQyOGJhY2ZmMTgwODJhNGJmODE1LnNldEljb24oaWNvbl81OGZhNjcwZTMyZDM0YmM2ODlhNWRjODMyZDY5MTEyYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ExOTgwNTEwNmVmZDRlMjY4YWVjODdjYjZjOTcwM2U0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA4OGY4MjYzY2FkNzRiMWZiNDEzMTc0YjU0ODRjOWU3ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8wODhmODI2M2NhZDc0YjFmYjQxMzE3NGI1NDg0YzllNyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hMTk4MDUxMDZlZmQ0ZTI2OGFlYzg3Y2I2Yzk3MDNlNC5zZXRDb250ZW50KGh0bWxfMDg4ZjgyNjNjYWQ3NGIxZmI0MTMxNzRiNTQ4NGM5ZTcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl81MDA1MWJjZTIxOGQ0MjhiYWNmZjE4MDgyYTRiZjgxNS5iaW5kUG9wdXAocG9wdXBfYTE5ODA1MTA2ZWZkNGUyNjhhZWM4N2NiNmM5NzAzZTQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9jNDI1NDc4ODkyMDA0NjNkYjhkODk0NDc3MzE5YjI2NiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MzcxLC0xMjIuNDgzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNTkwMWJmOTY4MTVkNDZjNjg1NmQ2YzQxOGI4ODliMGQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNGIzNjIwNmMyZWVkNDc4NmIzNDIzODU1NTY0MzRkNDMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9jNDI1NDc4ODkyMDA0NjNkYjhkODk0NDc3MzE5YjI2Ni5zZXRJY29uKGljb25fNGIzNjIwNmMyZWVkNDc4NmIzNDIzODU1NTY0MzRkNDMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83MGU0ZjA3YjlkNjI0MDhhOWRjODFjM2RhMWQ3NzZjMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iZGZiZmUyOWJkNWE0MzEyOGYzMjEzNmY2OWQ1NzY1ZSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYmRmYmZlMjliZDVhNDMxMjhmMzIxMzZmNjlkNTc2NWUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIFBpenpldHRhPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzcwZTRmMDdiOWQ2MjQwOGE5ZGM4MWMzZGExZDc3NmMwLnNldENvbnRlbnQoaHRtbF9iZGZiZmUyOWJkNWE0MzEyOGYzMjEzNmY2OWQ1NzY1ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2M0MjU0Nzg4OTIwMDQ2M2RiOGQ4OTQ0NzczMTliMjY2LmJpbmRQb3B1cChwb3B1cF83MGU0ZjA3YjlkNjI0MDhhOWRjODFjM2RhMWQ3NzZjMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2I5MmUxOGZjYzg5MzRkMGI4NTg4NTVmZGVhZGI1YmMyID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgxMTMsLTEyMi40Njk5NV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzU5MDFiZjk2ODE1ZDQ2YzY4NTZkNmM0MThiODg5YjBkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzRiNWY3NWE1MzI5NDQ4ZTRhOGZlZmUyNDc4N2JkMDVjID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfYjkyZTE4ZmNjODkzNGQwYjg1ODg1NWZkZWFkYjViYzIuc2V0SWNvbihpY29uXzRiNWY3NWE1MzI5NDQ4ZTRhOGZlZmUyNDc4N2JkMDVjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODRlMzgwYmRkNmI1NDIxNGI3OTc5MTdmMDVhOGVjYjEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmRiMmI5YTg0NWI3NDI5YzgxN2U0NjNhNDg2ODhjYjIgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzJkYjJiOWE4NDViNzQyOWM4MTdlNDYzYTQ4Njg4Y2IyIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBMYW1wcyBQbHVzPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzg0ZTM4MGJkZDZiNTQyMTRiNzk3OTE3ZjA1YThlY2IxLnNldENvbnRlbnQoaHRtbF8yZGIyYjlhODQ1Yjc0MjljODE3ZTQ2M2E0ODY4OGNiMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyX2I5MmUxOGZjYzg5MzRkMGI4NTg4NTVmZGVhZGI1YmMyLmJpbmRQb3B1cChwb3B1cF84NGUzODBiZGQ2YjU0MjE0Yjc5NzkxN2YwNWE4ZWNiMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzVkYTFlMTI2MWY3MjQyMmI4YjNlMDM3MTVlMmI4MjZiID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgyNzgsLTEyMi40NjM1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzU5MDFiZjk2ODE1ZDQ2YzY4NTZkNmM0MThiODg5YjBkKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2RiOWFjZmEyNzM4YzRmZWZhMzczMzA4MzM5Nzc1MzU2ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNWRhMWUxMjYxZjcyNDIyYjhiM2UwMzcxNWUyYjgyNmIuc2V0SWNvbihpY29uX2RiOWFjZmEyNzM4YzRmZWZhMzczMzA4MzM5Nzc1MzU2KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjE2MzU2YWRmNTIyNDA3MWJkMTdiMDhmMTcyNDg0ZmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmMwNTE1MWZiZTkwNGYzOWEwYjE4NjU2NGFkMjQ1ZGEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzZjMDUxNTFmYmU5MDRmMzlhMGIxODY1NjRhZDI0NWRhIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yMTYzNTZhZGY1MjI0MDcxYmQxN2IwOGYxNzI0ODRmZS5zZXRDb250ZW50KGh0bWxfNmMwNTE1MWZiZTkwNGYzOWEwYjE4NjU2NGFkMjQ1ZGEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl81ZGExZTEyNjFmNzI0MjJiOGIzZTAzNzE1ZTJiODI2Yi5iaW5kUG9wdXAocG9wdXBfMjE2MzU2YWRmNTIyNDA3MWJkMTdiMDhmMTcyNDg0ZmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85MjAxZmRkYjJkZGQ0NDM1YjBkMTEwMjc5MzU3MmRmOCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81OTAxYmY5NjgxNWQ0NmM2ODU2ZDZjNDE4Yjg4OWIwZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8xMjI1MDEwMTRmZjQ0NTY3OTI1MTZiY2IyN2I5NmJjZiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzkyMDFmZGRiMmRkZDQ0MzViMGQxMTAyNzkzNTcyZGY4LnNldEljb24oaWNvbl8xMjI1MDEwMTRmZjQ0NTY3OTI1MTZiY2IyN2I5NmJjZik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NlMjRhZjM2MTFhMDRhNjZiZTVjNzgwZDBlOGM0ZGU1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M2NzEwZTU0ZTRjYTRmZDJhMjg1ZTY0YTJlYzYzNjJmID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9jNjcxMGU1NGU0Y2E0ZmQyYTI4NWU2NGEyZWM2MzYyZiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgTm9haCYjMzk7cyBCYWdlbHM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfY2UyNGFmMzYxMWEwNGE2NmJlNWM3ODBkMGU4YzRkZTUuc2V0Q29udGVudChodG1sX2M2NzEwZTU0ZTRjYTRmZDJhMjg1ZTY0YTJlYzYzNjJmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfOTIwMWZkZGIyZGRkNDQzNWIwZDExMDI3OTM1NzJkZjguYmluZFBvcHVwKHBvcHVwX2NlMjRhZjM2MTFhMDRhNjZiZTVjNzgwZDBlOGM0ZGU1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMmQxZTE3NTk2MGMzNDU3ZDg0ZWY2OTcyNWQ1ZTlmMTAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNTkwMWJmOTY4MTVkNDZjNjg1NmQ2YzQxOGI4ODliMGQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZTY2YmU4NmUwNzU4NDk2OWE0NDBkYzVlMDFkMjQ2ZDUgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8yZDFlMTc1OTYwYzM0NTdkODRlZjY5NzI1ZDVlOWYxMC5zZXRJY29uKGljb25fZTY2YmU4NmUwNzU4NDk2OWE0NDBkYzVlMDFkMjQ2ZDUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNTJkZjMzZjI4NDM0Nzc2YWQ1MmIzNDQ2MmRjMzVkOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84MTExN2MyYTkzOGI0MmQ4ODY0YWUwY2RiNWJhM2E1ZiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfODExMTdjMmE5MzhiNDJkODg2NGFlMGNkYjViYTNhNWYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIEFyZ3VlbGxvIE1hcmtldDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xNTJkZjMzZjI4NDM0Nzc2YWQ1MmIzNDQ2MmRjMzVkOS5zZXRDb250ZW50KGh0bWxfODExMTdjMmE5MzhiNDJkODg2NGFlMGNkYjViYTNhNWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8yZDFlMTc1OTYwYzM0NTdkODRlZjY5NzI1ZDVlOWYxMC5iaW5kUG9wdXAocG9wdXBfMTUyZGYzM2YyODQzNDc3NmFkNTJiMzQ0NjJkYzM1ZDkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85MWQxZjEzODU0YmE0ZWExOWQ5OTAwNzYyNzBkZDIzOCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDAyLC0xMjIuNDY1NjFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF81OTAxYmY5NjgxNWQ0NmM2ODU2ZDZjNDE4Yjg4OWIwZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl80MWVjYThkNmZkNDg0YWQwYmJjMWUyYzViNjVjZWQzMSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzkxZDFmMTM4NTRiYTRlYTE5ZDk5MDA3NjI3MGRkMjM4LnNldEljb24oaWNvbl80MWVjYThkNmZkNDg0YWQwYmJjMWUyYzViNjVjZWQzMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Q5NTcwMTFkMzVkNDQyNmQ5MmY1MDdjNzI1MTE2OTJmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I5MzQyMjViM2QyNzQzMjRiMDEyNDZmNjQyZGM3OTFjID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9iOTM0MjI1YjNkMjc0MzI0YjAxMjQ2ZjY0MmRjNzkxYyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgZGUgWW91bmcgTXVzZXVtPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q5NTcwMTFkMzVkNDQyNmQ5MmY1MDdjNzI1MTE2OTJmLnNldENvbnRlbnQoaHRtbF9iOTM0MjI1YjNkMjc0MzI0YjAxMjQ2ZjY0MmRjNzkxYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzkxZDFmMTM4NTRiYTRlYTE5ZDk5MDA3NjI3MGRkMjM4LmJpbmRQb3B1cChwb3B1cF9kOTU3MDExZDM1ZDQ0MjZkOTJmNTA3YzcyNTExNjkyZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzg2MjdmOTA1Mzk5ZjQxNTdiYTUzNjIyYzBiOGZmNjUyID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkwMDYsIC0xMjIuNDY2MzAxXSwgWzM3Ljc3ODk1NywgLTEyMi40NjczNzddLCBbMzcuNzc4OTA3LCAtMTIyLjQ2ODQ0NV0sIFszNy43Nzg4NjEsIC0xMjIuNDY5NTEzXSwgWzM3Ljc3ODgxMiwgLTEyMi40NzA1ODldLCBbMzcuNzc4NzgxLCAtMTIyLjQ3MTIzXSwgWzM3Ljc3ODc2MiwgLTEyMi40NzE2NTddLCBbMzcuNzc4NzU1LCAtMTIyLjQ3MTg0XSwgWzM3Ljc3ODc0MywgLTEyMi40NzIxMjNdLCBbMzcuNzc4NzM2LCAtMTIyLjQ3MjI2XSwgWzM3Ljc3ODcxMywgLTEyMi40NzI3MjVdLCBbMzcuNzc4NjYzLCAtMTIyLjQ3Mzg0N10sIFszNy43Nzg2MSwgLTEyMi40NzQ5NzZdLCBbMzcuNzc4NTY0LCAtMTIyLjQ3NjA0NF0sIFszNy43Nzg1MTQsIC0xMjIuNDc3MTEyXSwgWzM3Ljc3ODQ2NSwgLTEyMi40NzgxODhdLCBbMzcuNzc4NDE1LCAtMTIyLjQ3OTI1Nl0sIFszNy43NzgzNjksIC0xMjIuNDgwMzMyXSwgWzM3Ljc3ODMyLCAtMTIyLjQ4MTRdLCBbMzcuNzc4MjcsIC0xMjIuNDgyNDY4XSwgWzM3Ljc4MDEzMiwgLTEyMi40ODI2MDVdLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgyMTY5LCAtMTIyLjQ4MTY3NV0sIFszNy43ODIyMTUsIC0xMjIuNDgwNjA3XSwgWzM3Ljc4MjI2NCwgLTEyMi40Nzk1MzFdLCBbMzcuNzgyMzE0LCAtMTIyLjQ3ODQ2M10sIFszNy43ODIzNjMsIC0xMjIuNDc3Mzk1XSwgWzM3Ljc4MjQwOSwgLTEyMi40NzYzMTldLCBbMzcuNzgyNDU5LCAtMTIyLjQ3NTI1MV0sIFszNy43ODI1MTIsIC0xMjIuNDc0MTI5XSwgWzM3Ljc4MjU2NiwgLTEyMi40NzMwMDhdLCBbMzcuNzgyNTg1LCAtMTIyLjQ3MjU0Ml0sIFszNy43ODI1OTIsIC0xMjIuNDcyMzk3XSwgWzM3Ljc4MjYwNCwgLTEyMi40NzIxXSwgWzM3Ljc4MjYxMSwgLTEyMi40NzE5MzJdLCBbMzcuNzgyNjYxLCAtMTIyLjQ3MDg2NF0sIFszNy43ODI3MDcsIC0xMjIuNDY5Nzg4XSwgWzM3Ljc4MjM4MiwgLTEyMi40Njk3NjVdLCBbMzcuNzgxMTUsIC0xMjIuNDY5NzA0XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODIzODIsIC0xMjIuNDY5NzY1XSwgWzM3Ljc4MjcwNywgLTEyMi40Njk3ODhdLCBbMzcuNzgyNzU2LCAtMTIyLjQ2ODcyXSwgWzM3Ljc4MjgwNiwgLTEyMi40Njc2NTJdLCBbMzcuNzgyODU1LCAtMTIyLjQ2NjU4NF0sIFszNy43ODI5MDEsIC0xMjIuNDY1NTA4XSwgWzM3Ljc4Mjk1MSwgLTEyMi40NjQ0NF0sIFszNy43ODMsIC0xMjIuNDYzMzcyXSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODMsIC0xMjIuNDYzMzcyXSwgWzM3Ljc4MzA1LCAtMTIyLjQ2MjI5Nl0sIFszNy43ODMwOTYsIC0xMjIuNDYxMjI4XSwgWzM3Ljc4MzE0NSwgLTEyMi40NjAxNTJdLCBbMzcuNzgzMTk1LCAtMTIyLjQ1OTAzMV0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzgyNCwgLTEyMi40NTkwNzZdLCBbMzcuNzgzODc4LCAtMTIyLjQ1Nzk0XSwgWzM3Ljc4MzkyNywgLTEyMi40NTY4MzNdLCBbMzcuNzgzOTc3LCAtMTIyLjQ1NTczNV0sIFszNy43ODQwMywgLTEyMi40NTQ2MjhdLCBbMzcuNzg0MDM4LCAtMTIyLjQ1NDQxNV0sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDA1MywgLTEyMi40NTQwMzNdLCBbMzcuNzg0MDU3LCAtMTIyLjQ1Mzg0M10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MjY3LCAtMTIyLjQ1MzY4Ml0sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0NjE0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0OTc2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MzU4LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NTU2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1NzEzLCAtMTIyLjQ1MzQzMV0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTkxMSwgLTEyMi40NTE3OThdLCBbMzcuNzg1OTExLCAtMTIyLjQ1MTc5OF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDA1NywgLTEyMi40NTM4NDNdLCBbMzcuNzg0MDUzLCAtMTIyLjQ1NDAzM10sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDAzOCwgLTEyMi40NTQ0MTVdLCBbMzcuNzg0MDMsIC0xMjIuNDU0NjI4XSwgWzM3Ljc4Mzk3NywgLTEyMi40NTU3MzVdLCBbMzcuNzgzOTI3LCAtMTIyLjQ1NjgzM10sIFszNy43ODM4NzgsIC0xMjIuNDU3OTRdLCBbMzcuNzgzODI0LCAtMTIyLjQ1OTA3Nl0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzE5NSwgLTEyMi40NTkwMzFdLCBbMzcuNzgyNzk4LCAtMTIyLjQ1OTAwOF0sIFszNy43ODI3NiwgLTEyMi40NTldLCBbMzcuNzgxODQ4LCAtMTIyLjQ1ODkzOV0sIFszNy43ODEzMzMsIC0xMjIuNDU4OTAxXSwgWzM3Ljc4MTIxMSwgLTEyMi40NTg4OTNdLCBbMzcuNzgwNTc0LCAtMTIyLjQ1ODg0OF0sIFszNy43Nzk3MzEsIC0xMjIuNDU4Nzg3XSwgWzM3Ljc3OTM1NywgLTEyMi40NTg3NTZdLCBbMzcuNzc4ODU4LCAtMTIyLjQ1ODcxOF0sIFszNy43Nzg3NzQsIC0xMjIuNDU4NzE4XSwgWzM3Ljc3ODAxMSwgLTEyMi40NTg2NTddLCBbMzcuNzc3NzM2LCAtMTIyLjQ1ODY0Ml0sIFszNy43Nzc1OTUsIC0xMjIuNDU4NjM0XSwgWzM3Ljc3NzI4NiwgLTEyMi40NTg2MTFdLCBbMzcuNzc3MTI2LCAtMTIyLjQ1ODU5Nl0sIFszNy43NzY4NDQsIC0xMjIuNDU4NTczXSwgWzM3Ljc3NjE4NywgLTEyMi40NTg1MjddLCBbMzcuNzc2MTE5LCAtMTIyLjQ1ODUyN10sIFszNy43NzU2MTUsIC0xMjIuNDU4NDg5XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzUyNDUsIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NDk4MiwgLTEyMi40NTg0NDNdLCBbMzcuNzc0NzAzLCAtMTIyLjQ1ODQyXSwgWzM3Ljc3NDQxLCAtMTIyLjQ1ODQwNV0sIFszNy43NzQyOTksIC0xMjIuNDU4MzldLCBbMzcuNzc0MjE1LCAtMTIyLjQ1ODM4Ml0sIFszNy43NzQxNzMsIC0xMjIuNDU4Mzc1XSwgWzM3Ljc3NDExNiwgLTEyMi40NTgzODJdLCBbMzcuNzc0MDY2LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDAxNywgLTEyMi40NTg0MDVdLCBbMzcuNzczOTYzLCAtMTIyLjQ1ODQyOF0sIFszNy43NzM5MDIsIC0xMjIuNDU4NDY2XSwgWzM3Ljc3Mzg0MSwgLTEyMi40NTg1MTJdLCBbMzcuNzczNzg4LCAtMTIyLjQ1ODU1OF0sIFszNy43NzM2NDMsIC0xMjIuNDU4Njk1XSwgWzM3Ljc3MzUzMiwgLTEyMi40NTg4MDJdLCBbMzcuNzczNDQxLCAtMTIyLjQ1ODg4Nl0sIFszNy43NzMzNDksIC0xMjIuNDU4OTc3XSwgWzM3Ljc3MzI5NiwgLTEyMi40NTkwMTVdLCBbMzcuNzczMjYyLCAtMTIyLjQ1OTAzMV0sIFszNy43NzMyMjcsIC0xMjIuNDU5MDM4XSwgWzM3Ljc3MzIwOCwgLTEyMi40NTkxNDVdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMwMzYsIC0xMjIuNDYwMzk2XSwgWzM3Ljc3MzAxNCwgLTEyMi40NjA1MTFdLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzI5NTMsIC0xMjIuNDYwNzE3XSwgWzM3Ljc3MjkxOCwgLTEyMi40NjA3OTNdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI4MTksIC0xMjIuNDYwOTQ2XSwgWzM3Ljc3Mjc2NiwgLTEyMi40NjA5OTldLCBbMzcuNzcyNzIsIC0xMjIuNDYxMDM3XSwgWzM3Ljc3MjY1OSwgLTEyMi40NjEwODNdLCBbMzcuNzcyNTk4LCAtMTIyLjQ2MTEyMV0sIFszNy43NzI1MzcsIC0xMjIuNDYxMTU5XSwgWzM3Ljc3MjQ2NCwgLTEyMi40NjEyMTNdLCBbMzcuNzcyNDAzLCAtMTIyLjQ2MTI2Nl0sIFszNy43NzIzNDYsIC0xMjIuNDYxMzE5XSwgWzM3Ljc3MjI4NSwgLTEyMi40NjEzODhdLCBbMzcuNzcyMjI4LCAtMTIyLjQ2MTQ3Ml0sIFszNy43NzIxNzEsIC0xMjIuNDYxNTY0XSwgWzM3Ljc3MjEyMSwgLTEyMi40NjE2NjNdLCBbMzcuNzcyMDM3LCAtMTIyLjQ2MTgzMV0sIFszNy43NzIwMDMsIC0xMjIuNDYxODkyXSwgWzM3Ljc3MTk2OCwgLTEyMi40NjE5MzddLCBbMzcuNzcxOTE1LCAtMTIyLjQ2MTk4M10sIFszNy43NzE4NzMsIC0xMjIuNDYyMDA2XSwgWzM3Ljc3MTgzMSwgLTEyMi40NjIwMjldLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE3NTUsIC0xMjIuNDYxOTIyXSwgWzM3Ljc3MTcyNCwgLTEyMi40NjE3MzldLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE1NDUsIC0xMjIuNDYwNjMzXSwgWzM3Ljc3MTQ0MiwgLTEyMi40NTk5NTRdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzEzMzksIC0xMjIuNDU5MzQzXSwgWzM3Ljc3MTMxNiwgLTEyMi40NTkxNzZdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEyNTEsIC0xMjIuNDU5MTk4XSwgWzM3Ljc3MTIyNCwgLTEyMi40NTkyMDZdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEwNDEsIC0xMjIuNDU5MjgyXSwgWzM3Ljc3MDk2OSwgLTEyMi40NTkzMjFdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA4MjgsIC0xMjIuNDU5NDA0XSwgWzM3Ljc3MDc2NywgLTEyMi40NTk0NV0sIFszNy43NzA3MDYsIC0xMjIuNDU5NTExXSwgWzM3Ljc3MDY1MiwgLTEyMi40NTk1NzJdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA1OTksIC0xMjIuNDU5NjQxXSwgWzM3Ljc3MDU1MywgLTEyMi40NTk3MV0sIFszNy43NzA1MTEsIC0xMjIuNDU5Nzk0XSwgWzM3Ljc3MDQ3MywgLTEyMi40NTk4ODVdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0MTYsIC0xMjIuNDYwMDc2XSwgWzM3Ljc3MDM5NywgLTEyMi40NjAxOV0sIFszNy43NzAzNzgsIC0xMjIuNDYwMzA1XSwgWzM3Ljc3MDM2MiwgLTEyMi40NjA0NV0sIFszNy43NzAzNTEsIC0xMjIuNDYwNTk1XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjA3NF0sIFszNy43NzAzMzIsIC0xMjIuNDYwODc3XSwgWzM3Ljc3MDMzNiwgLTEyMi40NjEwMTRdLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzNDMsIC0xMjIuNDYxMjg5XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjE0MTldLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMTMsIC0xMjIuNDYxNjc4XSwgWzM3Ljc3MDI5LCAtMTIyLjQ2MThdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyMzYsIC0xMjIuNDYyMDUyXSwgWzM3Ljc2OTk5NiwgLTEyMi40NjMwNTldLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk3MTgsIC0xMjIuNDY0MjY0XSwgWzM3Ljc2OTY4LCAtMTIyLjQ2NDQwMl0sIFszNy43Njk2NjgsIC0xMjIuNDY0NDQ4XSwgWzM3Ljc2OTYzOCwgLTEyMi40NjQ1MjRdLCBbMzcuNzY5Njk1LCAtMTIyLjQ2NDU3XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTgzMiwgLTEyMi40NjQ3OThdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTk1OCwgLTEyMi40NjUwMTJdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTc5OCwgLTEyMi40NjQ2NjldLCBbMzcuNzY5NzYsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk2MzgsIC0xMjIuNDY0NTI0XSwgWzM3Ljc2OTY2OCwgLTEyMi40NjQ0NDhdLCBbMzcuNzY5NjgsIC0xMjIuNDY0NDAyXSwgWzM3Ljc2OTcxOCwgLTEyMi40NjQyNjRdLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk5OTYsIC0xMjIuNDYzMDU5XSwgWzM3Ljc3MDIzNiwgLTEyMi40NjIwNTJdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyOSwgLTEyMi40NjE4XSwgWzM3Ljc3MDMxMywgLTEyMi40NjE2NzhdLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMzksIC0xMjIuNDYxNDE5XSwgWzM3Ljc3MDM0MywgLTEyMi40NjEyODldLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzMzYsIC0xMjIuNDYxMDE0XSwgWzM3Ljc3MDMzMiwgLTEyMi40NjA4NzddLCBbMzcuNzcwMzM5LCAtMTIyLjQ2MDc0XSwgWzM3Ljc3MDM1MSwgLTEyMi40NjA1OTVdLCBbMzcuNzcwMzYyLCAtMTIyLjQ2MDQ1XSwgWzM3Ljc3MDM3OCwgLTEyMi40NjAzMDVdLCBbMzcuNzcwMzk3LCAtMTIyLjQ2MDE5XSwgWzM3Ljc3MDQxNiwgLTEyMi40NjAwNzZdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0NzMsIC0xMjIuNDU5ODg1XSwgWzM3Ljc3MDUxMSwgLTEyMi40NTk3OTRdLCBbMzcuNzcwNTUzLCAtMTIyLjQ1OTcxXSwgWzM3Ljc3MDU5OSwgLTEyMi40NTk2NDFdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA2NTIsIC0xMjIuNDU5NTcyXSwgWzM3Ljc3MDcwNiwgLTEyMi40NTk1MTFdLCBbMzcuNzcwNzY3LCAtMTIyLjQ1OTQ1XSwgWzM3Ljc3MDgyOCwgLTEyMi40NTk0MDRdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA5NjksIC0xMjIuNDU5MzIxXSwgWzM3Ljc3MTA0MSwgLTEyMi40NTkyODJdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEyMjQsIC0xMjIuNDU5MjA2XSwgWzM3Ljc3MTI1MSwgLTEyMi40NTkxOThdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEzMTYsIC0xMjIuNDU5MTc2XSwgWzM3Ljc3MTMzOSwgLTEyMi40NTkzNDNdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzE0NDIsIC0xMjIuNDU5OTU0XSwgWzM3Ljc3MTU0NSwgLTEyMi40NjA2MzNdLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE3MjQsIC0xMjIuNDYxNzM5XSwgWzM3Ljc3MTc1NSwgLTEyMi40NjE5MjJdLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE4MDgsIC0xMjIuNDYyMTgyXSwgWzM3Ljc3MTgzNSwgLTEyMi40NjIzMDRdLCBbMzcuNzcxOTc2LCAtMTIyLjQ2Mjg1M10sIFszNy43NzIwMjksIC0xMjIuNDYzMDUxXSwgWzM3Ljc3MjA4MywgLTEyMi40NjMyNV0sIFszNy43NzIxNDgsIC0xMjIuNDYzNDk0XSwgWzM3Ljc3MjI2NiwgLTEyMi40NjM5MTNdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjUsIC0xMjIuNDY0MjcyXSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjQ2LCAtMTIyLjQ2NDY1NF0sIFszNy43NzI0ODcsIC0xMjIuNDY0NzkxXSwgWzM3Ljc3MjUxLCAtMTIyLjQ2NDkyMV0sIFszNy43NzI1MzMsIC0xMjIuNDY1MDVdLCBbMzcuNzcyNTU2LCAtMTIyLjQ2NTE4XSwgWzM3Ljc3MjU2MywgLTEyMi40NjUyMjZdLCBbMzcuNzcyNTc1LCAtMTIyLjQ2NTMxXSwgWzM3Ljc3MjU5LCAtMTIyLjQ2NTQyNF0sIFszNy43NzI2MDIsIC0xMjIuNDY1NTM5XSwgWzM3Ljc3MjYwOSwgLTEyMi40NjU2NTNdLCBbMzcuNzcyNjEzLCAtMTIyLjQ2NTc0NV0sIFszNy43NzI2MTMsIC0xMjIuNDY1ODQ0XSwgWzM3Ljc3MjcxMiwgLTEyMi40NjU4NTFdLCBbMzcuNzcyNzg1LCAtMTIyLjQ2NTg1OV0sIFszNy43NzI5NTMsIC0xMjIuNDY1ODY3XSwgWzM3Ljc3MzE3LCAtMTIyLjQ2NTg4Ml0sIFszNy43NzM0MDMsIC0xMjIuNDY1ODk3XSwgWzM3Ljc3NTI3MiwgLTEyMi40NjYwMzRdLCBbMzcuNzc3MTM3LCAtMTIyLjQ2NjE2NF0sIFszNy43Nzg5MTUsIC0xMjIuNDY2Mjk0XSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwXzU5MDFiZjk2ODE1ZDQ2YzY4NTZkNmM0MThiODg5YjBkLmFkZExheWVyKHBvbHlfbGluZV84NjI3ZjkwNTM5OWY0MTU3YmE1MzYyMmMwYjhmZjY1Mik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvc2NyaXB0PgogICAgICAgIA==" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>



## Determining Stops and Order with Multiple People

Now that I have a working function that wraps Mapzen's optimize route service, I am ready to extend it to work with multiple people. The general approach I take is to first find the unique combinations that a list of stops can be split among a given number of people, and then determine which of these combinations minimizes the maximum time of any one person.

Note that there are many different minimization criteria that can be used when optimizing a set of routes between multiple people. In this case, I’m assuming that Celeste and I start our errands at the same time and that they are completed when the last person is done. The length of time until all the errands are done (the max time of any person) is what I am trying to minimize. However, a more typical usage would perhaps be to minimize the sum or cumulative amount of time that it takes for all of the salesman to visit the stops. Nonetheless, the function can pretty easily be tweaked for any optimization criteria.


### Unique ways that stops can be split
I use a function adapted from [here](http://stackoverflow.com/a/39199937/3776938) to find the unique ways in that a list of N elements can be partitioned into K groups. This function is written so that the order of groups or of elements within a group does not matter, as this is what the optimize route tool is going to determine! By this I mean that in terms of the input, ```[['A','B'],['C','D']]``` is considered identical to ```[['C','D'],['A','B']]``` as well as to ```[['B','A'],['C','D']]```.


```python
def sorted_k_partitions(seq, k):
    n = len(seq)
    working_partition = []

    def generate_partitions(i):
        if i >=  n:
            yield list(map(tuple, working_partition))
        else:
            if n - i > k - len(working_partition):
                for part in working_partition:
                    part.append(seq[i])
                    for bar in generate_partitions(i + 1):
                        yield bar
                    part.pop()

            if len(working_partition) < k:
                working_partition.append([seq[i]])
                for bar in generate_partitions(i + 1):
                    yield bar
                working_partition.pop()

    result = generate_partitions(0)

    # Sort the parts in each partition in shortlex order and then by the length of each part, 
    #and then lexicographically
    result = [sorted(ps, key = lambda p: (len(p), p)) for ps in result]
    result = sorted(result, key = lambda ps: (map(len, ps), ps))
    return result
```

I demonstrate an application of the function below, showing the 7 unique ways that 4 stops can be split among 2 people.


```python
for c in sorted_k_partitions(['A', 'B', 'C', 'D'], 2):
    print c
```

    [('A',), ('B', 'C', 'D')]
    [('B',), ('A', 'C', 'D')]
    [('C',), ('A', 'B', 'D')]
    [('D',), ('A', 'B', 'C')]
    [('A', 'B'), ('C', 'D')]
    [('A', 'C'), ('B', 'D')]
    [('A', 'D'), ('B', 'C')]
    

More generally, I build a matrix that shows the number of stop combinations and number of optimize route requests that need to be made based on the number of stops and the number of salesman. The first number (labeled "C") is the number of unique combinations and the second (labeled "R") is the number of requests, which is just the number of combinations multiplied by the number of salesmen. 


```python
num_test=6
nk_matrix=pd.DataFrame(index=range(1,num_test+1),columns=pd.MultiIndex.from_product([range(1,num_test+1),['C','R']]))

for n in range(1,num_test+1):
    for k in range(1,num_test+1):
        combos=sorted_k_partitions(range(1,k+1),n)
        nk_matrix.loc[n,(k,'C')]=len(combos)
        nk_matrix.loc[n,(k,'R')]=len([item for sublist in combos for item in sublist])

nk_matrix.index.name='# of Salesman'
nk_matrix.columns.names=['# of Stops',None]
nk_matrix
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th># of Stops</th>
      <th colspan="2" halign="left">1</th>
      <th colspan="2" halign="left">2</th>
      <th colspan="2" halign="left">3</th>
      <th colspan="2" halign="left">4</th>
      <th colspan="2" halign="left">5</th>
      <th colspan="2" halign="left">6</th>
    </tr>
    <tr>
      <th></th>
      <th>C</th>
      <th>R</th>
      <th>C</th>
      <th>R</th>
      <th>C</th>
      <th>R</th>
      <th>C</th>
      <th>R</th>
      <th>C</th>
      <th>R</th>
      <th>C</th>
      <th>R</th>
    </tr>
    <tr>
      <th># of Salesman</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>6</td>
      <td>7</td>
      <td>14</td>
      <td>15</td>
      <td>30</td>
      <td>31</td>
      <td>62</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>6</td>
      <td>18</td>
      <td>25</td>
      <td>75</td>
      <td>90</td>
      <td>270</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>4</td>
      <td>10</td>
      <td>40</td>
      <td>65</td>
      <td>260</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>4</td>
      <td>1</td>
      <td>5</td>
      <td>15</td>
      <td>75</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>4</td>
      <td>1</td>
      <td>5</td>
      <td>1</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>



### Optimizing Stops Among K People

I then write a function that wraps my single-person route optimization function. The function applies the original function to each unique way that the stops can be partitioned, and determines the partition that minimizes the maximum time of the travelers. The input is identical to the original function except for the ability to specify the number of salesmen. The output too, is nearly identical to the previous function returning trip length, optimized stop order, etc. However, now for each of these pieces of information, the function returns a list of values, where the length of the list is equal to the number of salesmen.


```python
def optimize_stops_mult(home, stops, num_travelers, costing = 'pedestrian', api_key = matrix_key, home_label = 'Home',
                  stop_labels = None):
    #get all possible options in which the stops can be broken up between the specified number of travelers
    options = sorted_k_partitions(stops, num_travelers)
    #create lists to store sublists of the time, name order, and point order for each option and traveler
    all_times = []
    all_orders = []
    all_points = []
    all_lines = []
    for option in options: #loop through each possible way to split the stops
        #create lists to store the time, name order, and point order for each traveler
        option_times = [] 
        option_orders = []
        option_points = []
        option_lines = []
        #calculate the optimal stop order for each traveler with each set of stop options
        #using the previously defined function
        #append relevant information to lists
        for traveler in option:
            sub_labels = [stop_labels[stops.index(x)] for x in traveler] if stop_labels else None

            result = optimize_stops(home = home, stops = list(traveler), costing = costing, api_key = api_key,
                                  home_label = home_label, stop_labels = sub_labels)
            option_times.append(result['time'])
            option_orders.append(result['order'])
            option_points.append(result['points'])
            option_lines.append(result['line'])

        all_times.append(option_times)
        all_orders.append(option_orders)
        all_points.append(option_points)
        all_lines.append(option_lines)

    #get the index of the option that minimizes the max of any time that a traveler takes
    minloc = np.argmin([max(time) for time in all_times])
    
    #return a dictionary of the stop order, points, and time for the optimized options
    opt_order = [x[1: -1] for x in all_orders[minloc]]
    opt_times = all_times[minloc]
    opt_points = [x[1: -1] for x in all_points[minloc]]
    home_point = [x[0] for x in all_points[minloc]][0]
    polylines = all_lines[minloc]
    return {'order': opt_order, 'time': opt_times, 'points': opt_points, 'home_point': home_point, 'lines':polylines}

```

I use the same set of 6 stops in the Inner Richmond that I used earlier, but now specify that there will be 2 travelers. I extract the ordered set of stops for each of the 2 travelers and the travel time for each, and then plot the stops and routes on a leaflet map.

As you can see, the stop order is returned as a list of two ordered sublists, indicating that the first person should go to Pizzetta and Lamps Plus and the second person should go to Toy Boat, Noah's Bagels, Arguello, Market, and the de Young Museum (in that order). One person is going to less  stops than the other, but some of the stops are also much further from home. The person that makes the two stop trip will spend 53 minutes and the person that makes the four stop trip will spend 68 minutes. 68 minutes is the minimum amount of time that the person with the longer trip takes in any combination ways that these stops can be partitioned.

In the map, the home location is shown in black, and each person's stops are shown in a different color. Stops are labeled with the stop name as well as the stop number (showing the order that the stops should be visited by each person).



```python
opt_2_people_walk = optimize_stops_mult(home, stops, num_travelers = 2, stop_labels = stop_labels)
```


```python
for i in opt_2_people_walk['order']:
    print i
```

    ['Lamps Plus', 'Pizzetta']
    ['de Young Museum', 'Arguello Market', "Noah's Bagels", 'Toy Boat']
    


```python
opt_2_people_walk['time']
```




    [53, 71]




```python
points = [[opt_2_people_walk['home_point']]] + opt_2_people_walk['points']
labels = [['Home']] + [[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_2_people_walk['order']]


m1 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels, line_coords = opt_2_people_walk['lines'])
m1
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwX2FjM2M4N2RjOTU5MDQ2NzdiZWQxZmYzMzM2NmU2NTU3IHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1NyIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1NyA9IEwubWFwKCdtYXBfYWMzYzg3ZGM5NTkwNDY3N2JlZDFmZjMzMzY2ZTY1NTcnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfNDIxY2ZiYjY3NTFkNDJkYjk3MGQ4YjA1OGFmYWY3MzUgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Nyk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZWY0MTNiNTc3MDUxNDE3Yjg4NzU5NzlhZjE4ZTc2OWYgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfYWMzYzg3ZGM5NTkwNDY3N2JlZDFmZjMzMzY2ZTY1NTcpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fYmVhOWI4NDliN2MwNGFjYjhiMjgwZWNmZDhiNTg1MmEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2VmNDEzYjU3NzA1MTQxN2I4ODc1OTc5YWYxOGU3NjlmLnNldEljb24oaWNvbl9iZWE5Yjg0OWI3YzA0YWNiOGIyODBlY2ZkOGI1ODUyYSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE3Y2ExMThiNjUyNzRlODlhMjgzMjUyNjMwYzEyZWNhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEyYjJmMWVjMWExYTRiNmQ5YjM0MmZlMjVkY2FlNTE4ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xMmIyZjFlYzFhMWE0YjZkOWIzNDJmZTI1ZGNhZTUxOCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xN2NhMTE4YjY1Mjc0ZTg5YTI4MzI1MjYzMGMxMmVjYS5zZXRDb250ZW50KGh0bWxfMTJiMmYxZWMxYTFhNGI2ZDliMzQyZmUyNWRjYWU1MTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9lZjQxM2I1NzcwNTE0MTdiODg3NTk3OWFmMThlNzY5Zi5iaW5kUG9wdXAocG9wdXBfMTdjYTExOGI2NTI3NGU4OWEyODMyNTI2MzBjMTJlY2EpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8xN2UxZDk2OWJiODI0NjU2YmNlZDIzZDVhOWIyODBhYiA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Nyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl84ZDliMGQxMDRiMzI0MGFmYjk5MjczZTIyMmEzOWVlNCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xN2UxZDk2OWJiODI0NjU2YmNlZDIzZDVhOWIyODBhYi5zZXRJY29uKGljb25fOGQ5YjBkMTA0YjMyNDBhZmI5OTI3M2UyMjJhMzllZTQpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iNjBmM2EwOTY3YTg0ZDM2YmFmNjVkNWI5MWYwYjRiYiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lZjA3NmE4M2E4Zjk0ZWQzYjIxODFhNDU1NTExNDE2NiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZWYwNzZhODNhOGY5NGVkM2IyMTgxYTQ1NTUxMTQxNjYiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBMYW1wcyBQbHVzPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2I2MGYzYTA5NjdhODRkMzZiYWY2NWQ1YjkxZjBiNGJiLnNldENvbnRlbnQoaHRtbF9lZjA3NmE4M2E4Zjk0ZWQzYjIxODFhNDU1NTExNDE2Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzE3ZTFkOTY5YmI4MjQ2NTZiY2VkMjNkNWE5YjI4MGFiLmJpbmRQb3B1cChwb3B1cF9iNjBmM2EwOTY3YTg0ZDM2YmFmNjVkNWI5MWYwYjRiYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2Y2NDViMjJhZDc2YjQ3ZjliNTNlN2E4OWRlZjUxOTM5ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgzNzEsLTEyMi40ODNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Nyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9kNDY0NjhkMTQyOWU0YzZhOTEwN2QxNzhlNGM3MDc3MyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9mNjQ1YjIyYWQ3NmI0N2Y5YjUzZTdhODlkZWY1MTkzOS5zZXRJY29uKGljb25fZDQ2NDY4ZDE0MjllNGM2YTkxMDdkMTc4ZTRjNzA3NzMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lNjFmNTUyMmI3ZmU0NDYyOTkzZTUwZWZmNTFkMGJhMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80OGQzYThiODdjMzU0NjMxOTQ3ZGJhMGNlNGZmZjIxYiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNDhkM2E4Yjg3YzM1NDYzMTk0N2RiYTBjZTRmZmYyMWIiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDIgLSBQaXp6ZXR0YTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lNjFmNTUyMmI3ZmU0NDYyOTkzZTUwZWZmNTFkMGJhMy5zZXRDb250ZW50KGh0bWxfNDhkM2E4Yjg3YzM1NDYzMTk0N2RiYTBjZTRmZmYyMWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9mNjQ1YjIyYWQ3NmI0N2Y5YjUzZTdhODlkZWY1MTkzOS5iaW5kUG9wdXAocG9wdXBfZTYxZjU1MjJiN2ZlNDQ2Mjk5M2U1MGVmZjUxZDBiYTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9kOTU2ODg5NzkyZjg0MGJiODA0MjgwZmNkZDZiMzMxYyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDAyLC0xMjIuNDY1NjFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Nyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl80MmZiMzUyYjk1OTg0NjIzOTZkNDU0MWM0YjYzOWU0NiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Q5NTY4ODk3OTJmODQwYmI4MDQyODBmY2RkNmIzMzFjLnNldEljb24oaWNvbl80MmZiMzUyYjk1OTg0NjIzOTZkNDU0MWM0YjYzOWU0Nik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzRiNGJhNjk5Y2I0MDRkMGY4YjFiM2YyYWM5NmQzMGZmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEzNjc2MjA2Yjg4MzRhOGViMWIwNzY0ODkxNzFlMjVlID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xMzY3NjIwNmI4ODM0YThlYjFiMDc2NDg5MTcxZTI1ZSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIGRlIFlvdW5nIE11c2V1bTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80YjRiYTY5OWNiNDA0ZDBmOGIxYjNmMmFjOTZkMzBmZi5zZXRDb250ZW50KGh0bWxfMTM2NzYyMDZiODgzNGE4ZWIxYjA3NjQ4OTE3MWUyNWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9kOTU2ODg5NzkyZjg0MGJiODA0MjgwZmNkZDZiMzMxYy5iaW5kUG9wdXAocG9wdXBfNGI0YmE2OTljYjQwNGQwZjhiMWIzZjJhYzk2ZDMwZmYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl80NTU0YmNlMWUyOGY0NjhhYmZkNTkxMTE2NmE0ZDNmOSA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3NTU4LC0xMjIuNDU4MzNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Nyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8zZWQ5N2FhODJiMTg0NGIwYmRlMzdmNWQ5YjA2N2I1NiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzQ1NTRiY2UxZTI4ZjQ2OGFiZmQ1OTExMTY2YTRkM2Y5LnNldEljb24oaWNvbl8zZWQ5N2FhODJiMTg0NGIwYmRlMzdmNWQ5YjA2N2I1Nik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzJmNDU0YTdjNTA3YTRiYWQ5OGIxOGRhZDYyYWFjY2ZhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEwOTJlOTg3ZDFkNzQ1NGFiNGJmNGMxNmVkYmI2MTJjID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xMDkyZTk4N2QxZDc0NTRhYjRiZjRjMTZlZGJiNjEyYyIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMiAtIEFyZ3VlbGxvIE1hcmtldDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yZjQ1NGE3YzUwN2E0YmFkOThiMThkYWQ2MmFhY2NmYS5zZXRDb250ZW50KGh0bWxfMTA5MmU5ODdkMWQ3NDU0YWI0YmY0YzE2ZWRiYjYxMmMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl80NTU0YmNlMWUyOGY0NjhhYmZkNTkxMTE2NmE0ZDNmOS5iaW5kUG9wdXAocG9wdXBfMmY0NTRhN2M1MDdhNGJhZDk4YjE4ZGFkNjJhYWNjZmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl80ZDY5MDZkYWM4MWI0NmQ4YjM3YTA0NGE1YmUwMzRmZCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Nyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl84NzU0ZWE0ZWJiNzQ0ZDQyYTIzMTMxZWU1MDcxMGFmMiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzRkNjkwNmRhYzgxYjQ2ZDhiMzdhMDQ0YTViZTAzNGZkLnNldEljb24oaWNvbl84NzU0ZWE0ZWJiNzQ0ZDQyYTIzMTMxZWU1MDcxMGFmMik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZhMWViNGM5YjU4ZDQ0ZDhiZWQzM2Y0MmFiYWRlZWRkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2VlZjU2ZDNiNzc0MzQ4ODBiZGI1ZmMwZTQ5OWQxNmRlID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9lZWY1NmQzYjc3NDM0ODgwYmRiNWZjMGU0OTlkMTZkZSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMyAtIE5vYWgmIzM5O3MgQmFnZWxzPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZhMWViNGM5YjU4ZDQ0ZDhiZWQzM2Y0MmFiYWRlZWRkLnNldENvbnRlbnQoaHRtbF9lZWY1NmQzYjc3NDM0ODgwYmRiNWZjMGU0OTlkMTZkZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzRkNjkwNmRhYzgxYjQ2ZDhiMzdhMDQ0YTViZTAzNGZkLmJpbmRQb3B1cChwb3B1cF82YTFlYjRjOWI1OGQ0NGQ4YmVkMzNmNDJhYmFkZWVkZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2NhN2RjNjBlMDM3NjRlYWQ4MTk5MGI2OTkwZjAyZDNmID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgyNzgsLTEyMi40NjM1MV0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwX2FjM2M4N2RjOTU5MDQ2NzdiZWQxZmYzMzM2NmU2NTU3KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzY3Zjk3ZmVmMTBiMTRhYzY4ZWY1YTgxODFjNTI2NTAyID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfY2E3ZGM2MGUwMzc2NGVhZDgxOTkwYjY5OTBmMDJkM2Yuc2V0SWNvbihpY29uXzY3Zjk3ZmVmMTBiMTRhYzY4ZWY1YTgxODFjNTI2NTAyKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmEzOWI1ZGE0MDczNGNiMmE2ODUyOTc4YzcyODgyYTYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjg3ZGQ5YzY3NjhkNDkzZmIzMzMxMWI0YTk4MGEwNmUgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sX2Y4N2RkOWM2NzY4ZDQ5M2ZiMzMzMTFiNGE5ODBhMDZlIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICA0IC0gVG95IEJvYXQ8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmEzOWI1ZGE0MDczNGNiMmE2ODUyOTc4YzcyODgyYTYuc2V0Q29udGVudChodG1sX2Y4N2RkOWM2NzY4ZDQ5M2ZiMzMzMTFiNGE5ODBhMDZlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfY2E3ZGM2MGUwMzc2NGVhZDgxOTkwYjY5OTBmMDJkM2YuYmluZFBvcHVwKHBvcHVwXzJhMzliNWRhNDA3MzRjYjJhNjg1Mjk3OGM3Mjg4MmE2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfNDk0NjQyYTBjYTczNDgwZjkwYjkzYjA4ODNjMzhiMjUgPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF0sIFszNy43ODA1MjksIC0xMjIuNDY0MjY0XSwgWzM3Ljc4MDk2NywgLTEyMi40NjQyOTVdLCBbMzcuNzgwOTE4LCAtMTIyLjQ2NTM2M10sIFszNy43ODA5MDIsIC0xMjIuNDY1NzE0XSwgWzM3Ljc4MDg2OCwgLTEyMi40NjY0MzldLCBbMzcuNzgwODUzLCAtMTIyLjQ2Njc5XSwgWzM3Ljc4MDgyMiwgLTEyMi40Njc1MDddLCBbMzcuNzgwNzczLCAtMTIyLjQ2ODU3NV0sIFszNy43ODA3MjMsIC0xMjIuNDY5NjUxXSwgWzM3Ljc4MDg0NSwgLTEyMi40Njk2NThdLCBbMzcuNzgxMTUsIC0xMjIuNDY5NzA0XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODIzODIsIC0xMjIuNDY5NzY1XSwgWzM3Ljc4MjcwNywgLTEyMi40Njk3ODhdLCBbMzcuNzgyNjYxLCAtMTIyLjQ3MDg2NF0sIFszNy43ODI2MTEsIC0xMjIuNDcxOTMyXSwgWzM3Ljc4MjYwNCwgLTEyMi40NzIxXSwgWzM3Ljc4MjU5MiwgLTEyMi40NzIzOTddLCBbMzcuNzgyNTg1LCAtMTIyLjQ3MjU0Ml0sIFszNy43ODI1NjYsIC0xMjIuNDczMDA4XSwgWzM3Ljc4MjUxMiwgLTEyMi40NzQxMjldLCBbMzcuNzgyNDU5LCAtMTIyLjQ3NTI1MV0sIFszNy43ODI0MDksIC0xMjIuNDc2MzE5XSwgWzM3Ljc4MjM2MywgLTEyMi40NzczOTVdLCBbMzcuNzgyMzE0LCAtMTIyLjQ3ODQ2M10sIFszNy43ODIyNjQsIC0xMjIuNDc5NTMxXSwgWzM3Ljc4MjIxNSwgLTEyMi40ODA2MDddLCBbMzcuNzgyMTY5LCAtMTIyLjQ4MTY3NV0sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODM3MTgsIC0xMjIuNDgyOTAzXSwgWzM3Ljc4MjExOSwgLTEyMi40ODI3NV0sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODAyNzcsIC0xMjIuNDgyMjM5XSwgWzM3Ljc4MDMwNywgLTEyMi40ODE1NDVdLCBbMzcuNzgwMzI2LCAtMTIyLjQ4MTEzM10sIFszNy43ODAzNTcsIC0xMjIuNDgwNDc3XSwgWzM3Ljc4MDQwMywgLTEyMi40Nzk0MDFdLCBbMzcuNzgwNDUyLCAtMTIyLjQ3ODMzM10sIFszNy43ODA0NjcsIC0xMjIuNDc3OTc0XSwgWzM3Ljc4MDUwMiwgLTEyMi40NzcyNTddLCBbMzcuNzgwNTEzLCAtMTIyLjQ3NjkzN10sIFszNy43ODA1NTEsIC0xMjIuNDc2MTg5XSwgWzM3Ljc4MDU5NywgLTEyMi40NzUxMTNdLCBbMzcuNzgwNjUxLCAtMTIyLjQ3Mzk5Ml0sIFszNy43ODA2NywgLTEyMi40NzM1MDRdLCBbMzcuNzgwNywgLTEyMi40NzI4N10sIFszNy43ODA3MTksIC0xMjIuNDcyNDg5XSwgWzM3Ljc4MDcxOSwgLTEyMi40NzI0MDVdLCBbMzcuNzgwNTk3LCAtMTIyLjQ3MjM5N10sIFszNy43ODA2MDUsIC0xMjIuNDcyMjUyXSwgWzM3Ljc4MDYwOSwgLTEyMi40NzIxNzZdLCBbMzcuNzgwNjE2LCAtMTIyLjQ3MTk4NV0sIFszNy43ODA2MjgsIC0xMjIuNDcxNzk1XSwgWzM3Ljc4MDY1OCwgLTEyMi40NzEwOTNdLCBbMzcuNzgwNjczLCAtMTIyLjQ3MDcxOV0sIFszNy43ODA3MDgsIC0xMjIuNDcwMDI1XSwgWzM3Ljc4MDcyMywgLTEyMi40Njk2NTFdLCBbMzcuNzgwNzczLCAtMTIyLjQ2ODU3NV0sIFszNy43ODA4MjIsIC0xMjIuNDY3NTA3XSwgWzM3Ljc4MDg1MywgLTEyMi40NjY3OV0sIFszNy43ODA4NjgsIC0xMjIuNDY2NDM5XSwgWzM3Ljc4MDkwMiwgLTEyMi40NjU3MTRdLCBbMzcuNzgwOTE4LCAtMTIyLjQ2NTM2M10sIFszNy43ODA5NjcsIC0xMjIuNDY0Mjk1XSwgWzM3Ljc4MDUyOSwgLTEyMi40NjQyNjRdLCBbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF1dLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Ny5hZGRMYXllcihwb2x5X2xpbmVfNDk0NjQyYTBjYTczNDgwZjkwYjkzYjA4ODNjMzhiMjUpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgcG9seV9saW5lXzcwMDAzNTk3MzM0NDQwN2E4NmEyM2IzZTZiNTIxNTUwID0gTC5wb2x5bGluZSgKICAgICAgICAgICAgICAgICAgICBbWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzU0NTksIC0xMjIuNDYzODk4XSwgWzM3Ljc3NTM3MSwgLTEyMi40NjM4OTFdLCBbMzcuNzc0MiwgLTEyMi40NjM4MDddLCBbMzcuNzczNjM1LCAtMTIyLjQ2Mzc2OV0sIFszNy43NzM2NTEsIC0xMjIuNDYzNjYyXSwgWzM3Ljc3MzUzNiwgLTEyMi40NjM2NjldLCBbMzcuNzczNDksIC0xMjIuNDYzNjY5XSwgWzM3Ljc3MzQ0OCwgLTEyMi40NjM2NjldLCBbMzcuNzczNDE0LCAtMTIyLjQ2MzcyM10sIFszNy43NzM0MDYsIC0xMjIuNDYzNzY5XSwgWzM3Ljc3MzI4MSwgLTEyMi40NjM3MzhdLCBbMzcuNzczMTg5LCAtMTIyLjQ2MzczOF0sIFszNy43NzMxMDUsIC0xMjIuNDYzNzQ2XSwgWzM3Ljc3Mjk5MSwgLTEyMi40NjM4MTRdLCBbMzcuNzcyOTMsIC0xMjIuNDYzODZdLCBbMzcuNzcyODcyLCAtMTIyLjQ2Mzg5OF0sIFszNy43NzI2MDksIC0xMjIuNDYzOTk3XSwgWzM3Ljc3MjUyOSwgLTEyMi40NjQwMjhdLCBbMzcuNzcyNDMsIC0xMjIuNDY0MDEzXSwgWzM3Ljc3MjM2OSwgLTEyMi40NjQwNDNdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjUsIC0xMjIuNDY0MjcyXSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjQ2LCAtMTIyLjQ2NDY1NF0sIFszNy43NzIzODQsIC0xMjIuNDY0Njg0XSwgWzM3Ljc3MjMzMSwgLTEyMi40NjQ2OTldLCBbMzcuNzcyMjcsIC0xMjIuNDY0NzE1XSwgWzM3Ljc3MjE4MiwgLTEyMi40NjQ4MjldLCBbMzcuNzcyMTU5LCAtMTIyLjQ2NDk3NF0sIFszNy43NzIxMTMsIC0xMjIuNDY1MDY2XSwgWzM3Ljc3MTk2NSwgLTEyMi40NjUzMV0sIFszNy43NzE3NjYsIC0xMjIuNDY1Mjc5XSwgWzM3Ljc3MTU3NSwgLTEyMi40NjUyNjRdLCBbMzcuNzcxMzY2LCAtMTIyLjQ2NTE5NV0sIFszNy43NzEyMjQsIC0xMjIuNDY1MTg4XSwgWzM3Ljc3MTA2LCAtMTIyLjQ2NTE4OF0sIFszNy43NzA5NDYsIC0xMjIuNDY1MTk1XSwgWzM3Ljc3MDc5NywgLTEyMi40NjUxMzRdLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzAyMzYsIC0xMjIuNDY0OTUxXSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NzI1LCAtMTIyLjQ2NDQ3XSwgWzM3Ljc2OTgwMiwgLTEyMi40NjQ0ODZdLCBbMzcuNzY5OTUsIC0xMjIuNDY0NjA4XSwgWzM3Ljc3MDA5MiwgLTEyMi40NjQ3NzZdLCBbMzcuNzcwMjM2LCAtMTIyLjQ2NDk1MV0sIFszNy43NzAzMTMsIC0xMjIuNDY1MDk2XSwgWzM3Ljc3MDQyMywgLTEyMi40NjUxMDRdLCBbMzcuNzcwNjI2LCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MDkzMSwgLTEyMi40NjQ1NzddLCBbMzcuNzcxMDE4LCAtMTIyLjQ2NDMxOF0sIFszNy43NzExMTQsIC0xMjIuNDY0MTI3XSwgWzM3Ljc3MTE1NiwgLTEyMi40NjM5NTldLCBbMzcuNzcxMTcxLCAtMTIyLjQ2MzczOF0sIFszNy43NzExNzUsIC0xMjIuNDYzNTA5XSwgWzM3Ljc3MTIwOSwgLTEyMi40NjMyNV0sIFszNy43NzEyODYsIC0xMjIuNDYzMTJdLCBbMzcuNzcxNDI3LCAtMTIyLjQ2MzA3NF0sIFszNy43NzE0NDIsIC0xMjIuNDYyODUzXSwgWzM3Ljc3MTQ1NywgLTEyMi40NjI3XSwgWzM3Ljc3MTQ4LCAtMTIyLjQ2MjY1NV0sIFszNy43NzE2NTIsIC0xMjIuNDYyNTcxXSwgWzM3Ljc3MTczOSwgLTEyMi40NjI1MV0sIFszNy43NzE2ODYsIC0xMjIuNDYyMzU3XSwgWzM3Ljc3MTc1OSwgLTEyMi40NjIzNDJdLCBbMzcuNzcxODM1LCAtMTIyLjQ2MjMwNF0sIFszNy43NzE5MzQsIC0xMjIuNDYyMjY2XSwgWzM3Ljc3MTkxNSwgLTEyMi40NjIxODJdLCBbMzcuNzcxOTAzLCAtMTIyLjQ2MjE0M10sIFszNy43NzE5NjUsIC0xMjIuNDYyMDldLCBbMzcuNzcyMDgzLCAtMTIyLjQ2MTkzXSwgWzM3Ljc3MjE3OCwgLTEyMi40NjE3MTZdLCBbMzcuNzcyMjc0LCAtMTIyLjQ2MTUxXSwgWzM3Ljc3MjQwNywgLTEyMi40NjEzMzVdLCBbMzcuNzcyNTQ4LCAtMTIyLjQ2MTIyOF0sIFszNy43NzI1NzksIC0xMjIuNDYxMjEzXSwgWzM3Ljc3MjY1NSwgLTEyMi40NjExNzVdLCBbMzcuNzcyNzA4LCAtMTIyLjQ2MTE0NF0sIFszNy43NzI2NTksIC0xMjIuNDYxMDgzXSwgWzM3Ljc3MjcyLCAtMTIyLjQ2MTAzN10sIFszNy43NzI3NjYsIC0xMjIuNDYwOTk5XSwgWzM3Ljc3MjgxOSwgLTEyMi40NjA5NDZdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI5MTgsIC0xMjIuNDYwNzkzXSwgWzM3Ljc3Mjk1MywgLTEyMi40NjA3MTddLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzMwMTQsIC0xMjIuNDYwNTExXSwgWzM3Ljc3MzAzNiwgLTEyMi40NjAzOTZdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMyMDgsIC0xMjIuNDU5MTQ1XSwgWzM3Ljc3MzI3MywgLTEyMi40NTkxNTNdLCBbMzcuNzczNTcxLCAtMTIyLjQ1ODg5M10sIFszNy43NzM4NDUsIC0xMjIuNDU4NjI2XSwgWzM3Ljc3NDAwMiwgLTEyMi40NTg1MjddLCBbMzcuNzc0MTM5LCAtMTIyLjQ1ODQ5N10sIFszNy43NzQyOTksIC0xMjIuNDU4NTEyXSwgWzM3Ljc3NDI5OSwgLTEyMi40NTg0NThdLCBbMzcuNzc0Mjk5LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDQxLCAtMTIyLjQ1ODQwNV0sIFszNy43NzQ3MDMsIC0xMjIuNDU4NDJdLCBbMzcuNzc0OTgyLCAtMTIyLjQ1ODQ0M10sIFszNy43NzUyNDUsIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzU2MTUsIC0xMjIuNDU4NDg5XSwgWzM3Ljc3NjExOSwgLTEyMi40NTg1MjddLCBbMzcuNzc2MTg3LCAtMTIyLjQ1ODUyN10sIFszNy43NzY4NDQsIC0xMjIuNDU4NTczXSwgWzM3Ljc3NzEyNiwgLTEyMi40NTg1OTZdLCBbMzcuNzc3Mjg2LCAtMTIyLjQ1ODYxMV0sIFszNy43Nzc1OTUsIC0xMjIuNDU4NjM0XSwgWzM3Ljc3NzczNiwgLTEyMi40NTg2NDJdLCBbMzcuNzc4MDExLCAtMTIyLjQ1ODY1N10sIFszNy43NzgwOTEsIC0xMjIuNDU4MDAxXSwgWzM3Ljc3ODcyOCwgLTEyMi40NTgxM10sIFszNy43Nzg3OTcsIC0xMjIuNDU4MTIzXSwgWzM3Ljc3ODgyNywgLTEyMi40NTgxM10sIFszNy43Nzg4NSwgLTEyMi40NTgxMjNdLCBbMzcuNzc4ODczLCAtMTIyLjQ1ODEwN10sIFszNy43Nzg4OTIsIC0xMjIuNDU4MDkyXSwgWzM3Ljc3ODkxNSwgLTEyMi40NTgwNTRdLCBbMzcuNzc4OTMsIC0xMjIuNDU4MDA4XSwgWzM3Ljc3ODkzOCwgLTEyMi40NTc5N10sIFszNy43Nzg5NDUsIC0xMjIuNDU3OTMyXSwgWzM3Ljc3OTAxNCwgLTEyMi40NTczNzVdLCBbMzcuNzc5MDMzLCAtMTIyLjQ1NzMyMl0sIFszNy43NzkwNTYsIC0xMjIuNDU3MjYxXSwgWzM3Ljc3OTA3MSwgLTEyMi40NTcyM10sIFszNy43NzkwOTgsIC0xMjIuNDU3MTkyXSwgWzM3Ljc3OTEzMiwgLTEyMi40NTcxNDZdLCBbMzcuNzc5MTc0LCAtMTIyLjQ1NzFdLCBbMzcuNzc5MjE2LCAtMTIyLjQ1NzA1NV0sIFszNy43NzkyNTEsIC0xMjIuNDU3MDE2XSwgWzM3Ljc3OTI5MywgLTEyMi40NTY5OTRdLCBbMzcuNzc5MzE5LCAtMTIyLjQ1Njk3OF0sIFszNy43NzkzNSwgLTEyMi40NTY5NzFdLCBbMzcuNzc5MzgsIC0xMjIuNDU2OTcxXSwgWzM3Ljc3OTQwNywgLTEyMi40NTY5NzFdLCBbMzcuNzc5NDY4LCAtMTIyLjQ1Njk3OF0sIFszNy43Nzk1NzksIC0xMjIuNDU3MDAxXSwgWzM3Ljc3OTU5NCwgLTEyMi40NTY5MDJdLCBbMzcuNzc5NjA1LCAtMTIyLjQ1NjgzM10sIFszNy43Nzk2MjEsIC0xMjIuNDU2NzU3XSwgWzM3Ljc3OTY0NCwgLTEyMi40NTY2ODhdLCBbMzcuNzc5NjcsIC0xMjIuNDU2NjEyXSwgWzM3Ljc3OTcwOCwgLTEyMi40NTY1MTNdLCBbMzcuNzc5ODA4LCAtMTIyLjQ1NjIzOF0sIFszNy43Nzk4OTksIC0xMjIuNDU1OTg3XSwgWzM3Ljc3OTk0NSwgLTEyMi40NTU4NTddLCBbMzcuNzc5OTkxLCAtMTIyLjQ1NTczNV0sIFszNy43ODAwMDYsIC0xMjIuNDU1NjgxXSwgWzM3Ljc4MDAxNywgLTEyMi40NTU2Ml0sIFszNy43ODAwMjksIC0xMjIuNDU1NTU5XSwgWzM3Ljc4MDAzNiwgLTEyMi40NTU0OTFdLCBbMzcuNzgwMDk3LCAtMTIyLjQ1NTAxOF0sIFszNy43ODAxMiwgLTEyMi40NTQ4MzRdLCBbMzcuNzgwMjQyLCAtMTIyLjQ1Mzg5Nl0sIFszNy43ODAzNjQsIC0xMjIuNDUyOTJdLCBbMzcuNzgxNjY5LCAtMTIyLjQ1MzE3OV0sIFszNy43ODE3ODcsIC0xMjIuNDUzMjAyXSwgWzM3Ljc4Mzk1NCwgLTEyMi40NTM2MzddLCBbMzcuNzg0MDU3LCAtMTIyLjQ1MzY1Ml0sIFszNy43ODQxNjgsIC0xMjIuNDUzNjY3XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0Mzc4LCAtMTIyLjQ1MzY5OF0sIFszNy43ODQ0OTYsIC0xMjIuNDUzNzEzXSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NzMyLCAtMTIyLjQ1MzczNl0sIFszNy43ODQ4NTEsIC0xMjIuNDUzNzQzXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1MTA2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODUyMzYsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1NDY1LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU1MTEsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTk0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODU2MzMsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NTY1OSwgLTEyMi40NTM2Nl0sIFszNy43ODU2ODIsIC0xMjIuNDUzNjE0XSwgWzM3Ljc4NTY5NCwgLTEyMi40NTM1Nl0sIFszNy43ODU3MDUsIC0xMjIuNDUzNDk5XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzE3LCAtMTIyLjQ1MzM3N10sIFszNy43ODU3MjQsIC0xMjIuNDUzMjc4XSwgWzM3Ljc4NTc3LCAtMTIyLjQ1MjkyXSwgWzM3Ljc4NTg3NywgLTEyMi40NTIwOF0sIFszNy43ODU5MzQsIC0xMjIuNDUxNjM4XSwgWzM3Ljc4NTkzNCwgLTEyMi40NTE2M10sIFszNy43ODYyMzksIC0xMjIuNDUxNjk5XSwgWzM3Ljc4NjIzOSwgLTEyMi40NTE2OTldLCBbMzcuNzg2NDc2LCAtMTIyLjQ1MTc0NV0sIFszNy43ODY2MjQsIC0xMjIuNDUxNzc1XSwgWzM3Ljc4NjQzLCAtMTIyLjQ1MzMyNF0sIFszNy43ODY0MTgsIC0xMjIuNDUzNDIzXSwgWzM3Ljc4NjM4OCwgLTEyMi40NTM2OThdLCBbMzcuNzg2MzEyLCAtMTIyLjQ1NDNdLCBbMzcuNzg2MjUxLCAtMTIyLjQ1NDc4OV0sIFszNy43ODYyMTIsIC0xMjIuNDU1MDYzXSwgWzM3Ljc4NjEwOSwgLTEyMi40NTU4ODddLCBbMzcuNzg2MDAzLCAtMTIyLjQ1NjcxMV0sIFszNy43ODU5NzIsIC0xMjIuNDU2OTc4XSwgWzM3Ljc4NTgzMSwgLTEyMi40NTgwNjldLCBbMzcuNzg1Njg2LCAtMTIyLjQ1OTIxNF0sIFszNy43ODU1NDUsIC0xMjIuNDYwMzI4XSwgWzM3Ljc4NTQwOCwgLTEyMi40NjEzOTZdLCBbMzcuNzg1Mjc0LCAtMTIyLjQ2MjQ1Nl0sIFszNy43ODUxMzcsIC0xMjIuNDYzNTI0XSwgWzM3Ljc4NDg2NiwgLTEyMi40NjM1MDFdLCBbMzcuNzgzLCAtMTIyLjQ2MzM3Ml0sIFszNy43ODI3OTEsIC0xMjIuNDYzNDAyXSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgxNTM5LCAtMTIyLjQ2MzI2NV0sIFszNy43ODExMzksIC0xMjIuNDYzMjM0XSwgWzM3Ljc4MTA4OSwgLTEyMi40NjQzMDNdLCBbMzcuNzgwOTY3LCAtMTIyLjQ2NDI5NV0sIFszNy43ODA1MjksIC0xMjIuNDY0MjY0XSwgWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdXSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcF9hYzNjODdkYzk1OTA0Njc3YmVkMWZmMzMzNjZlNjU1Ny5hZGRMYXllcihwb2x5X2xpbmVfNzAwMDM1OTczMzQ0NDA3YTg2YTIzYjNlNmI1MjE1NTApOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L3NjcmlwdD4KICAgICAgICA=" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>



I also run the function on the same set of stops twice more, specifying bike transportation and then car transportation. As you can see the routes are slightly different, favoring roads that are better for biking or for driving. The times are also much shorter although biking and driving times are actually quite similar. Given how difficult it is to find parking in SF, biking is definitely the way to go here!


```python
opt_2_people_bike = optimize_stops_mult(home, stops, num_travelers = 2, stop_labels = stop_labels, costing = 'bicycle')
print opt_2_people_bike['time']
```

    [11, 18]
    


```python
points = [[opt_2_people_bike['home_point']]] + opt_2_people_bike['points']
labels = [['Home']]+[[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_2_people_bike['order']]

m2 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels, line_coords = opt_2_people_bike['lines'])
m2
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzlhMDM4ZDNjYmNlYzRhYTFiMjY1ZGExMTY4NDQ4YzAxIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF85YTAzOGQzY2JjZWM0YWExYjI2NWRhMTE2ODQ0OGMwMSIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF85YTAzOGQzY2JjZWM0YWExYjI2NWRhMTE2ODQ0OGMwMSA9IEwubWFwKCdtYXBfOWEwMzhkM2NiY2VjNGFhMWIyNjVkYTExNjg0NDhjMDEnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfY2VhNjg2NmFhZTQ0NDk3NWIyZWVkY2RhZjRkM2IzODIgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YTAzOGQzY2JjZWM0YWExYjI2NWRhMTE2ODQ0OGMwMSk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNzg1MWFlY2NlN2Y0NDY1Zjk2ZGY2OWUyNWZkYWI1NmQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfOWEwMzhkM2NiY2VjNGFhMWIyNjVkYTExNjg0NDhjMDEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMmE3OTdiMWUyMzExNDgyYmI2NjUxMDQ3NzNjYTBhMjcgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzc4NTFhZWNjZTdmNDQ2NWY5NmRmNjllMjVmZGFiNTZkLnNldEljb24oaWNvbl8yYTc5N2IxZTIzMTE0ODJiYjY2NTEwNDc3M2NhMGEyNyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Y0YmUyOWZmNDljNzQ3NWViOTE0NmU4ODVlZmE2MDIwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M5ZTU5Njc2MmMzODRhMGM4MGFlMjNlZWE5Y2FiZjhiID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9jOWU1OTY3NjJjMzg0YTBjODBhZTIzZWVhOWNhYmY4YiIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mNGJlMjlmZjQ5Yzc0NzVlYjkxNDZlODg1ZWZhNjAyMC5zZXRDb250ZW50KGh0bWxfYzllNTk2NzYyYzM4NGEwYzgwYWUyM2VlYTljYWJmOGIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl83ODUxYWVjY2U3ZjQ0NjVmOTZkZjY5ZTI1ZmRhYjU2ZC5iaW5kUG9wdXAocG9wdXBfZjRiZTI5ZmY0OWM3NDc1ZWI5MTQ2ZTg4NWVmYTYwMjApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl85NmE4NWE5NWZjMmU0MGMwODdmYWQ0NzhiM2VmYjNkMyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF85YTAzOGQzY2JjZWM0YWExYjI2NWRhMTE2ODQ0OGMwMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8zNTFlZjllYzk1ZWQ0MzFiOGMyZGQ1MGYwMDYwYWQ0MSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl85NmE4NWE5NWZjMmU0MGMwODdmYWQ0NzhiM2VmYjNkMy5zZXRJY29uKGljb25fMzUxZWY5ZWM5NWVkNDMxYjhjMmRkNTBmMDA2MGFkNDEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZDEyMTFkODVlMDM0OTczYmQ1MmYxMjMyNzUwMWY3MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83ODg1YTExZGYzNzA0MWE3OTgzYmRkNmZiNzM1YjAyYiA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNzg4NWExMWRmMzcwNDFhNzk4M2JkZDZmYjczNWIwMmIiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBMYW1wcyBQbHVzPC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZkMTIxMWQ4NWUwMzQ5NzNiZDUyZjEyMzI3NTAxZjczLnNldENvbnRlbnQoaHRtbF83ODg1YTExZGYzNzA0MWE3OTgzYmRkNmZiNzM1YjAyYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzk2YTg1YTk1ZmMyZTQwYzA4N2ZhZDQ3OGIzZWZiM2QzLmJpbmRQb3B1cChwb3B1cF82ZDEyMTFkODVlMDM0OTczYmQ1MmYxMjMyNzUwMWY3Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyX2QwNjUxODFhZTMwNDQ5ZjQ4MGNkNWM2YTFhODk5MGY3ID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzgzNzEsLTEyMi40ODNdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF85YTAzOGQzY2JjZWM0YWExYjI2NWRhMTE2ODQ0OGMwMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl80ZmEyM2QxMjdkNzA0YWM0OGVmMGQxOWFhYjEwNDgzMiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9kMDY1MTgxYWUzMDQ0OWY0ODBjZDVjNmExYTg5OTBmNy5zZXRJY29uKGljb25fNGZhMjNkMTI3ZDcwNGFjNDhlZjBkMTlhYWIxMDQ4MzIpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zYjQ2MTRkZTVhYTY0YjNiYjg3MDk0NjBkOGMyNGEwYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85NTQ0OTc3M2E0ZjY0MjA1YTM3YjkwN2IzYzgzMTM5NSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfOTU0NDk3NzNhNGY2NDIwNWEzN2I5MDdiM2M4MzEzOTUiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDIgLSBQaXp6ZXR0YTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zYjQ2MTRkZTVhYTY0YjNiYjg3MDk0NjBkOGMyNGEwYy5zZXRDb250ZW50KGh0bWxfOTU0NDk3NzNhNGY2NDIwNWEzN2I5MDdiM2M4MzEzOTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl9kMDY1MTgxYWUzMDQ0OWY0ODBjZDVjNmExYTg5OTBmNy5iaW5kUG9wdXAocG9wdXBfM2I0NjE0ZGU1YWE2NGIzYmI4NzA5NDYwZDhjMjRhMGMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl83MzhkZjg2MTM2ZjQ0MGE4YWQyYmJiNDU0YjNiYjM4MCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4Mjc4LC0xMjIuNDYzNTFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF85YTAzOGQzY2JjZWM0YWExYjI2NWRhMTE2ODQ0OGMwMSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8wNDcyYmQ2ZTM5ZmY0ODE1YWY1YTM3NzU4YTMzNmZjZCA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzczOGRmODYxMzZmNDQwYThhZDJiYmI0NTRiM2JiMzgwLnNldEljb24oaWNvbl8wNDcyYmQ2ZTM5ZmY0ODE1YWY1YTM3NzU4YTMzNmZjZCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzcxNzJlNjQyMWQyZjRhY2Q4ODA0N2Q0NmM0YzhiNmEzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2YwNGRkMTczNWQ1YjRlNGU5ZDcwY2RlZDdiNmRhMDc0ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF9mMDRkZDE3MzVkNWI0ZTRlOWQ3MGNkZWQ3YjZkYTA3NCIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMSAtIFRveSBCb2F0PC9kaXY+ICAgICAgICAgICAgICAgICAnKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzcxNzJlNjQyMWQyZjRhY2Q4ODA0N2Q0NmM0YzhiNmEzLnNldENvbnRlbnQoaHRtbF9mMDRkZDE3MzVkNWI0ZTRlOWQ3MGNkZWQ3YjZkYTA3NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgbWFya2VyXzczOGRmODYxMzZmNDQwYThhZDJiYmI0NTRiM2JiMzgwLmJpbmRQb3B1cChwb3B1cF83MTcyZTY0MjFkMmY0YWNkODgwNDdkNDZjNGM4YjZhMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgbWFya2VyXzQyNzZmN2RkODIzMjQ0MDA4NDdjZjllNjE0YjEyNGQyID0gTC5tYXJrZXIoCiAgICAgICAgICAgICAgICBbMzcuNzg2MjEsLTEyMi40NTE4NF0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzlhMDM4ZDNjYmNlYzRhYTFiMjY1ZGExMTY4NDQ4YzAxKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uXzY2OGVkNjY5NDNlZjRkNTRhYTFjODYwZTBmZGViOGYzID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfNDI3NmY3ZGQ4MjMyNDQwMDg0N2NmOWU2MTRiMTI0ZDIuc2V0SWNvbihpY29uXzY2OGVkNjY5NDNlZjRkNTRhYTFjODYwZTBmZGViOGYzKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzRjNzc1ZmQ5NTI0NGJiYmFlYWIyNGJhZWExNDIxNTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWQ5MzI0ODYxNWQ4NGIwY2FhM2RhMWNlNWQ4MWQxZDEgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzlkOTMyNDg2MTVkODRiMGNhYTNkYTFjZTVkODFkMWQxIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAyIC0gTm9haCYjMzk7cyBCYWdlbHM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzRjNzc1ZmQ5NTI0NGJiYmFlYWIyNGJhZWExNDIxNTUuc2V0Q29udGVudChodG1sXzlkOTMyNDg2MTVkODRiMGNhYTNkYTFjZTVkODFkMWQxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNDI3NmY3ZGQ4MjMyNDQwMDg0N2NmOWU2MTRiMTI0ZDIuYmluZFBvcHVwKHBvcHVwXzc0Yzc3NWZkOTUyNDRiYmJhZWFiMjRiYWVhMTQyMTU1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMTk5MDA0ZmMxZjM3NGI3ODg0M2IyOWI1MmYzNjVmNjUgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfOWEwMzhkM2NiY2VjNGFhMWIyNjVkYTExNjg0NDhjMDEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fOGVjOGEyMGRkYmRmNDRjYThiMzk0YjNiNTliYWEzZDMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8xOTkwMDRmYzFmMzc0Yjc4ODQzYjI5YjUyZjM2NWY2NS5zZXRJY29uKGljb25fOGVjOGEyMGRkYmRmNDRjYThiMzk0YjNiNTliYWEzZDMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wNmYzMWY4MzMyMDc0NjAwYWJlMmEwYjU5NzlhYjQ3MCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82Njc2M2Q1YmI2OTg0NjYwOWRiODI1YWFmOGZjYTg5NCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNjY3NjNkNWJiNjk4NDY2MDlkYjgyNWFhZjhmY2E4OTQiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDMgLSBBcmd1ZWxsbyBNYXJrZXQ8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDZmMzFmODMzMjA3NDYwMGFiZTJhMGI1OTc5YWI0NzAuc2V0Q29udGVudChodG1sXzY2NzYzZDViYjY5ODQ2NjA5ZGI4MjVhYWY4ZmNhODk0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMTk5MDA0ZmMxZjM3NGI3ODg0M2IyOWI1MmYzNjVmNjUuYmluZFBvcHVwKHBvcHVwXzA2ZjMxZjgzMzIwNzQ2MDBhYmUyYTBiNTk3OWFiNDcwKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNjY5MDY1YTU0ZmVkNDcyNGFjNWM5ODlmYmNjYzg1NzAgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzAwMiwtMTIyLjQ2NTYxXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfOWEwMzhkM2NiY2VjNGFhMWIyNjVkYTExNjg0NDhjMDEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZGUxYjZkZDc3ZWFiNGFmNjhiNjk5ZjU0ZTFmZGY0OTkgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl82NjkwNjVhNTRmZWQ0NzI0YWM1Yzk4OWZiY2NjODU3MC5zZXRJY29uKGljb25fZGUxYjZkZDc3ZWFiNGFmNjhiNjk5ZjU0ZTFmZGY0OTkpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mMzdjYjcwYmU0YzQ0NWJjOWQzMzg0NDcyOGIxOWYyZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hNmQxM2Y2Y2I0ZmI0OTg0YmZlZjQwZTllNDQ0MjlhYSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfYTZkMTNmNmNiNGZiNDk4NGJmZWY0MGU5ZTQ0NDI5YWEiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDQgLSBkZSBZb3VuZyBNdXNldW08L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjM3Y2I3MGJlNGM0NDViYzlkMzM4NDQ3MjhiMTlmMmQuc2V0Q29udGVudChodG1sX2E2ZDEzZjZjYjRmYjQ5ODRiZmVmNDBlOWU0NDQyOWFhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfNjY5MDY1YTU0ZmVkNDcyNGFjNWM5ODlmYmNjYzg1NzAuYmluZFBvcHVwKHBvcHVwX2YzN2NiNzBiZTRjNDQ1YmM5ZDMzODQ0NzI4YjE5ZjJkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfMWRjYjBlNzk1ZjE3NGRlNjk1ZTA5NjA5M2EzNmVhYTYgPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF0sIFszNy43NzkwNTYsIC0xMjIuNDY1MjMzXSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc4OTU3LCAtMTIyLjQ2NzM3N10sIFszNy43Nzg5MDcsIC0xMjIuNDY4NDQ1XSwgWzM3Ljc3ODg2MSwgLTEyMi40Njk1MTNdLCBbMzcuNzgwNzIzLCAtMTIyLjQ2OTY1MV0sIFszNy43ODA4NDUsIC0xMjIuNDY5NjU4XSwgWzM3Ljc4MTE1LCAtMTIyLjQ2OTcwNF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgwODQ1LCAtMTIyLjQ2OTY1OF0sIFszNy43ODA4MTUsIC0xMjIuNDcwMzgzXSwgWzM3Ljc4MDc5NiwgLTEyMi40NzA3MjddLCBbMzcuNzgwNzUsIC0xMjIuNDcxODAyXSwgWzM3Ljc4MDczOCwgLTEyMi40NzE5OTNdLCBbMzcuNzgwNzMxLCAtMTIyLjQ3MjE3Nl0sIFszNy43ODA3MjcsIC0xMjIuNDcyMjY4XSwgWzM3Ljc4MDcxOSwgLTEyMi40NzI0MDVdLCBbMzcuNzgwNzE5LCAtMTIyLjQ3MjQ4OV0sIFszNy43ODA3LCAtMTIyLjQ3Mjg3XSwgWzM3Ljc4MDY3LCAtMTIyLjQ3MzUwNF0sIFszNy43ODA2NTEsIC0xMjIuNDczOTkyXSwgWzM3Ljc4MDU5NywgLTEyMi40NzUxMTNdLCBbMzcuNzgwNTUxLCAtMTIyLjQ3NjE4OV0sIFszNy43ODA1MTMsIC0xMjIuNDc2OTM3XSwgWzM3Ljc4MDUwMiwgLTEyMi40NzcyNTddLCBbMzcuNzgwNDY3LCAtMTIyLjQ3Nzk3NF0sIFszNy43ODA0NTIsIC0xMjIuNDc4MzMzXSwgWzM3Ljc4MDQwMywgLTEyMi40Nzk0MDFdLCBbMzcuNzgwMzU3LCAtMTIyLjQ4MDQ3N10sIFszNy43ODAzMjYsIC0xMjIuNDgxMTMzXSwgWzM3Ljc4MDMwNywgLTEyMi40ODE1NDVdLCBbMzcuNzgwMjc3LCAtMTIyLjQ4MjIzOV0sIFszNy43ODAyNTgsIC0xMjIuNDgyNjEzXSwgWzM3Ljc4MTczOCwgLTEyMi40ODI3Ml0sIFszNy43ODIxMTksIC0xMjIuNDgyNzVdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODM3MTgsIC0xMjIuNDgyOTAzXSwgWzM3Ljc4MjExOSwgLTEyMi40ODI3NV0sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODAxMzIsIC0xMjIuNDgyNjA1XSwgWzM3Ljc3ODI3LCAtMTIyLjQ4MjQ2OF0sIFszNy43NzgzMiwgLTEyMi40ODE0XSwgWzM3Ljc3ODM2OSwgLTEyMi40ODAzMzJdLCBbMzcuNzc4NDE1LCAtMTIyLjQ3OTI1Nl0sIFszNy43Nzg0NjUsIC0xMjIuNDc4MTg4XSwgWzM3Ljc3ODUxNCwgLTEyMi40NzcxMTJdLCBbMzcuNzc4NTY0LCAtMTIyLjQ3NjA0NF0sIFszNy43Nzg2MSwgLTEyMi40NzQ5NzZdLCBbMzcuNzc4NjYzLCAtMTIyLjQ3Mzg0N10sIFszNy43Nzg3MTMsIC0xMjIuNDcyNzI1XSwgWzM3Ljc3ODczNiwgLTEyMi40NzIyNl0sIFszNy43Nzg3NDMsIC0xMjIuNDcyMTIzXSwgWzM3Ljc3ODc1NSwgLTEyMi40NzE4NF0sIFszNy43Nzg3NjIsIC0xMjIuNDcxNjU3XSwgWzM3Ljc3ODc4MSwgLTEyMi40NzEyM10sIFszNy43Nzg4MTIsIC0xMjIuNDcwNTg5XSwgWzM3Ljc3ODg2MSwgLTEyMi40Njk1MTNdLCBbMzcuNzc4OTA3LCAtMTIyLjQ2ODQ0NV0sIFszNy43Nzg5NTcsIC0xMjIuNDY3Mzc3XSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFwXzlhMDM4ZDNjYmNlYzRhYTFiMjY1ZGExMTY4NDQ4YzAxLmFkZExheWVyKHBvbHlfbGluZV8xZGNiMGU3OTVmMTc0ZGU2OTVlMDk2MDkzYTM2ZWFhNik7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfNmYxYWMzZTFiNGY1NGFhNjllMDBkZmExNjY1MzI2ODIgPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA5LCAtMTIyLjQ2NDIwM10sIFszNy43NzkxNTEsIC0xMjIuNDYzMDk3XSwgWzM3Ljc4MTAxNywgLTEyMi40NjMyMjddLCBbMzcuNzgxMTM5LCAtMTIyLjQ2MzIzNF0sIFszNy43ODE1MzksIC0xMjIuNDYzMjY1XSwgWzM3Ljc4Mjc5MSwgLTEyMi40NjM0MDJdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODMsIC0xMjIuNDYzMzcyXSwgWzM3Ljc4MzA1LCAtMTIyLjQ2MjI5Nl0sIFszNy43ODMwOTYsIC0xMjIuNDYxMjI4XSwgWzM3Ljc4MzE0NSwgLTEyMi40NjAxNTJdLCBbMzcuNzgzMTk1LCAtMTIyLjQ1OTAzMV0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzgyNCwgLTEyMi40NTkwNzZdLCBbMzcuNzgzODc4LCAtMTIyLjQ1Nzk0XSwgWzM3Ljc4MzkyNywgLTEyMi40NTY4MzNdLCBbMzcuNzgzOTc3LCAtMTIyLjQ1NTczNV0sIFszNy43ODQwMywgLTEyMi40NTQ2MjhdLCBbMzcuNzg0MDM4LCAtMTIyLjQ1NDQxNV0sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDA1MywgLTEyMi40NTQwMzNdLCBbMzcuNzg0MDU3LCAtMTIyLjQ1Mzg0M10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MjY3LCAtMTIyLjQ1MzY4Ml0sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0NjE0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0OTc2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MzU4LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NTU2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1NzEzLCAtMTIyLjQ1MzQzMV0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTkxMSwgLTEyMi40NTE3OThdLCBbMzcuNzg1OTExLCAtMTIyLjQ1MTc5OF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDA1NywgLTEyMi40NTM4NDNdLCBbMzcuNzg0MDUzLCAtMTIyLjQ1NDAzM10sIFszNy43ODQwNDksIC0xMjIuNDU0MjI0XSwgWzM3Ljc4NDAzOCwgLTEyMi40NTQ0MTVdLCBbMzcuNzg0MDMsIC0xMjIuNDU0NjI4XSwgWzM3Ljc4Mzk3NywgLTEyMi40NTU3MzVdLCBbMzcuNzgzOTI3LCAtMTIyLjQ1NjgzM10sIFszNy43ODM4NzgsIC0xMjIuNDU3OTRdLCBbMzcuNzgzODI0LCAtMTIyLjQ1OTA3Nl0sIFszNy43ODM2MTUsIC0xMjIuNDU5MDYxXSwgWzM3Ljc4MzE5NSwgLTEyMi40NTkwMzFdLCBbMzcuNzgyNzk4LCAtMTIyLjQ1OTAwOF0sIFszNy43ODI3NiwgLTEyMi40NTldLCBbMzcuNzgxODQ4LCAtMTIyLjQ1ODkzOV0sIFszNy43ODEzMzMsIC0xMjIuNDU4OTAxXSwgWzM3Ljc4MTIxMSwgLTEyMi40NTg4OTNdLCBbMzcuNzgwNTc0LCAtMTIyLjQ1ODg0OF0sIFszNy43Nzk3MzEsIC0xMjIuNDU4Nzg3XSwgWzM3Ljc3OTM1NywgLTEyMi40NTg3NTZdLCBbMzcuNzc4ODU4LCAtMTIyLjQ1ODcxOF0sIFszNy43Nzg3NzQsIC0xMjIuNDU4NzE4XSwgWzM3Ljc3ODAxMSwgLTEyMi40NTg2NTddLCBbMzcuNzc3NzM2LCAtMTIyLjQ1ODY0Ml0sIFszNy43Nzc1OTUsIC0xMjIuNDU4NjM0XSwgWzM3Ljc3NzI4NiwgLTEyMi40NTg2MTFdLCBbMzcuNzc3MTI2LCAtMTIyLjQ1ODU5Nl0sIFszNy43NzY4NDQsIC0xMjIuNDU4NTczXSwgWzM3Ljc3NjE4NywgLTEyMi40NTg1MjddLCBbMzcuNzc2MTE5LCAtMTIyLjQ1ODUyN10sIFszNy43NzU2MTUsIC0xMjIuNDU4NDg5XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NTY5LCAtMTIyLjQ1ODUwNF0sIFszNy43NzUyNDUsIC0xMjIuNDU4NDU4XSwgWzM3Ljc3NDk4MiwgLTEyMi40NTg0NDNdLCBbMzcuNzc0NzAzLCAtMTIyLjQ1ODQyXSwgWzM3Ljc3NDQxLCAtMTIyLjQ1ODQwNV0sIFszNy43NzQyOTksIC0xMjIuNDU4MzldLCBbMzcuNzc0MjE1LCAtMTIyLjQ1ODM4Ml0sIFszNy43NzQxNzMsIC0xMjIuNDU4Mzc1XSwgWzM3Ljc3NDExNiwgLTEyMi40NTgzODJdLCBbMzcuNzc0MDY2LCAtMTIyLjQ1ODM5XSwgWzM3Ljc3NDAxNywgLTEyMi40NTg0MDVdLCBbMzcuNzczOTYzLCAtMTIyLjQ1ODQyOF0sIFszNy43NzM5MDIsIC0xMjIuNDU4NDY2XSwgWzM3Ljc3Mzg0MSwgLTEyMi40NTg1MTJdLCBbMzcuNzczNzg4LCAtMTIyLjQ1ODU1OF0sIFszNy43NzM2NDMsIC0xMjIuNDU4Njk1XSwgWzM3Ljc3MzUzMiwgLTEyMi40NTg4MDJdLCBbMzcuNzczNDQxLCAtMTIyLjQ1ODg4Nl0sIFszNy43NzMzNDksIC0xMjIuNDU4OTc3XSwgWzM3Ljc3MzI5NiwgLTEyMi40NTkwMTVdLCBbMzcuNzczMjYyLCAtMTIyLjQ1OTAzMV0sIFszNy43NzMyMjcsIC0xMjIuNDU5MDM4XSwgWzM3Ljc3MzIwOCwgLTEyMi40NTkxNDVdLCBbMzcuNzczMTkzLCAtMTIyLjQ1OTI2N10sIFszNy43NzMxNDcsIC0xMjIuNDU5NjFdLCBbMzcuNzczMTE3LCAtMTIyLjQ1OTgyNF0sIFszNy43NzMwMzYsIC0xMjIuNDYwMzk2XSwgWzM3Ljc3MzAxNCwgLTEyMi40NjA1MTFdLCBbMzcuNzcyOTg3LCAtMTIyLjQ2MDYxOF0sIFszNy43NzI5NTMsIC0xMjIuNDYwNzE3XSwgWzM3Ljc3MjkxOCwgLTEyMi40NjA3OTNdLCBbMzcuNzcyODcyLCAtMTIyLjQ2MDg3N10sIFszNy43NzI4MTksIC0xMjIuNDYwOTQ2XSwgWzM3Ljc3Mjc2NiwgLTEyMi40NjA5OTldLCBbMzcuNzcyNzIsIC0xMjIuNDYxMDM3XSwgWzM3Ljc3MjY1OSwgLTEyMi40NjEwODNdLCBbMzcuNzcyNTk4LCAtMTIyLjQ2MTEyMV0sIFszNy43NzI1MzcsIC0xMjIuNDYxMTU5XSwgWzM3Ljc3MjQ2NCwgLTEyMi40NjEyMTNdLCBbMzcuNzcyNDAzLCAtMTIyLjQ2MTI2Nl0sIFszNy43NzIzNDYsIC0xMjIuNDYxMzE5XSwgWzM3Ljc3MjI4NSwgLTEyMi40NjEzODhdLCBbMzcuNzcyMjI4LCAtMTIyLjQ2MTQ3Ml0sIFszNy43NzIxNzEsIC0xMjIuNDYxNTY0XSwgWzM3Ljc3MjEyMSwgLTEyMi40NjE2NjNdLCBbMzcuNzcyMDM3LCAtMTIyLjQ2MTgzMV0sIFszNy43NzIwMDMsIC0xMjIuNDYxODkyXSwgWzM3Ljc3MTk2OCwgLTEyMi40NjE5MzddLCBbMzcuNzcxOTE1LCAtMTIyLjQ2MTk4M10sIFszNy43NzE4NzMsIC0xMjIuNDYyMDA2XSwgWzM3Ljc3MTgzMSwgLTEyMi40NjIwMjldLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE3NTUsIC0xMjIuNDYxOTIyXSwgWzM3Ljc3MTcyNCwgLTEyMi40NjE3MzldLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE1NDUsIC0xMjIuNDYwNjMzXSwgWzM3Ljc3MTQ0MiwgLTEyMi40NTk5NTRdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzEzMzksIC0xMjIuNDU5MzQzXSwgWzM3Ljc3MTMxNiwgLTEyMi40NTkxNzZdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEyNTEsIC0xMjIuNDU5MTk4XSwgWzM3Ljc3MTIyNCwgLTEyMi40NTkyMDZdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEwNDEsIC0xMjIuNDU5MjgyXSwgWzM3Ljc3MDk2OSwgLTEyMi40NTkzMjFdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA4MjgsIC0xMjIuNDU5NDA0XSwgWzM3Ljc3MDc2NywgLTEyMi40NTk0NV0sIFszNy43NzA3MDYsIC0xMjIuNDU5NTExXSwgWzM3Ljc3MDY1MiwgLTEyMi40NTk1NzJdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA1OTksIC0xMjIuNDU5NjQxXSwgWzM3Ljc3MDU1MywgLTEyMi40NTk3MV0sIFszNy43NzA1MTEsIC0xMjIuNDU5Nzk0XSwgWzM3Ljc3MDQ3MywgLTEyMi40NTk4ODVdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0MTYsIC0xMjIuNDYwMDc2XSwgWzM3Ljc3MDM5NywgLTEyMi40NjAxOV0sIFszNy43NzAzNzgsIC0xMjIuNDYwMzA1XSwgWzM3Ljc3MDM2MiwgLTEyMi40NjA0NV0sIFszNy43NzAzNTEsIC0xMjIuNDYwNTk1XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjA3NF0sIFszNy43NzAzMzIsIC0xMjIuNDYwODc3XSwgWzM3Ljc3MDMzNiwgLTEyMi40NjEwMTRdLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzNDMsIC0xMjIuNDYxMjg5XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjE0MTldLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMTMsIC0xMjIuNDYxNjc4XSwgWzM3Ljc3MDI5LCAtMTIyLjQ2MThdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyMzYsIC0xMjIuNDYyMDUyXSwgWzM3Ljc2OTk5NiwgLTEyMi40NjMwNTldLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk3MTgsIC0xMjIuNDY0MjY0XSwgWzM3Ljc2OTY4LCAtMTIyLjQ2NDQwMl0sIFszNy43Njk2NjgsIC0xMjIuNDY0NDQ4XSwgWzM3Ljc2OTYzOCwgLTEyMi40NjQ1MjRdLCBbMzcuNzY5Njk1LCAtMTIyLjQ2NDU3XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTgzMiwgLTEyMi40NjQ3OThdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTk1OCwgLTEyMi40NjUwMTJdLCBbMzcuNzY5ODYzLCAtMTIyLjQ2NDg4Ml0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTc5OCwgLTEyMi40NjQ2NjldLCBbMzcuNzY5NzYsIC0xMjIuNDY0NjA4XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk2MzgsIC0xMjIuNDY0NTI0XSwgWzM3Ljc2OTY2OCwgLTEyMi40NjQ0NDhdLCBbMzcuNzY5NjgsIC0xMjIuNDY0NDAyXSwgWzM3Ljc2OTcxOCwgLTEyMi40NjQyNjRdLCBbMzcuNzY5OTc3LCAtMTIyLjQ2MzE0M10sIFszNy43Njk5OTYsIC0xMjIuNDYzMDU5XSwgWzM3Ljc3MDIzNiwgLTEyMi40NjIwNTJdLCBbMzcuNzcwMjYzLCAtMTIyLjQ2MTkzN10sIFszNy43NzAyOSwgLTEyMi40NjE4XSwgWzM3Ljc3MDMxMywgLTEyMi40NjE2NzhdLCBbMzcuNzcwMzI4LCAtMTIyLjQ2MTU0MV0sIFszNy43NzAzMzksIC0xMjIuNDYxNDE5XSwgWzM3Ljc3MDM0MywgLTEyMi40NjEyODldLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTE1Ml0sIFszNy43NzAzMzYsIC0xMjIuNDYxMDE0XSwgWzM3Ljc3MDMzMiwgLTEyMi40NjA4NzddLCBbMzcuNzcwMzM5LCAtMTIyLjQ2MDc0XSwgWzM3Ljc3MDM1MSwgLTEyMi40NjA1OTVdLCBbMzcuNzcwMzYyLCAtMTIyLjQ2MDQ1XSwgWzM3Ljc3MDM3OCwgLTEyMi40NjAzMDVdLCBbMzcuNzcwMzk3LCAtMTIyLjQ2MDE5XSwgWzM3Ljc3MDQxNiwgLTEyMi40NjAwNzZdLCBbMzcuNzcwNDM5LCAtMTIyLjQ1OTk4NF0sIFszNy43NzA0NzMsIC0xMjIuNDU5ODg1XSwgWzM3Ljc3MDUxMSwgLTEyMi40NTk3OTRdLCBbMzcuNzcwNTUzLCAtMTIyLjQ1OTcxXSwgWzM3Ljc3MDU5OSwgLTEyMi40NTk2NDFdLCBbMzcuNzcwNjI2LCAtMTIyLjQ1OTYwM10sIFszNy43NzA2NTIsIC0xMjIuNDU5NTcyXSwgWzM3Ljc3MDcwNiwgLTEyMi40NTk1MTFdLCBbMzcuNzcwNzY3LCAtMTIyLjQ1OTQ1XSwgWzM3Ljc3MDgyOCwgLTEyMi40NTk0MDRdLCBbMzcuNzcwODk2LCAtMTIyLjQ1OTM1OV0sIFszNy43NzA5NjksIC0xMjIuNDU5MzIxXSwgWzM3Ljc3MTA0MSwgLTEyMi40NTkyODJdLCBbMzcuNzcxMTI1LCAtMTIyLjQ1OTI0NF0sIFszNy43NzEyMjQsIC0xMjIuNDU5MjA2XSwgWzM3Ljc3MTI1MSwgLTEyMi40NTkxOThdLCBbMzcuNzcxMjgyLCAtMTIyLjQ1OTE4M10sIFszNy43NzEzMTYsIC0xMjIuNDU5MTc2XSwgWzM3Ljc3MTMzOSwgLTEyMi40NTkzNDNdLCBbMzcuNzcxNDE5LCAtMTIyLjQ1OTgyNF0sIFszNy43NzE0NDIsIC0xMjIuNDU5OTU0XSwgWzM3Ljc3MTU0NSwgLTEyMi40NjA2MzNdLCBbMzcuNzcxNTc1LCAtMTIyLjQ2MDgzMV0sIFszNy43NzE3MjQsIC0xMjIuNDYxNzM5XSwgWzM3Ljc3MTc1NSwgLTEyMi40NjE5MjJdLCBbMzcuNzcxNzc4LCAtMTIyLjQ2MjA1Ml0sIFszNy43NzE4MDgsIC0xMjIuNDYyMTgyXSwgWzM3Ljc3MTgzNSwgLTEyMi40NjIzMDRdLCBbMzcuNzcxOTc2LCAtMTIyLjQ2Mjg1M10sIFszNy43NzIwMjksIC0xMjIuNDYzMDUxXSwgWzM3Ljc3MjA4MywgLTEyMi40NjMyNV0sIFszNy43NzIxNDgsIC0xMjIuNDYzNDk0XSwgWzM3Ljc3MjI2NiwgLTEyMi40NjM5MTNdLCBbMzcuNzcyMzA4LCAtMTIyLjQ2NDA3NF0sIFszNy43NzIzNjUsIC0xMjIuNDY0MjcyXSwgWzM3Ljc3MjM5OSwgLTEyMi40NjQ0MDJdLCBbMzcuNzcyNDMsIC0xMjIuNDY0NTI0XSwgWzM3Ljc3MjQ2LCAtMTIyLjQ2NDY1NF0sIFszNy43NzI0ODcsIC0xMjIuNDY0NzkxXSwgWzM3Ljc3MjUxLCAtMTIyLjQ2NDkyMV0sIFszNy43NzI1MzMsIC0xMjIuNDY1MDVdLCBbMzcuNzcyNTU2LCAtMTIyLjQ2NTE4XSwgWzM3Ljc3MjU2MywgLTEyMi40NjUyMjZdLCBbMzcuNzcyNTc1LCAtMTIyLjQ2NTMxXSwgWzM3Ljc3MjU5LCAtMTIyLjQ2NTQyNF0sIFszNy43NzI2MDIsIC0xMjIuNDY1NTM5XSwgWzM3Ljc3MjYwOSwgLTEyMi40NjU2NTNdLCBbMzcuNzcyNjEzLCAtMTIyLjQ2NTc0NV0sIFszNy43NzI2MTMsIC0xMjIuNDY1ODQ0XSwgWzM3Ljc3MjcxMiwgLTEyMi40NjU4NTFdLCBbMzcuNzcyNzg1LCAtMTIyLjQ2NTg1OV0sIFszNy43NzI5NTMsIC0xMjIuNDY1ODY3XSwgWzM3Ljc3MzE3LCAtMTIyLjQ2NTg4Ml0sIFszNy43NzM0MDMsIC0xMjIuNDY1ODk3XSwgWzM3Ljc3NTI3MiwgLTEyMi40NjYwMzRdLCBbMzcuNzc3MTM3LCAtMTIyLjQ2NjE2NF0sIFszNy43Nzg5MTUsIC0xMjIuNDY2Mjk0XSwgWzM3Ljc3OTAwNiwgLTEyMi40NjYzMDFdLCBbMzcuNzc5MDU2LCAtMTIyLjQ2NTIzM10sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfOWEwMzhkM2NiY2VjNGFhMWIyNjVkYTExNjg0NDhjMDEuYWRkTGF5ZXIocG9seV9saW5lXzZmMWFjM2UxYjRmNTRhYTY5ZTAwZGZhMTY2NTMyNjgyKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPC9zY3JpcHQ+CiAgICAgICAg" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>




```python
opt_2_people_drive = optimize_stops_mult(home, stops, num_travelers = 2, stop_labels = stop_labels, costing = 'auto')
print opt_2_people_drive['time']
```

    [17, 15]
    


```python
points = [[opt_2_people_drive['home_point']]] + opt_2_people_drive['points']
labels = [['Home']]+[[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_2_people_drive['order']]

m3 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels, line_coords = opt_2_people_drive['lines'])
m3
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;base64,CiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PSJjb250ZW50LXR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD1VVEYtOCIgLz4KICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzEuMTEuMS9qcXVlcnkubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5taW4uanMiPjwvc2NyaXB0PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQubWFya2VyY2x1c3Rlci8wLjQuMC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXItc3JjLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvbGVhZmxldC5tYXJrZXJjbHVzdGVyLmpzIj48L3NjcmlwdD4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC5taW4uY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiIC8+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvMC40LjAvTWFya2VyQ2x1c3Rlci5EZWZhdWx0LmNzcyIgLz4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC5tYXJrZXJjbHVzdGVyLzAuNC4wL01hcmtlckNsdXN0ZXIuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHl0aG9uLXZpc3VhbGl6YXRpb24vZm9saXVtL21hc3Rlci9mb2xpdW0vdGVtcGxhdGVzL2xlYWZsZXQuYXdlc29tZS5yb3RhdGUuY3NzIiAvPgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPgoKICAgICAgICAgICAgaHRtbCwgYm9keSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAjbWFwIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlOwogICAgICAgICAgICAgICAgdG9wOjA7CiAgICAgICAgICAgICAgICBib3R0b206MDsKICAgICAgICAgICAgICAgIHJpZ2h0OjA7CiAgICAgICAgICAgICAgICBsZWZ0OjA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPHN0eWxlPiAjbWFwXzQ5N2EwYThhYmRkMzQ0N2ViMTUyZGE4MmVmNjM1YTNjIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB3aWR0aCA6IDEwMC4wJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwLjAlOwogICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgIHRvcDogMC4wJTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF80OTdhMGE4YWJkZDM0NDdlYjE1MmRhODJlZjYzNWEzYyIgPjwvZGl2PgogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDwvYm9keT4KICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoLTkwLCAtMTgwKTsKICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IEwubGF0TG5nKDkwLCAxODApOwogICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpOwoKICAgICAgICAgICAgdmFyIG1hcF80OTdhMGE4YWJkZDM0NDdlYjE1MmRhODJlZjYzNWEzYyA9IEwubWFwKCdtYXBfNDk3YTBhOGFiZGQzNDQ3ZWIxNTJkYTgyZWY2MzVhM2MnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6WzM3Ljc3OTc5MTQyODYsLTEyMi40NjUyMDQyODZdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfZjZlYjA3ZTU4YjYzNDg4MWIxMTE2NmY2ZTgyMzAxNGYgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3N0YW1lbi10aWxlcy17c30uYS5zc2wuZmFzdGx5Lm5ldC93YXRlcmNvbG9yL3t6fS97eH0ve3l9LmpwZycsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsCiAgICAgICAgICAgICAgICAgICAgbWluWm9vbTogMSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCB0aWxlcyBieSA8YSBocmVmPSJodHRwOi8vc3RhbWVuLmNvbSI+U3RhbWVuIERlc2lnbjwvYT4sIHVuZGVyIDxhIGhyZWY9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMCI+Q0MgQlkgMy4wPC9hPi4gRGF0YSBieSA8YSBocmVmPSJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmciPk9wZW5TdHJlZXRNYXA8L2E+LCB1bmRlciA8YSBocmVmPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAiPkNDIEJZIFNBPC9hPi4nLAogICAgICAgICAgICAgICAgICAgIGRldGVjdFJldGluYTogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF80OTdhMGE4YWJkZDM0NDdlYjE1MmRhODJlZjYzNWEzYyk7CgogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfNDljNjVkNjhhZTQ0NDFjYjlmMmEyOWNiYjhiZDEwYTkgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzkxMSwtMTIyLjQ2NDE5XSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDk3YTBhOGFiZGQzNDQ3ZWIxNTJkYTgyZWY2MzVhM2MpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fNGU1ZjIxMzEzODBlNDU4NWI3OGMzYTgwZmNjZDkwODQgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyXzQ5YzY1ZDY4YWU0NDQxY2I5ZjJhMjljYmI4YmQxMGE5LnNldEljb24oaWNvbl80ZTVmMjEzMTM4MGU0NTg1Yjc4YzNhODBmY2NkOTA4NCk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU1YzYxNWFlYjdmNDQwMmI4ZDkwNTQ5YmNhYmZkNzM1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ5N2EyZGNkZTJjODQwMGI4ODk0ZTk3YjI3OGYyNTA1ID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF80OTdhMmRjZGUyYzg0MDBiODg5NGU5N2IyNzhmMjUwNSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgSG9tZTwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81NWM2MTVhZWI3ZjQ0MDJiOGQ5MDU0OWJjYWJmZDczNS5zZXRDb250ZW50KGh0bWxfNDk3YTJkY2RlMmM4NDAwYjg4OTRlOTdiMjc4ZjI1MDUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl80OWM2NWQ2OGFlNDQ0MWNiOWYyYTI5Y2JiOGJkMTBhOS5iaW5kUG9wdXAocG9wdXBfNTVjNjE1YWViN2Y0NDAyYjhkOTA1NDliY2FiZmQ3MzUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl8zNDEwZTg1N2ZiZTc0MGQzYWIxYzcwZWQ0NmI5YTY2OCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4NjIxLC0xMjIuNDUxODRdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80OTdhMGE4YWJkZDM0NDdlYjE1MmRhODJlZjYzNWEzYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl8yMDA3MjdhMDQ2ZmM0M2JhOTlmOGJiOTE3ZGRhNDdjZiA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8zNDEwZTg1N2ZiZTc0MGQzYWIxYzcwZWQ0NmI5YTY2OC5zZXRJY29uKGljb25fMjAwNzI3YTA0NmZjNDNiYTk5ZjhiYjkxN2RkYTQ3Y2YpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84ZjhkYmY1MTFlMWU0MjBjYWNhMzVmMWE3YzlmNWI0MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83OGRjMDYxY2Y1OWU0NjIwOTg3NWZlN2ZjODVjODAxOCA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNzhkYzA2MWNmNTllNDYyMDk4NzVmZTdmYzg1YzgwMTgiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBOb2FoJiMzOTtzIEJhZ2VsczwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84ZjhkYmY1MTFlMWU0MjBjYWNhMzVmMWE3YzlmNWI0MS5zZXRDb250ZW50KGh0bWxfNzhkYzA2MWNmNTllNDYyMDk4NzVmZTdmYzg1YzgwMTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8zNDEwZTg1N2ZiZTc0MGQzYWIxYzcwZWQ0NmI5YTY2OC5iaW5kUG9wdXAocG9wdXBfOGY4ZGJmNTExZTFlNDIwY2FjYTM1ZjFhN2M5ZjViNDEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9jOGYxNzM4NTk2ZDI0Yjc0YmZmMDNlODdhNjFiYmQ4MCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc3MDAyLC0xMjIuNDY1NjFdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80OTdhMGE4YWJkZDM0NDdlYjE1MmRhODJlZjYzNWEzYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9lNjBmNTFiMDNiYTY0MzYxODZjMDhmYTAzZTBlMTVjNyA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl9jOGYxNzM4NTk2ZDI0Yjc0YmZmMDNlODdhNjFiYmQ4MC5zZXRJY29uKGljb25fZTYwZjUxYjAzYmE2NDM2MTg2YzA4ZmEwM2UwZTE1YzcpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85ZjIyYzI5Y2NhOTI0ZjFmYTc2ZWY0ZDJmYWUxYTc4MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83NDYwNGUxNDE1ZjY0YmNjODM3MGRmZjI2YmRhNDgyMSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfNzQ2MDRlMTQxNWY2NGJjYzgzNzBkZmYyNmJkYTQ4MjEiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDIgLSBkZSBZb3VuZyBNdXNldW08L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOWYyMmMyOWNjYTkyNGYxZmE3NmVmNGQyZmFlMWE3ODIuc2V0Q29udGVudChodG1sXzc0NjA0ZTE0MTVmNjRiY2M4MzcwZGZmMjZiZGE0ODIxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfYzhmMTczODU5NmQyNGI3NGJmZjAzZTg3YTYxYmJkODAuYmluZFBvcHVwKHBvcHVwXzlmMjJjMjljY2E5MjRmMWZhNzZlZjRkMmZhZTFhNzgyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMDVlZjRhM2I5Y2FjNDZlNmE0ZTE4YWUxOTFhMTk0M2EgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODI3OCwtMTIyLjQ2MzUxXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDk3YTBhOGFiZGQzNDQ3ZWIxNTJkYTgyZWY2MzVhM2MpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fMWFlN2MyYzNmNzQ5NGY1YTllYzllMGYzODZmMWE5NzMgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8wNWVmNGEzYjljYWM0NmU2YTRlMThhZTE5MWExOTQzYS5zZXRJY29uKGljb25fMWFlN2MyYzNmNzQ5NGY1YTllYzllMGYzODZmMWE5NzMpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80MzY5MDJkN2ViMzc0ZTVmYmYxNTIwMDBhOTBmYTRmZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kOGMwZDZmMGYwYzg0YTBiYjg0MjY1NzRjY2I5NTM2MSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfZDhjMGQ2ZjBmMGM4NGEwYmI4NDI2NTc0Y2NiOTUzNjEiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDEgLSBUb3kgQm9hdDwvZGl2PiAgICAgICAgICAgICAgICAgJylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80MzY5MDJkN2ViMzc0ZTVmYmYxNTIwMDBhOTBmYTRmZS5zZXRDb250ZW50KGh0bWxfZDhjMGQ2ZjBmMGM4NGEwYmI4NDI2NTc0Y2NiOTUzNjEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIG1hcmtlcl8wNWVmNGEzYjljYWM0NmU2YTRlMThhZTE5MWExOTQzYS5iaW5kUG9wdXAocG9wdXBfNDM2OTAyZDdlYjM3NGU1ZmJmMTUyMDAwYTkwZmE0ZmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcmtlcl9kNWNmOGEyZjNhMTM0YmVhOWQ2MjhhMjA1NmNhYjU2MCA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzM3Ljc4MTEzLC0xMjIuNDY5OTVdLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF80OTdhMGE4YWJkZDM0NDdlYjE1MmRhODJlZjYzNWEzYyk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB2YXIgaWNvbl9hZTRkYjQwYTI2MDA0NjBmOTQwYzNlMGVjN2I1ZTQxNSA9IEwuQXdlc29tZU1hcmtlcnMuaWNvbih7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ21hcG1hcmtlcicsCiAgICAgICAgICAgICAgICAgICAgaWNvbkNvbG9yOiAnd2hpdGUnLAogICAgICAgICAgICAgICAgICAgIG1hcmtlckNvbG9yOiAncmVkJywKICAgICAgICAgICAgICAgICAgICBwcmVmaXg6ICdnbHlwaGljb24nLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NlczogJ2ZhLXJvdGF0ZS0wJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2VyX2Q1Y2Y4YTJmM2ExMzRiZWE5ZDYyOGEyMDU2Y2FiNTYwLnNldEljb24oaWNvbl9hZTRkYjQwYTI2MDA0NjBmOTQwYzNlMGVjN2I1ZTQxNSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzljODI4M2Y3OGU0MDQwNDA4YTI0MmYyMDZiOTkwYTNhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzE0YzNiMmIwMzAwMDRkYzI5NThlYTNmNGY2NzcxZTZlID0gJCgnICAgICAgICAgPGRpdiBpZD0iaHRtbF8xNGMzYjJiMDMwMDA0ZGMyOTU4ZWEzZjRmNjc3MWU2ZSIgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPiAgICAgICAgICAgICAgICAgMiAtIExhbXBzIFBsdXM8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOWM4MjgzZjc4ZTQwNDA0MDhhMjQyZjIwNmI5OTBhM2Euc2V0Q29udGVudChodG1sXzE0YzNiMmIwMzAwMDRkYzI5NThlYTNmNGY2NzcxZTZlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZDVjZjhhMmYzYTEzNGJlYTlkNjI4YTIwNTZjYWI1NjAuYmluZFBvcHVwKHBvcHVwXzljODI4M2Y3OGU0MDQwNDA4YTI0MmYyMDZiOTkwYTNhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfZTM4NmQ2MGRkMjcwNGIyMjg3MTNiZDBmYmM1NjIzODMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43ODM3MSwtMTIyLjQ4M10sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzQ5N2EwYThhYmRkMzQ0N2ViMTUyZGE4MmVmNjM1YTNjKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIHZhciBpY29uX2YwZmU5ZmMzYjNkNDRmNjViYjNmY2E2NzMxZjQwM2Q3ID0gTC5Bd2Vzb21lTWFya2Vycy5pY29uKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAnbWFwbWFya2VyJywKICAgICAgICAgICAgICAgICAgICBpY29uQ29sb3I6ICd3aGl0ZScsCiAgICAgICAgICAgICAgICAgICAgbWFya2VyQ29sb3I6ICdyZWQnLAogICAgICAgICAgICAgICAgICAgIHByZWZpeDogJ2dseXBoaWNvbicsCiAgICAgICAgICAgICAgICAgICAgZXh0cmFDbGFzc2VzOiAnZmEtcm90YXRlLTAnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXJrZXJfZTM4NmQ2MGRkMjcwNGIyMjg3MTNiZDBmYmM1NjIzODMuc2V0SWNvbihpY29uX2YwZmU5ZmMzYjNkNDRmNjViYjNmY2E2NzMxZjQwM2Q3KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDVlZDEyNjRlNWQ3NGU2Zjg5NmY2MTliMzRkZDJkYTIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDUzMzkxMmNjNDU5NDY5MGEwODVmNGMwMmU1YzM2NWIgPSAkKCcgICAgICAgICA8ZGl2IGlkPSJodG1sXzQ1MzM5MTJjYzQ1OTQ2OTBhMDg1ZjRjMDJlNWMzNjViIiAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+ICAgICAgICAgICAgICAgICAzIC0gUGl6emV0dGE8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDVlZDEyNjRlNWQ3NGU2Zjg5NmY2MTliMzRkZDJkYTIuc2V0Q29udGVudChodG1sXzQ1MzM5MTJjYzQ1OTQ2OTBhMDg1ZjRjMDJlNWMzNjViKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfZTM4NmQ2MGRkMjcwNGIyMjg3MTNiZDBmYmM1NjIzODMuYmluZFBvcHVwKHBvcHVwX2Q1ZWQxMjY0ZTVkNzRlNmY4OTZmNjE5YjM0ZGQyZGEyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXJrZXJfMDJjYmJkNTIwNjM3NDg5OTg0NGExZTkwZDExZWM5ZjQgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFszNy43NzU1OCwtMTIyLjQ1ODMzXSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfNDk3YTBhOGFiZGQzNDQ3ZWIxNTJkYTgyZWY2MzVhM2MpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgdmFyIGljb25fZWNkMDRlY2I1YTc5NGE5MDgyZTk4NzE4NmMyZjFlYjEgPSBMLkF3ZXNvbWVNYXJrZXJzLmljb24oewogICAgICAgICAgICAgICAgICAgIGljb246ICdtYXBtYXJrZXInLAogICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogJ3doaXRlJywKICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiAnZ2x5cGhpY29uJywKICAgICAgICAgICAgICAgICAgICBleHRyYUNsYXNzZXM6ICdmYS1yb3RhdGUtMCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1hcmtlcl8wMmNiYmQ1MjA2Mzc0ODk5ODQ0YTFlOTBkMTFlYzlmNC5zZXRJY29uKGljb25fZWNkMDRlY2I1YTc5NGE5MDgyZTk4NzE4NmMyZjFlYjEpOwogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iMWQ4MWViMTJjYTM0NWU1YTI5NGViNWZkM2MwZGRmNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83YjIzZTI4Yzk4NmY0OTFmYmE0NDkyYzI4OTIwOThhOSA9ICQoJyAgICAgICAgIDxkaXYgaWQ9Imh0bWxfN2IyM2UyOGM5ODZmNDkxZmJhNDQ5MmMyODkyMDk4YTkiICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij4gICAgICAgICAgICAgICAgIDQgLSBBcmd1ZWxsbyBNYXJrZXQ8L2Rpdj4gICAgICAgICAgICAgICAgICcpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjFkODFlYjEyY2EzNDVlNWEyOTRlYjVmZDNjMGRkZjcuc2V0Q29udGVudChodG1sXzdiMjNlMjhjOTg2ZjQ5MWZiYTQ0OTJjMjg5MjA5OGE5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBtYXJrZXJfMDJjYmJkNTIwNjM3NDg5OTg0NGExZTkwZDExZWM5ZjQuYmluZFBvcHVwKHBvcHVwX2IxZDgxZWIxMmNhMzQ1ZTVhMjk0ZWI1ZmQzYzBkZGY3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBwb2x5X2xpbmVfYjkzNTk0ZTU2NGVmNDFkN2EzYTU5Y2M1Y2EyMmVkYmIgPSBMLnBvbHlsaW5lKAogICAgICAgICAgICAgICAgICAgIFtbMzcuNzc5MTA2LCAtMTIyLjQ2NDE1OF0sIFszNy43ODA1MjksIC0xMjIuNDY0MjY0XSwgWzM3Ljc4MDk2NywgLTEyMi40NjQyOTVdLCBbMzcuNzgxMDE3LCAtMTIyLjQ2MzIyN10sIFszNy43ODEwNTEsIC0xMjIuNDYyNDg3XSwgWzM3Ljc4MTA2MywgLTEyMi40NjIxNTFdLCBbMzcuNzgxMDk3LCAtMTIyLjQ2MTQyNl0sIFszNy43ODExMTIsIC0xMjIuNDYxMDgzXSwgWzM3Ljc4MTE2MiwgLTEyMi40NjAwMDddLCBbMzcuNzgxMjExLCAtMTIyLjQ1ODg5M10sIFszNy43ODEyNDYsIC0xMjIuNDU4MTUzXSwgWzM3Ljc4MTI2NSwgLTEyMi40NTc3NDldLCBbMzcuNzgxMzMsIC0xMjIuNDU2MzA3XSwgWzM3Ljc4MTM1NiwgLTEyMi40NTU3MTldLCBbMzcuNzgxMzYsIC0xMjIuNDU1NjU4XSwgWzM3Ljc4MTM2OCwgLTEyMi40NTU1NDRdLCBbMzcuNzgxMzg3LCAtMTIyLjQ1NTM4NF0sIFszNy43ODEzOTgsIC0xMjIuNDU1Mjg1XSwgWzM3Ljc4MTU0MywgLTEyMi40NTQxNjNdLCBbMzcuNzgxNjI3LCAtMTIyLjQ1MzUwN10sIFszNy43ODE2NjksIC0xMjIuNDUzMTc5XSwgWzM3Ljc4MTc4NywgLTEyMi40NTMyMDJdLCBbMzcuNzgzOTU0LCAtMTIyLjQ1MzYzN10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4NDE2OCwgLTEyMi40NTM2NjddLCBbMzcuNzg0MjY3LCAtMTIyLjQ1MzY4Ml0sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDQ5NiwgLTEyMi40NTM3MTNdLCBbMzcuNzg0NjE0LCAtMTIyLjQ1MzcyOF0sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDg1MSwgLTEyMi40NTM3NDNdLCBbMzcuNzg0OTc2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NTIzNiwgLTEyMi40NTM3NTldLCBbMzcuNzg1MzU4LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTUxMSwgLTEyMi40NTM3NTldLCBbMzcuNzg1NTU2LCAtMTIyLjQ1Mzc1MV0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTYzMywgLTEyMi40NTM2OThdLCBbMzcuNzg1NjU5LCAtMTIyLjQ1MzY2XSwgWzM3Ljc4NTY4MiwgLTEyMi40NTM2MTRdLCBbMzcuNzg1Njk0LCAtMTIyLjQ1MzU2XSwgWzM3Ljc4NTcwNSwgLTEyMi40NTM0OTldLCBbMzcuNzg1NzEzLCAtMTIyLjQ1MzQzMV0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcyNCwgLTEyMi40NTMyNzhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1ODc3LCAtMTIyLjQ1MjA4XSwgWzM3Ljc4NTkxMSwgLTEyMi40NTE3OThdLCBbMzcuNzg1OTExLCAtMTIyLjQ1MTc5OF0sIFszNy43ODU4NzcsIC0xMjIuNDUyMDhdLCBbMzcuNzg1NzcsIC0xMjIuNDUyOTJdLCBbMzcuNzg1NzI0LCAtMTIyLjQ1MzI3OF0sIFszNy43ODU3MTcsIC0xMjIuNDUzMzc3XSwgWzM3Ljc4NTcxMywgLTEyMi40NTM0MzFdLCBbMzcuNzg1NzA1LCAtMTIyLjQ1MzQ5OV0sIFszNy43ODU2OTQsIC0xMjIuNDUzNTZdLCBbMzcuNzg1NjgyLCAtMTIyLjQ1MzYxNF0sIFszNy43ODU2NTksIC0xMjIuNDUzNjZdLCBbMzcuNzg1NjMzLCAtMTIyLjQ1MzY5OF0sIFszNy43ODU1OTQsIC0xMjIuNDUzNzI4XSwgWzM3Ljc4NTU1NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg1NTExLCAtMTIyLjQ1Mzc1OV0sIFszNy43ODU0NjUsIC0xMjIuNDUzNzU5XSwgWzM3Ljc4NTM1OCwgLTEyMi40NTM3NTldLCBbMzcuNzg1MjM2LCAtMTIyLjQ1Mzc1OV0sIFszNy43ODUxMDYsIC0xMjIuNDUzNzUxXSwgWzM3Ljc4NDk3NiwgLTEyMi40NTM3NTFdLCBbMzcuNzg0ODUxLCAtMTIyLjQ1Mzc0M10sIFszNy43ODQ3MzIsIC0xMjIuNDUzNzM2XSwgWzM3Ljc4NDYxNCwgLTEyMi40NTM3MjhdLCBbMzcuNzg0NDk2LCAtMTIyLjQ1MzcxM10sIFszNy43ODQzNzgsIC0xMjIuNDUzNjk4XSwgWzM3Ljc4NDI2NywgLTEyMi40NTM2ODJdLCBbMzcuNzg0MTY4LCAtMTIyLjQ1MzY2N10sIFszNy43ODQwNTcsIC0xMjIuNDUzNjUyXSwgWzM3Ljc4Mzk1NCwgLTEyMi40NTM2MzddLCBbMzcuNzgxNzg3LCAtMTIyLjQ1MzIwMl0sIFszNy43ODE2NjEsIC0xMjIuNDU0MTk0XSwgWzM3Ljc4MTU1NSwgLTEyMi40NTUwMDJdLCBbMzcuNzgxNTIsIC0xMjIuNDU1MzA4XSwgWzM3Ljc4MTUwNSwgLTEyMi40NTU0MjJdLCBbMzcuNzgxNDk0LCAtMTIyLjQ1NTU1Ml0sIFszNy43ODE0ODIsIC0xMjIuNDU1Njg5XSwgWzM3Ljc4MTQ3NSwgLTEyMi40NTU4MTFdLCBbMzcuNzgxNDY3LCAtMTIyLjQ1NTk0OF0sIFszNy43ODE0NTIsIC0xMjIuNDU2MzQ1XSwgWzM3Ljc4MTMzLCAtMTIyLjQ1NjMwN10sIFszNy43ODEyMzgsIC0xMjIuNDU2Mjg0XSwgWzM3Ljc4MDY2MiwgLTEyMi40NTYxN10sIFszNy43ODAzMjYsIC0xMjIuNDU2MTAxXSwgWzM3Ljc4MDI3MywgLTEyMi40NTYwODZdLCBbMzcuNzgwMjMxLCAtMTIyLjQ1NjA3XSwgWzM3Ljc4MDE4NSwgLTEyMi40NTYwNDhdLCBbMzcuNzgwMTc4LCAtMTIyLjQ1NjA0XSwgWzM3Ljc4MDE0MywgLTEyMi40NTYwMTddLCBbMzcuNzgwMDksIC0xMjIuNDU1OTc5XSwgWzM3Ljc4MDA0LCAtMTIyLjQ1NTk0MV0sIFszNy43Nzk5NDUsIC0xMjIuNDU1ODU3XSwgWzM3Ljc3OTgyMywgLTEyMi40NTU3NThdLCBbMzcuNzc5Nzc3LCAtMTIyLjQ1NTcyN10sIFszNy43Nzk3MjQsIC0xMjIuNDU1Njg5XSwgWzM3Ljc3OTY2NiwgLTEyMi40NTU2NjZdLCBbMzcuNzc5NjEzLCAtMTIyLjQ1NTY0M10sIFszNy43Nzk1NjMsIC0xMjIuNDU1NjJdLCBbMzcuNzc5NTA2LCAtMTIyLjQ1NTYwNV0sIFszNy43Nzk0MzQsIC0xMjIuNDU1NTldLCBbMzcuNzc5MzYxLCAtMTIyLjQ1NTU2N10sIFszNy43Nzg4MjMsIC0xMjIuNDU1NDZdLCBbMzcuNzc3OTUsIC0xMjIuNDU1Mjc3XSwgWzM3Ljc3NzcxMywgLTEyMi40NTUyMzldLCBbMzcuNzc3NjA2LCAtMTIyLjQ1NTIzMV0sIFszNy43Nzc1LCAtMTIyLjQ1NTIzMV0sIFszNy43NzcwMzgsIC0xMjIuNDU1MTRdLCBbMzcuNzc2MzI1LCAtMTIyLjQ1NDk5NV0sIFszNy43NzU3MDMsIC0xMjIuNDU0ODczXSwgWzM3Ljc3NTY1MywgLTEyMi40NTQ4NTddLCBbMzcuNzc1NTg4LCAtMTIyLjQ1NDgzNF0sIFszNy43NzU1MzUsIC0xMjIuNDU0ODA0XSwgWzM3Ljc3NTQ4OSwgLTEyMi40NTQ3ODFdLCBbMzcuNzc1NDQ0LCAtMTIyLjQ1NDc2Nl0sIFszNy43NzUyMDMsIC0xMjIuNDU0NzJdLCBbMzcuNzc1MTMxLCAtMTIyLjQ1NDcwNV0sIFszNy43NzQ4NTYsIC0xMjIuNDU0Njc0XSwgWzM3Ljc3NDc2NSwgLTEyMi40NTQ2NjddLCBbMzcuNzc0Njg4LCAtMTIyLjQ1NDY1OV0sIFszNy43NzQzMTEsIC0xMjIuNDU0NTgzXSwgWzM3Ljc3NDE4OCwgLTEyMi40NTQ1Nl0sIFszNy43NzM3MTksIC0xMjIuNDU0NDY4XSwgWzM3Ljc3Mjk3MiwgLTEyMi40NTQzMTZdLCBbMzcuNzcyOTAzLCAtMTIyLjQ1NDNdLCBbMzcuNzcyODM0LCAtMTIyLjQ1NDI4NV0sIFszNy43NzI1ODYsIC0xMjIuNDU0MjM5XSwgWzM3Ljc3MjQ4LCAtMTIyLjQ1NDIxN10sIFszNy43NzIwNDEsIC0xMjIuNDU0MTI1XSwgWzM3Ljc3MTkzNCwgLTEyMi40NTQxMDJdLCBbMzcuNzcxNjU5LCAtMTIyLjQ1NDA0OV0sIFszNy43NzE1OTUsIC0xMjIuNDU0MDMzXSwgWzM3Ljc3MTU2OCwgLTEyMi40NTQwMzNdLCBbMzcuNzcxNTExLCAtMTIyLjQ1NDAxOF0sIFszNy43NzE0NTcsIC0xMjIuNDU0MTQ4XSwgWzM3Ljc3MTEwMiwgLTEyMi40NTUwMDJdLCBbMzcuNzcxMDkxLCAtMTIyLjQ1NTA3MV0sIFszNy43NzEwNzYsIC0xMjIuNDU1MTRdLCBbMzcuNzcxMDU3LCAtMTIyLjQ1NTIwMV0sIFszNy43NzA5OTYsIC0xMjIuNDU1MzQ2XSwgWzM3Ljc3MDk3NywgLTEyMi40NTUzOTldLCBbMzcuNzcwOTYxLCAtMTIyLjQ1NTQ2XSwgWzM3Ljc3MDk1NCwgLTEyMi40NTU0OThdLCBbMzcuNzcwOTU0LCAtMTIyLjQ1NTUyOV0sIFszNy43NzA5NTQsIC0xMjIuNDU1NTY3XSwgWzM3Ljc3MDk1NCwgLTEyMi40NTU2NjZdLCBbMzcuNzcwOTU0LCAtMTIyLjQ1NTcyN10sIFszNy43NzA5NDIsIC0xMjIuNDU1OTY0XSwgWzM3Ljc3MDkzNSwgLTEyMi40NTYwNjNdLCBbMzcuNzcwOTE5LCAtMTIyLjQ1NjIwOF0sIFszNy43NzA5MzEsIC0xMjIuNDU2MzY4XSwgWzM3Ljc3MDk0NiwgLTEyMi40NTY0OV0sIFszNy43NzA5NTQsIC0xMjIuNDU2NTM2XSwgWzM3Ljc3MDk3MywgLTEyMi40NTY2OTZdLCBbMzcuNzcwOTg0LCAtMTIyLjQ1Njc5NV0sIFszNy43NzA5OTksIC0xMjIuNDU2ODk0XSwgWzM3Ljc3MTAxOCwgLTEyMi40NTY5ODZdLCBbMzcuNzcxMDMsIC0xMjIuNDU3MDc4XSwgWzM3Ljc3MTA2NCwgLTEyMi40NTczNzVdLCBbMzcuNzcxMDk1LCAtMTIyLjQ1NzYwNF0sIFszNy43NzExMjUsIC0xMjIuNDU3ODE4XSwgWzM3Ljc3MTE3NSwgLTEyMi40NTgyMDddLCBbMzcuNzcxMTk0LCAtMTIyLjQ1ODM1OV0sIFszNy43NzEyMDksIC0xMjIuNDU4NDY2XSwgWzM3Ljc3MTI0NCwgLTEyMi40NTg3MDNdLCBbMzcuNzcxMzA1LCAtMTIyLjQ1OTExNV0sIFszNy43NzEzMTYsIC0xMjIuNDU5MTc2XSwgWzM3Ljc3MTI4MiwgLTEyMi40NTkxODNdLCBbMzcuNzcxMjUxLCAtMTIyLjQ1OTE5OF0sIFszNy43NzEyMjQsIC0xMjIuNDU5MjA2XSwgWzM3Ljc3MTEyNSwgLTEyMi40NTkyNDRdLCBbMzcuNzcxMDQxLCAtMTIyLjQ1OTI4Ml0sIFszNy43NzA5NjksIC0xMjIuNDU5MzIxXSwgWzM3Ljc3MDg5NiwgLTEyMi40NTkzNTldLCBbMzcuNzcwODI4LCAtMTIyLjQ1OTQwNF0sIFszNy43NzA3NjcsIC0xMjIuNDU5NDVdLCBbMzcuNzcwNzA2LCAtMTIyLjQ1OTUxMV0sIFszNy43NzA2NTIsIC0xMjIuNDU5NTcyXSwgWzM3Ljc3MDYyNiwgLTEyMi40NTk2MDNdLCBbMzcuNzcwNTk5LCAtMTIyLjQ1OTY0MV0sIFszNy43NzA1NTMsIC0xMjIuNDU5NzFdLCBbMzcuNzcwNTExLCAtMTIyLjQ1OTc5NF0sIFszNy43NzA0NzMsIC0xMjIuNDU5ODg1XSwgWzM3Ljc3MDQzOSwgLTEyMi40NTk5ODRdLCBbMzcuNzcwNDE2LCAtMTIyLjQ2MDA3Nl0sIFszNy43NzAzOTcsIC0xMjIuNDYwMTldLCBbMzcuNzcwMzc4LCAtMTIyLjQ2MDMwNV0sIFszNy43NzAzNjIsIC0xMjIuNDYwNDVdLCBbMzcuNzcwMzUxLCAtMTIyLjQ2MDU5NV0sIFszNy43NzAzMzksIC0xMjIuNDYwNzRdLCBbMzcuNzcwMzMyLCAtMTIyLjQ2MDg3N10sIFszNy43NzAzMzYsIC0xMjIuNDYxMDE0XSwgWzM3Ljc3MDM0MywgLTEyMi40NjExNTJdLCBbMzcuNzcwMzQzLCAtMTIyLjQ2MTI4OV0sIFszNy43NzAzMzksIC0xMjIuNDYxNDE5XSwgWzM3Ljc3MDMyOCwgLTEyMi40NjE1NDFdLCBbMzcuNzcwMzEzLCAtMTIyLjQ2MTY3OF0sIFszNy43NzAyOSwgLTEyMi40NjE4XSwgWzM3Ljc3MDI2MywgLTEyMi40NjE5MzddLCBbMzcuNzcwMjM2LCAtMTIyLjQ2MjA1Ml0sIFszNy43Njk5OTYsIC0xMjIuNDYzMDU5XSwgWzM3Ljc2OTk3NywgLTEyMi40NjMxNDNdLCBbMzcuNzY5NzE4LCAtMTIyLjQ2NDI2NF0sIFszNy43Njk2OCwgLTEyMi40NjQ0MDJdLCBbMzcuNzY5NjY4LCAtMTIyLjQ2NDQ0OF0sIFszNy43Njk2MzgsIC0xMjIuNDY0NTI0XSwgWzM3Ljc2OTY5NSwgLTEyMi40NjQ1N10sIFszNy43Njk3NiwgLTEyMi40NjQ2MDhdLCBbMzcuNzY5Nzk4LCAtMTIyLjQ2NDY2OV0sIFszNy43Njk4MzIsIC0xMjIuNDY0Nzk4XSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5OTU4LCAtMTIyLjQ2NTAxMl0sIFszNy43Njk5NTgsIC0xMjIuNDY1MDEyXSwgWzM3Ljc2OTg2MywgLTEyMi40NjQ4ODJdLCBbMzcuNzY5ODMyLCAtMTIyLjQ2NDc5OF0sIFszNy43Njk3OTgsIC0xMjIuNDY0NjY5XSwgWzM3Ljc2OTc2LCAtMTIyLjQ2NDYwOF0sIFszNy43Njk2OTUsIC0xMjIuNDY0NTddLCBbMzcuNzY5NjM4LCAtMTIyLjQ2NDUyNF0sIFszNy43Njk2NjgsIC0xMjIuNDY0NDQ4XSwgWzM3Ljc2OTY4LCAtMTIyLjQ2NDQwMl0sIFszNy43Njk3MTgsIC0xMjIuNDY0MjY0XSwgWzM3Ljc2OTk3NywgLTEyMi40NjMxNDNdLCBbMzcuNzY5OTk2LCAtMTIyLjQ2MzA1OV0sIFszNy43NzAyMzYsIC0xMjIuNDYyMDUyXSwgWzM3Ljc3MDI2MywgLTEyMi40NjE5MzddLCBbMzcuNzcwMjksIC0xMjIuNDYxOF0sIFszNy43NzAzMTMsIC0xMjIuNDYxNjc4XSwgWzM3Ljc3MDMyOCwgLTEyMi40NjE1NDFdLCBbMzcuNzcwMzM5LCAtMTIyLjQ2MTQxOV0sIFszNy43NzAzNDMsIC0xMjIuNDYxMjg5XSwgWzM3Ljc3MDM0MywgLTEyMi40NjExNTJdLCBbMzcuNzcwMzM2LCAtMTIyLjQ2MTAxNF0sIFszNy43NzAzMzIsIC0xMjIuNDYwODc3XSwgWzM3Ljc3MDMzOSwgLTEyMi40NjA3NF0sIFszNy43NzAzNTEsIC0xMjIuNDYwNTk1XSwgWzM3Ljc3MDM2MiwgLTEyMi40NjA0NV0sIFszNy43NzAzNzgsIC0xMjIuNDYwMzA1XSwgWzM3Ljc3MDM5NywgLTEyMi40NjAxOV0sIFszNy43NzA0MTYsIC0xMjIuNDYwMDc2XSwgWzM3Ljc3MDQzOSwgLTEyMi40NTk5ODRdLCBbMzcuNzcwNDczLCAtMTIyLjQ1OTg4NV0sIFszNy43NzA1MTEsIC0xMjIuNDU5Nzk0XSwgWzM3Ljc3MDU1MywgLTEyMi40NTk3MV0sIFszNy43NzA1OTksIC0xMjIuNDU5NjQxXSwgWzM3Ljc3MDYyNiwgLTEyMi40NTk2MDNdLCBbMzcuNzcwNjUyLCAtMTIyLjQ1OTU3Ml0sIFszNy43NzA3MDYsIC0xMjIuNDU5NTExXSwgWzM3Ljc3MDc2NywgLTEyMi40NTk0NV0sIFszNy43NzA4MjgsIC0xMjIuNDU5NDA0XSwgWzM3Ljc3MDg5NiwgLTEyMi40NTkzNTldLCBbMzcuNzcwOTY5LCAtMTIyLjQ1OTMyMV0sIFszNy43NzEwNDEsIC0xMjIuNDU5MjgyXSwgWzM3Ljc3MTEyNSwgLTEyMi40NTkyNDRdLCBbMzcuNzcxMjI0LCAtMTIyLjQ1OTIwNl0sIFszNy43NzEyNTEsIC0xMjIuNDU5MTk4XSwgWzM3Ljc3MTI4MiwgLTEyMi40NTkxODNdLCBbMzcuNzcxMzE2LCAtMTIyLjQ1OTE3Nl0sIFszNy43NzEzMzksIC0xMjIuNDU5MzQzXSwgWzM3Ljc3MTQxOSwgLTEyMi40NTk4MjRdLCBbMzcuNzcxNDQyLCAtMTIyLjQ1OTk1NF0sIFszNy43NzE1NDUsIC0xMjIuNDYwNjMzXSwgWzM3Ljc3MTU3NSwgLTEyMi40NjA4MzFdLCBbMzcuNzcxNzI0LCAtMTIyLjQ2MTczOV0sIFszNy43NzE3NTUsIC0xMjIuNDYxOTIyXSwgWzM3Ljc3MTc3OCwgLTEyMi40NjIwNTJdLCBbMzcuNzcxODA4LCAtMTIyLjQ2MjE4Ml0sIFszNy43NzE4MzUsIC0xMjIuNDYyMzA0XSwgWzM3Ljc3MTk3NiwgLTEyMi40NjI4NTNdLCBbMzcuNzcyMDI5LCAtMTIyLjQ2MzA1MV0sIFszNy43NzIwODMsIC0xMjIuNDYzMjVdLCBbMzcuNzcyMTQ4LCAtMTIyLjQ2MzQ5NF0sIFszNy43NzIyNjYsIC0xMjIuNDYzOTEzXSwgWzM3Ljc3MjMwOCwgLTEyMi40NjQwNzRdLCBbMzcuNzcyMzY1LCAtMTIyLjQ2NDI3Ml0sIFszNy43NzIzOTksIC0xMjIuNDY0NDAyXSwgWzM3Ljc3MjQzLCAtMTIyLjQ2NDUyNF0sIFszNy43NzI0NiwgLTEyMi40NjQ2NTRdLCBbMzcuNzcyNDg3LCAtMTIyLjQ2NDc5MV0sIFszNy43NzI1MSwgLTEyMi40NjQ5MjFdLCBbMzcuNzcyNTMzLCAtMTIyLjQ2NTA1XSwgWzM3Ljc3MjU1NiwgLTEyMi40NjUxOF0sIFszNy43NzI1NjMsIC0xMjIuNDY1MjI2XSwgWzM3Ljc3MjU3NSwgLTEyMi40NjUzMV0sIFszNy43NzI1OSwgLTEyMi40NjU0MjRdLCBbMzcuNzcyNjAyLCAtMTIyLjQ2NTUzOV0sIFszNy43NzI2MDksIC0xMjIuNDY1NjUzXSwgWzM3Ljc3MjYxMywgLTEyMi40NjU3NDVdLCBbMzcuNzcyNjEzLCAtMTIyLjQ2NTg0NF0sIFszNy43NzI3MTIsIC0xMjIuNDY1ODUxXSwgWzM3Ljc3Mjc4NSwgLTEyMi40NjU4NTldLCBbMzcuNzcyOTUzLCAtMTIyLjQ2NTg2N10sIFszNy43NzMxNywgLTEyMi40NjU4ODJdLCBbMzcuNzczNDAzLCAtMTIyLjQ2NTg5N10sIFszNy43NzUyNzIsIC0xMjIuNDY2MDM0XSwgWzM3Ljc3NzEzNywgLTEyMi40NjYxNjRdLCBbMzcuNzc3MTgzLCAtMTIyLjQ2NTA5Nl0sIFszNy43NzcyMzMsIC0xMjIuNDY0MDI4XSwgWzM3Ljc3OTEwNiwgLTEyMi40NjQxNThdXSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfNDk3YTBhOGFiZGQzNDQ3ZWIxNTJkYTgyZWY2MzVhM2MuYWRkTGF5ZXIocG9seV9saW5lX2I5MzU5NGU1NjRlZjQxZDdhM2E1OWNjNWNhMjJlZGJiKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIHBvbHlfbGluZV85NWNmN2Q2ZjFjMWE0OGZjYmYwODg0YmY3MjY2ZjJkZSA9IEwucG9seWxpbmUoCiAgICAgICAgICAgICAgICAgICAgW1szNy43NzkxMDksIC0xMjIuNDY0MjAzXSwgWzM3Ljc3OTE1MSwgLTEyMi40NjMwOTddLCBbMzcuNzgxMDE3LCAtMTIyLjQ2MzIyN10sIFszNy43ODExMzksIC0xMjIuNDYzMjM0XSwgWzM3Ljc4MTUzOSwgLTEyMi40NjMyNjVdLCBbMzcuNzgyNzkxLCAtMTIyLjQ2MzQwMl0sIFszNy43ODI3OTEsIC0xMjIuNDYzNDAyXSwgWzM3Ljc4MTUzOSwgLTEyMi40NjMyNjVdLCBbMzcuNzgxMTM5LCAtMTIyLjQ2MzIzNF0sIFszNy43ODEwODksIC0xMjIuNDY0MzAzXSwgWzM3Ljc4MTA1NSwgLTEyMi40NjUwMl0sIFszNy43ODEwNCwgLTEyMi40NjUzNzFdLCBbMzcuNzgxMDA5LCAtMTIyLjQ2NjA3M10sIFszNy43ODA5OSwgLTEyMi40NjY0NDZdLCBbMzcuNzgwOTQ0LCAtMTIyLjQ2NzUxNV0sIFszNy43ODA4OTUsIC0xMjIuNDY4NTgzXSwgWzM3Ljc4MDg2NCwgLTEyMi40NjkyNjJdLCBbMzcuNzgwODQ1LCAtMTIyLjQ2OTY1OF0sIFszNy43ODExNSwgLTEyMi40Njk3MDRdLCBbMzcuNzgxMTUsIC0xMjIuNDY5NzA0XSwgWzM3Ljc4MDg0NSwgLTEyMi40Njk2NThdLCBbMzcuNzgwODE1LCAtMTIyLjQ3MDM4M10sIFszNy43ODA3OTYsIC0xMjIuNDcwNzI3XSwgWzM3Ljc4MDc1LCAtMTIyLjQ3MTgwMl0sIFszNy43ODA3MzgsIC0xMjIuNDcxOTkzXSwgWzM3Ljc4MDczMSwgLTEyMi40NzIxNzZdLCBbMzcuNzgwNzI3LCAtMTIyLjQ3MjI2OF0sIFszNy43ODA3MTksIC0xMjIuNDcyNDA1XSwgWzM3Ljc4MDcxOSwgLTEyMi40NzI0ODldLCBbMzcuNzgwNywgLTEyMi40NzI4N10sIFszNy43ODA2NywgLTEyMi40NzM1MDRdLCBbMzcuNzgwNjUxLCAtMTIyLjQ3Mzk5Ml0sIFszNy43ODA1OTcsIC0xMjIuNDc1MTEzXSwgWzM3Ljc4MDU1MSwgLTEyMi40NzYxODldLCBbMzcuNzgwNTEzLCAtMTIyLjQ3NjkzN10sIFszNy43ODA1MDIsIC0xMjIuNDc3MjU3XSwgWzM3Ljc4MDQ2NywgLTEyMi40Nzc5NzRdLCBbMzcuNzgwNDUyLCAtMTIyLjQ3ODMzM10sIFszNy43ODA0MDMsIC0xMjIuNDc5NDAxXSwgWzM3Ljc4MDM1NywgLTEyMi40ODA0NzddLCBbMzcuNzgwMzI2LCAtMTIyLjQ4MTEzM10sIFszNy43ODAzMDcsIC0xMjIuNDgxNTQ1XSwgWzM3Ljc4MDI3NywgLTEyMi40ODIyMzldLCBbMzcuNzgwMjU4LCAtMTIyLjQ4MjYxM10sIFszNy43ODE3MzgsIC0xMjIuNDgyNzJdLCBbMzcuNzgyMTE5LCAtMTIyLjQ4Mjc1XSwgWzM3Ljc4MzcxOCwgLTEyMi40ODI5MDNdLCBbMzcuNzgzNzE4LCAtMTIyLjQ4MjkwM10sIFszNy43ODM5ODgsIC0xMjIuNDgyODg4XSwgWzM3Ljc4MzkzOSwgLTEyMi40ODM5NTZdLCBbMzcuNzgzODg5LCAtMTIyLjQ4NTAyNF0sIFszNy43ODM2NDEsIC0xMjIuNDg1MDA5XSwgWzM3Ljc4MjI5MSwgLTEyMi40ODQ5MV0sIFszNy43ODIwMiwgLTEyMi40ODQ4OTRdLCBbMzcuNzgxNzE1LCAtMTIyLjQ4NDg3MV0sIFszNy43ODE2MzEsIC0xMjIuNDg0ODY0XSwgWzM3Ljc4MDQ5OCwgLTEyMi40ODQ3OF0sIFszNy43ODAxNjIsIC0xMjIuNDg0NzU3XSwgWzM3Ljc4MDAzMywgLTEyMi40ODQ3NDldLCBbMzcuNzc5Nzg1LCAtMTIyLjQ4NDcyNl0sIFszNy43Nzg0MjMsIC0xMjIuNDg0NjM1XSwgWzM3Ljc3ODE3MSwgLTEyMi40ODQ2MTJdLCBbMzcuNzc3OTIzLCAtMTIyLjQ4NDU5N10sIFszNy43NzY1NTQsIC0xMjIuNDg0NDk4XSwgWzM3Ljc3NjMwNiwgLTEyMi40ODQ0NzVdLCBbMzcuNzc2MzU1LCAtMTIyLjQ4MzQwN10sIFszNy43NzY0MDEsIC0xMjIuNDgyMzM4XSwgWzM3Ljc3NjQ1MSwgLTEyMi40ODEyN10sIFszNy43NzY1LCAtMTIyLjQ4MDE5NV0sIFszNy43NzY1NSwgLTEyMi40NzkxMTldLCBbMzcuNzc2NTk2LCAtMTIyLjQ3ODA1MV0sIFszNy43NzY2NDUsIC0xMjIuNDc2OTgzXSwgWzM3Ljc3NjY5NSwgLTEyMi40NzU5MDddLCBbMzcuNzc2NzQ0LCAtMTIyLjQ3NDgzOV0sIFszNy43NzY3OTQsIC0xMjIuNDczNzE3XSwgWzM3Ljc3Njg0NCwgLTEyMi40NzI1OTZdLCBbMzcuNzc2ODUxLCAtMTIyLjQ3MjQ4MV0sIFszNy43NzY4NjYsIC0xMjIuNDcyMTNdLCBbMzcuNzc2ODc0LCAtMTIyLjQ3MTk4NV0sIFszNy43NzY4ODUsIC0xMjIuNDcxNzExXSwgWzM3Ljc3Njg4OSwgLTEyMi40NzE2MjddLCBbMzcuNzc2ODkzLCAtMTIyLjQ3MTUyOF0sIFszNy43NzY5MTIsIC0xMjIuNDcxMDkzXSwgWzM3Ljc3Njk0MywgLTEyMi40NzA0NTJdLCBbMzcuNzc2OTkyLCAtMTIyLjQ2OTM3Nl0sIFszNy43NzcwMzgsIC0xMjIuNDY4MzA4XSwgWzM3Ljc3NzA4OCwgLTEyMi40NjcyNF0sIFszNy43NzcxMzcsIC0xMjIuNDY2MTY0XSwgWzM3Ljc3NzE4MywgLTEyMi40NjUwOTZdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzcyODIsIC0xMjIuNDYyOTZdLCBbMzcuNzc3MzMyLCAtMTIyLjQ2MTg4NF0sIFszNy43NzczNzgsIC0xMjIuNDYwODA4XSwgWzM3Ljc3NzQyMywgLTEyMi40NTk4MzldLCBbMzcuNzc3NDI3LCAtMTIyLjQ1OTc0XSwgWzM3Ljc3NzQzNSwgLTEyMi40NTk2NDldLCBbMzcuNzc3NDU4LCAtMTIyLjQ1OTE4M10sIFszNy43Nzc0NTQsIC0xMjIuNDU5MTNdLCBbMzcuNzc3NDQ2LCAtMTIyLjQ1OTA3Nl0sIFszNy43Nzc0MzEsIC0xMjIuNDU5MDE1XSwgWzM3Ljc3NzQwOCwgLTEyMi40NTg5NDddLCBbMzcuNzc3MzM2LCAtMTIyLjQ1ODc0MV0sIFszNy43NzcyODYsIC0xMjIuNDU4NjExXSwgWzM3Ljc3NzEyNiwgLTEyMi40NTg1OTZdLCBbMzcuNzc2ODQ0LCAtMTIyLjQ1ODU3M10sIFszNy43NzYxODcsIC0xMjIuNDU4NTI3XSwgWzM3Ljc3NjExOSwgLTEyMi40NTg1MjddLCBbMzcuNzc1NjE1LCAtMTIyLjQ1ODQ4OV0sIFszNy43NzU1NjksIC0xMjIuNDU4NTA0XSwgWzM3Ljc3NTU2OSwgLTEyMi40NTg1MDRdLCBbMzcuNzc1NjE1LCAtMTIyLjQ1ODQ4OV0sIFszNy43NzYxMTksIC0xMjIuNDU4NTI3XSwgWzM3Ljc3NjE4NywgLTEyMi40NTg1MjddLCBbMzcuNzc2ODQ0LCAtMTIyLjQ1ODU3M10sIFszNy43NzcxMjYsIC0xMjIuNDU4NTk2XSwgWzM3Ljc3NzI4NiwgLTEyMi40NTg2MTFdLCBbMzcuNzc3MzM2LCAtMTIyLjQ1ODc0MV0sIFszNy43Nzc0MDgsIC0xMjIuNDU4OTQ3XSwgWzM3Ljc3NzQzMSwgLTEyMi40NTkwMTVdLCBbMzcuNzc3NDQ2LCAtMTIyLjQ1OTA3Nl0sIFszNy43Nzc0NTQsIC0xMjIuNDU5MTNdLCBbMzcuNzc3NDU4LCAtMTIyLjQ1OTE4M10sIFszNy43Nzc0MzUsIC0xMjIuNDU5NjQ5XSwgWzM3Ljc3NzQyNywgLTEyMi40NTk3NF0sIFszNy43Nzc0MjMsIC0xMjIuNDU5ODM5XSwgWzM3Ljc3NzM3OCwgLTEyMi40NjA4MDhdLCBbMzcuNzc3MzMyLCAtMTIyLjQ2MTg4NF0sIFszNy43NzcyODIsIC0xMjIuNDYyOTZdLCBbMzcuNzc3MjMzLCAtMTIyLjQ2NDAyOF0sIFszNy43NzkxMDYsIC0xMjIuNDY0MTU4XV0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBtYXBfNDk3YTBhOGFiZGQzNDQ3ZWIxNTJkYTgyZWY2MzVhM2MuYWRkTGF5ZXIocG9seV9saW5lXzk1Y2Y3ZDZmMWMxYTQ4ZmNiZjA4ODRiZjcyNjZmMmRlKTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPC9zY3JpcHQ+CiAgICAgICAg" style="position:absolute;width:100%;height:100%;left:0;top:0;"></iframe></div></div>



Now let's say that Celeste and I have a friend who's willing to help us with our errands. I run the optimization function again, now specifying 3 travelers. The results from this indicated that one person should go to Pizzetta, one person should go to Toy Boat and Noah's Bagels, and one person should go to Lamp's Plus, the de Young, and Arguello Market. In this case, the person with the fewest amount of stops has the longest travel time (52 minutes), and the full set of errands will be made 15 minutes faster than it was with only 2 people.


```python
opt_3_people = optimize_stops_mult(home, stops, 3, stop_labels = stop_labels)
```


```python
for i in opt_3_people['order']:
    print i
```


```python
opt_3_people['time']
```


```python
points = [[opt_3_people['home_point']]] + opt_3_people['points']
labels = [['Home']] + [[' - '.join((str(i), x)) for i, x in enumerate(l, 1)] for l in opt_3_people['order']]

m4 = plot_stops(points, zoom_level = 14, tiles = 'Stamen Watercolor', labels = labels,line_coords = opt_3_people['lines'])
m4
```


```python
sf_landmarks.save('sutro_transamerica.html')
sf_rand_points.save('sf_random_points.html')
walk_1_map.save('optimize_stops_1_person_walk.html')
bike_1_map.save('optimize_stops_1_person_bike.html')
m1.save('optimize_stops_2_people_walk.html')
m2.save('optimize_stops_2_people_bike.html')
m3.save('optimize_stops_2_people_drive.html')
m4.save('optimize_stops_3_people_walk.html')
```

## Conclusion
I found working with these Mapzen services in Python to be really interesting and enjoyable. As I mentioned, this exercise was done mainly as a way to become familiar with some of their routing and geocoding tools, as well as to develop a way to map the geospatial outputs from these tools. My “extension” to the service was done as a quick and dirty way to obtain and visualize an answer for the vehicle routing problem that works for a small number of stops. A next step would be to look into the optimization algorithm that Mapzen uses on the time-distance matrix, so that it can be adapted to work more generally for multiple salesman. This would address the problem further upstream and require many fewer calls to the API.
